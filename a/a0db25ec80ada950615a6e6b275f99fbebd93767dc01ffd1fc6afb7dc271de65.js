(()=>{var e={3099:,6077:,1223:,1530:,5787:,9670:,8457:,1318:,3411:,7072:,4326:,648:,1501:,4092:,9920:,8544:,4994:,8880:,9114:,6135:,654:,9781:,317:,8324:,6833:,5268:,1036:(e,t,r)=>{var n=r(8113);e.exports=/web0s(?!.*chrome)/i.test(n)},8113:,7392:,748:,2109:,7293:,7007:,9974:,5005:,1246:,8554:,647:,7854:,6656:,3501:e=>{e.exports={}},842:,490:,4664:,8361:,9587:,2788:,9909:,7659:,4705:,111:,1913:e=>{e.exports=!1},7850:,408:,9212:,3383:,7497:,5948:,3366:,133:,590:,8536:,8523:,1574:,30:,6048:,3070:,1236:,8006:,5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:,6324:,1956:,5296:,7674:,3887:,857:,2534:,9478:,2248:,1320:,7651:,2261:,7066:,2999:,4488:,3505:,6340:,8003:,6200:,5465:,2309:,6707:,8710:,3197:,261:,1400:,5656:,9958:,7466:,7908:,7593:,1694:,9711:,3307:,5112:,6992:,8674:,4603:,4916:,9714:,8783:,4723:,5306:,3123:,8206:,3561:(e,t,r)=>{"use strict";var n=r(2109),i=r(1913),o=r(1501);n({target:"WeakSet",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},2049:(e,t,r)=>{"use strict";var n=r(2109),i=r(1913),o=r(4092);n({target:"WeakSet",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},3948:,1637:,285:,8878:function(){}},t={};function(){}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(){return new Promise((function(e){var t,r,n=function(){e(!0)},i=function(){e(!1)};if(!((t=/(?=.*(opera|chrome)).*/i.test(navigator.userAgent)&&navigator.storage&&navigator.storage.estimate)&&navigator.storage.estimate().then((function(){})),t||function(){}()||function(){var e=navigator.userAgent.match(/Version\/([0-9\._]+).*Safari/);if(e){if(parseInt(e[1],10)<11)return function(){try{localStorage.length||(localStorage.setItem("inPrivate","0"),localStorage.removeItem("inPrivate")),i()}catch(e){navigator.cookieEnabled?n():i()}return!0}();try{window.openDatabase(null,null,null,null),i()}catch(e){n()}}return!!e}()||((r=!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent))&&n(),r)))return i()}))}r(3123),r(4723),r(6992),r(3948),r(8674),r(285),r(4603),r(9714),r(5306);var t=r(8878);function n(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function i(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function o(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}r(8206),r(3561),r(2049);var a=new WeakMap,s=new WeakMap,c=new WeakSet,u=new WeakSet;class l{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(u.add(this),c.add(this),a.set(this,{writable:!0,value:0}),s.set(this,{writable:!0,value:void 0}),"string"!=typeof e)throw new Error("A string value must be provided for the ID");if(0==e.length)throw new Error("The ID value must not be empty");o(this,s,e),0===t?o(this,a,i(this,c,f).call(this)):this.views=t}increment(){this.views=n(this,a)+1}set views(e){if("number"!=typeof e)throw new Error("Views must provided as a number");if((e=parseInt(e))<0)throw new Error("Views must be greater than or equal to zero");o(this,a,e),n(this,a)!=i(this,c,f).call(this)&&i(this,u,h).call(this)}get views(){return n(this,a)}get expires(){var e=new Date;return e.setDate(1),e.setMonth(e.getMonth()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e}toJSON(){return{id:n(this,s),views:n(this,a),expires:this.expires}}}var f=function(){var e=decodeURIComponent(document.cookie).split(/\s*?;\s*/);for(var t of e)if(0===t.indexOf("tncms:meter:assets"+n(this,s))){var r=t.match(/=(\d+)/);if(r)return parseInt(r[1])}return 0},h=function(){document.cookie="tncms:meter:assets"+n(this,s)+"="+n(this,a)+"; expires="+this.expires.toGMTString()+"; path=/; SameSite=Strict"},p=function(){return(p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function S(e){return parseInt(e)}function A(e){return parseFloat(e)}function(){}function(){}function(){}function(){}function(){}function(){}Object.create,Object.create;var C=["monospace","sans-serif","serif"],M=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"],I={fontStyle:"normal",fontWeight:"normal",letterSpacing:"normal",lineBreak:"auto",lineHeight:"normal",textTransform:"none",textAlign:"left",textDecoration:"none",textShadow:"none",whiteSpace:"normal",wordBreak:"normal",wordSpacing:"normal",position:"absolute",left:"-9999px",fontSize:"48px"};function L(e){return e.toDataURL()}var j={osCpu:function(){return navigator.oscpu},languages:function(){var e,t=navigator,r=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(void 0!==n&&r.push([n]),Array.isArray(t.languages))(function(){var e=window,t=navigator;return k(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5})()&&k([!("MediaSettingsRange"in(e=window)),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3||r.push(t.languages);else if("string"==typeof t.languages){var i=t.languages;i&&r.push(i.split(","))}return r},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return void 0,"number"==typeof(e=A(navigator.deviceMemory))&&isNaN(e)?undefined:e;var e},screenResolution:function(){},availableScreenResolution:function(){},hardwareConcurrency:function(){},timezoneOffset:function(){},timezone:function(){},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){return navigator.platform},plugins:function(){},canvas:function(){},touchSupport:function(){},fonts:function(){var e=document,t=e.body,r=e.createElement("div"),n=e.createElement("div"),i={},o={},a=function(){},s=function(){},c=C.map((function(){}));t.appendChild(r);for(var u=0,l=C.length;u<l;u++)i[C[u]]=c[u].offsetWidth,o[C[u]]=c[u].offsetHeight;var f=function(){for(var e={},t=function(){},r=0,i=M;r<i.length;r++)t(i[r]);return e}();t.appendChild(n);for(var h=[],p=0,d=M.length;p<d;p++)s(f[M[p]])&&h.push(M[p]);return t.removeChild(n),t.removeChild(r),h},audio:function(){return d(this,void 0,void 0,(function(){var e,t,r,n,i,o,a;return v(this,(function(s){switch(s.label){case 0:if(e=window,!(t=e.OfflineAudioContext||e.webkitOfflineAudioContext))return[2,-2];if(function(){var e=window,t=navigator;return k(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}()&&!function(){var e=window;return k(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}()&&!function(){}())return[2,-1];r=new t(1,44100,44100),(n=r.createOscillator()).type="triangle",T(r,n.frequency,1e4),i=r.createDynamicsCompressor(),T(r,i.threshold,-50),T(r,i.knee,40),T(r,i.ratio,12),T(r,i.reduction,-20),T(r,i.attack,0),T(r,i.release,.25),n.connect(i),i.connect(r.destination),n.start(0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,P(r)];case 2:return o=s.sent(),[3,5];case 3:if("timeout"===(a=s.sent()).name||"suspended"===a.name)return[2,-3];throw a;case 4:return n.disconnect(),i.disconnect(),[7];case 5:return[2,R(o.getChannelData(0))]}}))}))},pluginsSupport:function(){return void 0!==navigator.plugins},productSub:function(){return navigator.productSub},emptyEvalLength:function(){return eval.toString().length},errorFF:function(){},vendor:function(){return navigator.vendor},chrome:function(){return void 0!==window.chrome},cookiesEnabled:function(){}};function(){}function _(e){return function(){}(function(){}(e))}var D=function(){function e(){}return e.prototype.get=function(e){return void 0===e&&(e={}),d(this,void 0,void 0,(function(){var t,r;return v(this,(function(n){switch(n.label){case 0:return[4,function(e,t,r){return d(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l;return v(this,(function(f){switch(f.label){case 0:t=Date.now(),n={},i=0,o=Object.keys(e),f.label=1;case 1:if(!(i<o.length))return[3,7];if(a=o[i],function(){}(r,a))return[3,6];s=void 0,f.label=2;case 2:return f.trys.push([2,4,,5]),l={},[4,e[a](void 0)];case 3:return l.value=f.sent(),s=l,[3,5];case 4:return c=f.sent(),s=c&&"object"==typeof c&&"message"in c?{error:c}:{error:{message:c}},[3,5];case 5:u=Date.now(),n[a]=p(p({},s),{duration:u-t}),t=u,f.label=6;case 6:return i++,[3,1];case 7:return[2,n]}}))}))}(j,0,[])];case 1:return t=n.sent(),r=function(){}(t),e.debug&&console.log("Copy the text below to get the debug data:\n\n```\nversion: 3.0.6\nuserAgent: "+navigator.userAgent+"\ngetOptions: "+JSON.stringify(e,void 0,2)+"\nvisitorId: "+r.visitorId+"\ncomponents: "+U(t)+"\n```"),[2,r]}}))}))},e}();const N={load:function(e){var t=(void 0===e?{}:e).delayFallback,r=void 0===t?50:t;return d(this,void 0,void 0,(function(){}))},hashComponents:_,componentsToDebugString:U};function B(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){B(o,n,i,a,s,"next",e)}function s(e){B(o,n,i,a,s,"throw",e)}a(void 0)}))}}function(){}function(){}function(){}var V=()=>{},H=new WeakMap,$=new WeakMap,J=new WeakMap,z=new WeakMap,X=new WeakMap,K=new WeakMap,Y=new WeakMap,Z=new WeakMap,Q=new WeakSet,ee=new WeakSet,te=new WeakMap,re=new WeakMap,ne=new WeakSet,ie=new WeakSet,oe=new WeakSet;class ae{constructor(){var e,t,r,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(oe.add(this),ie.add(this),ne.add(this),re.set(this,{get:le,set:fe}),te.set(this,{get:ue,set:void 0}),ee.add(this),Q.add(this),H.set(this,{writable:!0,value:!0}),$.set(this,{writable:!0,value:!1}),J.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:{}}),X.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),Y.set(this,{writable:!0,value:[]}),Z.set(this,{writable:!0,value:void 0}),G(this,J,null!==(e=o.host)&&void 0!==e?e:null),G(this,H,null!==(t=o.sync)&&void 0!==t&&t),G(this,$,null!==(r=o.debug)&&void 0!==r&&r),W(this,$)&&null!==(n=window)&&void 0!==n&&null!==(i=n.console)&&void 0!==i&&i.debug&&(V=console.debug.bind(window.console)),o.meters)for(var a of o.meters)W(this,z)[a.id]=new l(a.id);V("Loading list of already viewed assets");var s=sessionStorage.getItem("tncms:meter:assets");s&&G(this,Y,JSON.parse(s)||[]),F(this,Q,se).call(this)||G(this,Z,F(this,ie,pe).call(this))}ready(){var e=this;return q((function*(){return W(e,Z)&&(yield W(e,Z)),!0}))()}isValidMeter(e){return"Meter"==typeof W(this,z)[e]}getViews(e){if(W(this,z)[e])return W(this,z)[e].views;throw new Error("No such meter: "+e)}updateMeters(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;for(var r of e)W(this,z)[r]&&(W(this,z)[r].increment(),t=!0);!1!==t?F(this,ie,pe).call(this):V("No meters were changed - sync cancelled")}inAssetList(e){return void 0!==W(this,Y).find((t=>t===e))}saveAssetToList(e){W(this,Y).push(e),sessionStorage.setItem("tncms:meter:assets",JSON.stringify(W(this,Y)))}toJSON(){return{identifiers:{deviceId:W(this,te),instanceId:W(this,re)},meters:W(this,z)}}}var se=function(){if(!W(this,H))return V("Meter cache not loaded: syncronization disabled"),!1;var e="access-"+W(this,re);V("Checking to see if a meter cache is available");var t=sessionStorage.getItem(e);if(t){var r;V("Meter cache detected - unpacking");var n=JSON.parse(t),i=new Date;for(var[o,a]of(V("Initializing meters using the meter cache"),Object.entries(n.meters)))a.views<=0||(new Date(a.expires).getTime()>=i.getTime()?F(this,oe,de).call(this,o,a.views):V("Meter cache for ".concat(o," skipped - expired")));return G(this,X,null!==(r=n.deviceId)&&void 0!==r?r:null),!0}return V("No meter cache was found"),!1},ce=function(){var e=q((function*(){try{V("Detecting device identifier");var e=yield N.load(),t=yield e.get();return V("Device identified as: "+t.visitorId),t.visitorId}catch(e){console.error("Failed to identify device",e)}}));return function(){return e.apply(this,arguments)}}(),ue=function(){return W(this,X)},le=function(){return W(this,K)||(G(this,K,localStorage.getItem("tncms:access:iid")),W(this,K)||(G(this,re,F(this,ne,he).call(this)),V("Generated new instance ID: %s",W(this,K)))),W(this,K)},fe=function(e){G(this,K,e),localStorage.setItem("tncms:access:iid",e)},he=function(){},pe=function(){var e=q((function*(){if(W(this,H)){W(this,X)||G(this,X,yield F(this,ee,ce).call(this)),V("Exchanging meter metrics with server");var e=yield fetch("https://".concat(W(this,J),"/tncms/access/meter/"),{method:"POST",credentials:"include",body:JSON.stringify(this)}),t=yield e.json();if(!e.ok||null!=t&&t.code)throw new Error("Failed to sync meters: "+(null==t?void 0:t.message));if(t.meters)for(var[r,n]of(V("Updating local meters based on server state"),Object.entries(t.meters)))F(this,oe,de).call(this,r,n);V("Updating local meter cache"),sessionStorage.setItem("access-"+W(this,re),JSON.stringify({deviceId:W(this,te),meters:W(this,z)})),console.debug("Sycnronization complete")}}));return function(){return e.apply(this,arguments)}}(),de=function(e,t){W(this,z)[e]?t>W(this,z)[e].views&&(W(this,z)[e].views=t):W(this,z)[e]=new l(e,t)};function ve(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}function ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ve(o,n,i,a,s,"next",e)}function s(e){ve(o,n,i,a,s,"throw",e)}a(void 0)}))}}window.TNCMS=window.TNCMS||{};var me=window.TNCMS.Access||[];window.TNCMS.Access=function(){var r,n=null,i=null,o=null,a=null,s=null,c=!1,u=null,l=null,f={},h={},p=[],d="",v="",g=null,m=null,y="",w=!1,x=!1,b="",S=null,A=[],k={};function E(e){var t={success:!1,msg:e.msg||"Unknown error occurred",xhrStatus:e.status||"",xhrStatusText:e.statusText||""};T("Error: ",t),"function"==typeof m&&m.call(this,t)}function T(e,t){console&&(void 0!==t?console.debug("TNCMS.Access: "+e,t):console.debug("TNCMS.Access: "+e))}function P(e){var t,r;return null!==(t=null===(r=document.getElementsByName(e).item(0))||void 0===r?void 0:r.content)&&void 0!==t?t:""}function R(){return O.apply(this,arguments)}function O(){return(O=ge((function*(){try{(w=yield e())&&T("Private browsing mode detected")}catch(e){T("Private mode detection failed",e)}d||T("Asset ID",d=P("tncms-access-asset-id")),T("Asset app",v=P("tncms-access-asset-app"));var t=P("tncms-access-criteria");t&&(f=JSON.parse(t)),T("Page criteria IDs",f),T("Rule version",y=P("tncms-access-version")),null===o?C.call(this):I.call(this)}))).apply(this,arguments)}function C(){new D({url:"rules/",headers:[{name:"X-TNCMS-Access-Version",value:y}],success:function(e){var t,n=JSON.parse(e.responseText);0!=n.success?(o=n.rules,s=n.meters||[],l=n.requires_client||[],a=n.offers||{},r=new ae({host:document.location.hostname,meters:s,sync:null!==(t=window.tncms_access_control_sync)&&void 0!==t&&t,debug:!0}),T("Rules loaded",o),T("Offers loaded",a),M.call(this)):E(n)},failure:E,scope:this}).send()}function M(e){for(var t=decodeURIComponent(document.cookie).split(";"),r=null,i=0,o=[],a="anonymous";i<t.length;i++)(r=t[i].match(/tncms-screenname=(.+)$/i))&&document.cookie.indexOf("tncms-authtoken")>-1&&(a="loggedin-"+r[1]),(r=t[i].match(/tncms-access-user-version=(.+)/i))&&o.push({name:"X-TNCMS-Access-User-Version",value:r[1]});if(o.push({name:"X-TNCMS-Access-User",value:a}),e=!1,d&&v&&document.location.pathname.match(/\/(.+?)\/tncms\/admin\/action\/main\/preview\/site\//)&&(e={asset_id:d,asset_app:v},sessionStorage.getItem("accessProfile")))try{var s,l;T("Using test profile",k=JSON.parse(sessionStorage.getItem("accessProfile"))),e.profile=k.id,n=null!==(s=null===(l=k)||void 0===l?void 0:l.adblock)&&void 0!==s?s:void 0;var g="";for(g in k)if(k.hasOwnProperty(g)&&"dmp"==g)try{var m=JSON.parse(k[g]);u=[];for(var y=0;y<m.length;y++)u.push(m[y].abbr);T("Using profile audiences",u)}catch(e){T("Failed to parse profile audiences",e)}T("Meters set to profile configuration"),k.initialized=!0,sessionStorage.setItem("accessProfile",JSON.stringify(k))}catch(e){T("Failed to parse test profile",oExt)}new D({url:"user/",headers:o,params:e,success:function(e){var t=JSON.parse(e.responseText);if(0!=t.success){if(t.access_ids&&t.access_ids.length&&(p=p.concat(t.access_ids)),h=f,t.criteria_ids)for(var r in t.criteria_ids)h[r]||(h[r]=[]),h[r]=h[r].concat(t.criteria_ids[r]);T("User access IDs",p),T("User criteria IDs",h),c=!0,I.call(this)}else E(t)},failure:E,scope:this}).send()}function I(){return L.apply(this,arguments)}function L(){return(L=ge((function*(){if(c&&(-1===l.indexOf("dmp")||null!=u)){(yield r.ready())&&T("Meter manager is loaded and ready to be used"),T("Processing rules");var e=0,a=null,f=0;if(i={required:!1,access_methods:[],granting_method:null,access_rule:{},offer_config:{}},d&&r.inAssetList(d))return T("Asset already viewed"),void g.call(this,i);for(var p of(0==A.length&&(A=document.getElementsByTagName("meta")),o)){var v=[];for(var m of(e=0,f=0,p.methods))"meter"==m.type&&v.push(m.id);for(var y of(T("Processing rule "+p.name),p.criteria))switch(f++,T("Processing criteria",y.name),y.driver){case"metercheck":var E=y.data.meter,P=y.data.views,R=y.data.op;for(var O of(1==y.negate&&T("Negate is not supported by meter check"),s))if(O.id==E&&-1!==v.indexOf(O.id)){T("Checking meter "+O.name);var C=r.getViews(O.id)+1;switch(R){case"=":C==P&&(T("Meter count equals views",C),e++);break;case"<":C<P&&(T("Meter count is less than views",C),e++);break;case"<=":C<=P&&(T("Meter count is less than or equal to views",C),e++);break;case">":C>P&&(T("Meter count is greater than views",C),e++);break;case">=":C>=P&&(T("Meter count is greater than or equal to views",C),e++)}}break;case"dmp":for(var M of(T("Processing DMP",u),y.data.dmp))if(-1!==u.indexOf(M.abbr)&&1!=y.negate){T("Found audience",M),e++;break}break;case"urlpattern":for(var I of(T("Processing urlpattern against",(a=new URL(b||window.location.href)).pathname),y.data.pattern))if(new RegExp(I.replace("*",".*"),"i").exec(a.pathname)&&1!=y.negate){T("URL pattern match",I),e++;break}break;case"hostname":for(var L of(T("Processing host name against",(a=new URL(b||window.location.href)).hostname),y.data.host))if(L.toLowerCase()==a.hostname.toLowerCase()&&1!=y.negate){T("Host name match",L),e++;break}break;case"metatag":T("Processing meta tags",A);e:for(var U of A)for(var _ of y.data.meta)if(U.name==_.name&&U.content==_.value&&1!=y.negate){T("Meta tag match",U),e++;break e}break;case"referrer":var D=document.referrer.toLowerCase(),N=y.data.referrer,B="";if(x&&(D=S||""),k.referrer&&(T("Using profile referrer",k.referrer),D=k.referrer),T("Processing referrer",D),D&&D.length>0)for(var q of N)if(B=q.name.toLowerCase(),-1!==D.indexOf(B)&&1!=y.negate){T("Found referrer",y),e++;break}break;case"adblock":var F;if("boolean"!=typeof n)if(null!==(F=window)&&void 0!==F&&F.dataLayer.find(()))T("Ad blocking detected by BLOX core"),n=!0;else try{T("Ad blocker detected?",n=yield(0,t.detectAnyAdblocker)())}catch(e){T("Failed to detect ad blocking state",e),n=!1}n!=(1==y.negate)&&e++;break;case"incognito":var W=1==y.negate;k.incognito&&(T("Using profile incognito mode",!0),w=!0),w!=W&&e++;break;case"custom":T("Processing custom",y.name);var G=null;try{G=new Function(y.data.javascript)()}catch(e){T("Custom function did not execute properly",e)}"boolean"!=typeof G?T("Custom function did not return a boolean",G):!0===G&&1!=y.negate?(T("Custom JS requires access"),e++):!1===G&&1==y.negate&&(T("Custom JS requires access (negated)"),e++);break;default:h[p.id]&&-1!==h[p.id].indexOf(y.id)&&(T("Criteria matched",y),e++)}if(T("Total criteria processed: ",f),T("Total matching criteria: ",e),f&&f==e){T("Access required"),i=j.call(this,p);break}}i.required&&i.offer_config.redirect_url&&i.offer_config.redirect_url.length&&!(history.state||history.state&&history.state.redirected)&&(history.pushState({redirected:!0},"OfferRedirect"),location=i.offer_config.redirect_url),g.call(this,i)}}))).apply(this,arguments)}function j(e){var t={required:!1,access_rule:{},access_methods:[],access_meter:null},n=[],i=function(e){if(T("Examining access method",e),"meter"==e.type&&d){var i=s.find(());if(!i)return"continue";T("Examining meter",i);var o=r.getViews(e.id);return T("Meter applies at limit ",i.meter),T("Current count",o),r.inAssetList(d)?(t.access_meter=i,T("Asset already viewed, allowing access",t),t.granting_method=e,{v:t}):o>=i.meter?(T("Views exceeded meter limit"),"continue"):(r.updateMeters([i.id]),r.saveAssetToList(d),t.access_meter=i,t.access_meter.count=o+1,T("Access provided by meter",t),t.granting_method=e,{v:t})}if(-1!==p.indexOf(e.id))return T("Access provided by method",e),t.granting_method=e,{v:t};if("customjavascript"==e.type)try{var a=new Function(e.metadata.js)();if(a&&a.has_access)return T("Access provided by custom javascript method",e),t.granting_method=e,{v:t};e.hidden||(e.response=a.data||{},n.push(e),T("Added access method",e))}catch(e){T("Custom javascript method did not execute properly",e)}else e.hidden||(n.push(e),T("Added access method",e))};for(var o of e.methods){var a=i(o);if("continue"!==a&&"object"==typeof a)return a.v}var c={required:!0,access_rule:e,access_methods:n,granting_method:null,offer_config:e.offer_config||{}};return T("Access response",c),c}y=P("tncms-access-version");var U,_,D=function(e){if(!e.url||!e.success)throw"Missing URL or handler";function t(e){e.target.status>=400?"function"==typeof this.failure&&this.failure.call(this.scope,this):"function"==typeof this.success&&this.success.call(this.scope,this)}function r(e){"function"==typeof this.failure&&this.failure.call(this.scope,e)}return{send:function(){this.request=new XMLHttpRequest,this.request.success=e.success,this.request.failure=e.failure,this.request.scope=e.scope||this,this.request.addEventListener("load",t),this.request.addEventListener("error",r);var n="",i=document.location.pathname.match(/.+?\/tncms\/admin\/action\/main\/preview\/site\//),o=document.location.hostname;if(i&&(o+=i[0]+"-"),n="https://"+o+"/tncms/access/"+e.url,e.params){var a=[];for(var s in e.params)a.push(s+"="+encodeURIComponent(e.params[s]));n+="?"+a.join("&")}if(this.request.open(e.method||"GET",n,!0),e.headers&&e.headers.length)for(var c=null,u=0;u<e.headers.length;u++)c=e.headers[u],this.request.setRequestHeader(c.name,c.value);this.request.send()}}};return{checkAccess:function(e,t){if("function"!=typeof e)throw"Access success not defined";if(g=e,c&&i)return T("Using cached user access state for success"),void g.call(this,i);m=t,R.call(this)},revalidateAccess:function(e,t){if("function"!=typeof e)throw"Access success not defined";g=e,m=t;var r=Math.round((new Date).getTime()/1e3);document.cookie="tncms-access-user-version="+r+"; path=/; SameSite=Strict",T("revalidating access"),M.call(this)},setAudiences:function(e){u&&u.length>0?T("Audiences already initialized",u):(u=e||[],T("Setting audiences",e),I.call(this))},initializeExternal:function(e){if(x=!0,e){if(e.referrer&&T("Set external referrer",S=e.referrer),e.metaTags){T("Set external meta tags",A=e.metaTags);for(var t=0;t<A.length;t++){var r=A[t];r.name&&r.content&&"tncms-access-asset-id"==r.name&&T("Set asset ID",d=r.content)}}e.url&&T("Set external URL",b=e.url||null)}},getOfferGroups:(_=ge((function*(){var e,t={},r={},n=0;if(yield fetch("/tncms/access/rules/",{headers:{"X-TNCMS-Access-Version":y}}).then((e=>e.json())).then((