!function(undefined){function getMutationObserver(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function addEventListener(el,evt,func){el.addEventListener(evt,func,!1)}function(){}function setupRequestAnimationFrame(){var x,vendors=["moz","webkit","o","ms"];for(x=0;x<vendors.length&&!requestAnimationFrame;x+=1)requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];requestAnimationFrame?requestAnimationFrame=requestAnimationFrame.bind(window):log("setup","RequestAnimationFrame not supported")}function(){}function(){}function isLogEnabled(iframeId){return settings[iframeId]?settings[iframeId].log:logEnabled}function log(iframeId,msg){output("log",iframeId,msg,isLogEnabled(iframeId))}function(){}function(){}function(){}function iFrameListener(event){function(){}function processMsg(){var data=msg.substr(msgIdLen).split(":"),height=data[1]?parseInt(data[1],10):0,iframe=settings[data[0]]&&settings[data[0]].iframe,compStyle=getComputedStyle(iframe);return{iframe:iframe,id:data[0],height:height+getPaddingEnds(compStyle)+getBorderEnds(compStyle),width:data[2],type:data[3]}}function(){}function getBorderEnds(compStyle){return"border-box"!==compStyle.boxSizing?0:(compStyle.borderTopWidth?parseInt(compStyle.borderTopWidth,10):0)+(compStyle.borderBottomWidth?parseInt(compStyle.borderBottomWidth,10):0)}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}function on(funcName,val){return chkEvent(iframeId,funcName,val)}function actionMsg(){switch(settings[iframeId]&&settings[iframeId].firstRun&&firstRun(),messageData.type){case"close":closeIFrame(messageData.iframe);break;case"message":forwardMsgFromIFrame(getMsgBody(6));break;case"mouseenter":onMouse("onMouseEnter");break;case"mouseleave":onMouse("onMouseLeave");break;case"autoResize":settings[iframeId].autoResize=JSON.parse(getMsgBody(9));break;case"scrollTo":scrollRequestFromChild(!1);break;case"scrollToOffset":scrollRequestFromChild(!0);break;case"pageInfo":sendPageInfoToIframe(settings[iframeId]&&settings[iframeId].iframe,iframeId),startPageInfoMonitor();break;case"pageInfoStop":stopPageInfoMonitor();break;case"inPageLink":findTarget(getMsgBody(9));break;case"reset":resetIFrame(messageData);break;case"init":resizeIFrame(),on("onInit",messageData.iframe);break;default:0===Number(messageData.width)&&0===Number(messageData.height)?warn("Unsupported message received ("+messageData.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):resizeIFrame()}}function(){}function iFrameReadyMsgReceived(){for(var iframeId in settings)trigger("iFrame requested init",createOutgoingMsg(iframeId),settings[iframeId].iframe,iframeId)}function(){}var msg=event.data,messageData={},iframeId=null;"[iFrameResizerChild]Ready"===msg?iFrameReadyMsgReceived():isMessageForUs()?(messageData=processMsg(),iframeId=messageData.id,settings[iframeId]&&(settings[iframeId].loaded=!0),!isMessageFromMetaParent()&&hasSettings(iframeId)&&(log(iframeId,"Received: "+msg),checkIFrameExists()&&isMessageFromIFrame()&&actionMsg())):info(iframeId,"Ignored: "+msg)}function(){}function(){}function closeIFrame(iframe){var iframeId=iframe.id;if(chkEvent(iframeId,"onClose",iframeId)===!1)return void log(iframeId,"Close iframe cancelled by onClose event");log(iframeId,"Removing iFrame: "+iframeId);try{iframe.parentNode&&iframe.parentNode.removeChild(iframe)}catch(error){warn(error)}chkEvent(iframeId,"onClosed",iframeId),log(iframeId,"--"),removeIframeListeners(iframe)}function(){}function(){}function unsetPagePosition(){pagePosition=null}function(){}function(){}function(){}function(){}function(){}function createOutgoingMsg(iframeId){return iframeId+":"+settings[iframeId].bodyMarginV1+":"+settings[iframeId].sizeWidth+":"+settings[iframeId].log+":"+settings[iframeId].interval+":"+settings[iframeId].enablePublicMethods+":"+settings[iframeId].autoResize+":"+settings[iframeId].bodyMargin+":"+settings[iframeId].heightCalculationMethod+":"+settings[iframeId].bodyBackground+":"+settings[iframeId].bodyPadding+":"+settings[iframeId].tolerance+":"+settings[iframeId].inPageLinks+":"+settings[iframeId].resizeFrom+":"+settings[iframeId].widthCalculationMethod+":"+settings[iframeId].mouseEvents+":"+createOutgoingDocumentMsg()}function setupIFrame(iframe,options){function(){}function(){}function ensureHasId(iframeId){return""===iframeId&&(iframe.id=iframeId=newId(),logEnabled=(options||{}).log,log(iframeId,"Added missing iframe ID: "+iframeId+" ("+iframe.src+")")),iframeId}function(){}function(){}function(){}function setupIFrameObject(){settings[iframeId]&&(settings[iframeId].iframe.iFrameResizer={close:closeIFrame.bind(null,settings[iframeId].iframe),removeListeners:removeIframeListeners.bind(null,settings[iframeId].iframe),resize:trigger.bind(null,"Window resize","resize",settings[iframeId].iframe),moveToAnchor:function(){},sendMessage:function(){}})}function(){}function(){}function copyOptions(options){for(var option in defaults)Object.prototype.hasOwnProperty.call(defaults,option)&&(settings[iframeId][option]=Object.prototype.hasOwnProperty.call(options,option)?options[option]:defaults[option])}function(){}function(){}function processOptions(options){options=options||{},settings[iframeId]={firstRun:!0,iframe:iframe,remoteHost:iframe.src&&iframe.src.split("/").slice(0,3).join("/")},checkOptions(options),Object.keys(options).forEach(depricate,options),copyOptions(options),settings[iframeId]&&(settings[iframeId].targetOrigin=!0===settings[iframeId].checkOrigin?getTargetOrigin(settings[iframeId].remoteHost):"*")}function(){}var iframeId=ensureHasId(iframe.id);beenHere()?warn(iframeId,"Ignored iFrame, already setup."):(processOptions(options),setScrolling(),setLimits(),setupBodyMarginValues(),init(createOutgoingMsg(iframeId)),setupIFrameObject())}function(){}function(){}function fixHiddenIFrames(){function(){}function(){}function(){}var MutationObserver=getMutationObserver();MutationObserver&&createMutationObserver()}function resizeIFrames(event){function resize(){sendTriggerMsg("Window "+event,"resize",createOutgoingDocumentMsg())}log("window","Trigger event: "+event),debouce(resize,16)}function tabVisible(){function resize(){sendTriggerMsg("Tab Visable","resize",createOutgoingDocumentMsg())}"hidden"!==document.visibilityState&&(log("document","Trigger event: Visiblity change"),debouce(resize,16))}function sendTriggerMsg(eventName,event,data){function(){}Object.keys(settings).forEach(function(iframeId){isIFrameResizeEnabled(iframeId)&&trigger(eventName,event+(data?":"+data:""),settings[iframeId].iframe,iframeId)})}function setupEventListeners(){addEventListener(window,"message",iFrameListener),addEventListener(window,"resize",function(){resizeIFrames("resize")}),addEventListener(document,"visibilitychange",tabVisible),addEventListener(document,"-webkit-visibilitychange",tabVisible)}function(){}function(){}