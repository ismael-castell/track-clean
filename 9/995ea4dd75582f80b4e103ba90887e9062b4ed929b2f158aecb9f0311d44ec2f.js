/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 195);
/******/ })
/************************************************************************/
/******/ ({

/***/ 111:
/***/ (function(){}),

/***/ 113:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "standardSvgAttrs", function() { return standardSvgAttrs; });
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var standardSvgAttrs=function standardSvgAttrs(width,height){var styleOverride=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return{x:"0px",y:"0px",viewBox:"0 0 ".concat(width," ").concat(height),"enable-background":"new 0 0 ".concat(width," ").concat(height),style:_objectSpread({fill:"#ffffff",height:"100%",left:0,strokeWidth:0,top:0,width:"100%"},styleOverride),// specifically for IE11, we add the focusable attribute to svgs
// to prevent them from being focusable since tabindex on svgs is
// not supported in IE
focusable:"false"}};wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].define("vulcanV2Player/shared/ui_components/svg_boilerplate.js",{standardSvgAttrs:standardSvgAttrs});

/***/ }),

/***/ 114:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callUnbinds", function() { return callUnbinds; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "destroyControl", function() { return destroyControl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maybeDestroyControls", function() { return maybeDestroyControls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maybeInitializeControls", function() { return maybeInitializeControls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mountControls", function() { return mountControls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setControlProps", function() { return setControlProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeRootElem", function() { return removeRootElem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "runOnControlPropsUpdated", function() { return runOnControlPropsUpdated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedControlsByType", function() { return getSortedControlsByType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pickControlDefinitionsWithTypes", function() { return pickControlDefinitionsWithTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unmountReactMounts", function() { return unmountReactMounts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unsetObjectProperties", function() { return unsetObjectProperties; });
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var promiscuous__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(20);
/* harmony import */ var promiscuous__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(promiscuous__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var utilities_assign_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9);
/* harmony import */ var player_control_definitions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(31);
var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/detect"),cachedDetect=_W$lib.cachedDetect,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/timeout-utils"),doTimeout=_W$lib2.doTimeout,clearTimeouts=_W$lib2.clearTimeouts,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/elem"),elemBind=_W$lib3.elemBind,elemRemove=_W$lib3.elemRemove,elemUnbind=_W$lib3.elemUnbind,_W$lib4=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib4.h,render=_W$lib4.render,_W$lib5=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/seqid"),seqId=_W$lib5.seqId,detect=cachedDetect();// Call functions that we've pushed into control.unbinds.
var callUnbinds=function(){};var destroyControl=function(){};var maybeDestroyControls=function(){};var maybeInitializeControls=function(){};var mountControl=function(){},renderHourglassLoader=function(){};var mountControls=function(){};var setControlProps=function(){};var removeRootElem=function(){};var renderNothingForReactMount=function(){};var runOnControlPropsUpdated=function(){};var startsWithDoubleUnderscore=function(){};var getSortedControlsByType=function(){};var pickControlDefinitionsWithTypes=function(){};var unmountReactMounts=function(){};var unsetObjectProperties=function(){};

/***/ }),

/***/ 172:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/bindify"),bindify=_W$lib.bindify,Elem=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/elem"),elemBind=Elem.elemBind,elemUnbind=Elem.elemUnbind,elemWidth=Elem.elemWidth,elemHeight=Elem.elemHeight,elemOffset=Elem.elemOffset,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/detect"),cachedDetect=_W$lib2.cachedDetect,detect=cachedDetect(),TouchEvents=/*#__PURE__*/function(){function(){}return _createClass(TouchEvents,[{key:"updatePinch",value:function updatePinch(e){var rootOffset=this.rootOffset;return 2===e.touches.length?(this.touch1={left:e.touches[0].pageX-rootOffset.left,top:e.touches[0].pageY-rootOffset.top},this.touch2={left:e.touches[1].pageX-rootOffset.left,top:e.touches[1].pageY-rootOffset.top},this.pinchDistance=Math.sqrt(Math.pow(this.touch1.left-this.touch2.left,2),Math.pow(this.touch1.top-this.touch2.top,2)),null==this.initialPinchDistance&&(this.initialPinchDistance=this.pinchDistance),this.pinchScale=this.pinchDistance/this.initialPinchDistance,this.pinchDelta=this.pinchDistance-this.initialPinchDistance,this.isPinch=!0,this.pinchScale):0}},{key:"getTouchContext",value:function getTouchContext(e){var rootOffset=this.rootOffset,timeDelta=Date.now()-this.startedAt,touch=Object(e.touches[0]),xOffset=touch.pageX-rootOffset.left,yOffset=touch.pageY-rootOffset.top;return{xOffset:xOffset,yOffset:yOffset,xDelta:this.xDiff,yDelta:this.yDiff,absXDelta:Math.abs(this.xDiff),absYDelta:Math.abs(this.yDiff),delta:Math.sqrt(this.xDiff*this.xDiff+this.yDiff*this.yDiff),startedAt:this.startedAt,isSwipe:!this.isPinch&&this.isSwipe,isTap:1e3>timeDelta&&!this.isPinch&&!this.isSwipe,isLongPress:1e3<=timeDelta&&!this.isPinch&&!this.isSwipe,isPinch:this.isPinch,timeDelta:timeDelta,pinchScale:this.pinchScale,pinchDistance:this.pinchDistance}}},{key:"touchIsInsideRootElem",value:function touchIsInsideRootElem(touch){return 0<=touch.left&&touch.left<this.rootWidth&&0<=touch.top&&touch.top<this.rootHeight}},{key:"touchesAreInsideRootElem",value:function touchesAreInsideRootElem(){return this.touchIsInsideRootElem(this.touch1)&&this.touchIsInsideRootElem(this.touch2)}},{key:"resetTouchContext",value:function resetTouchContext(){this.xDown=this.yDown=null,this.xDiff=this.yDiff=0,this.isSwipe=!1,this.isPinch=!1,this.startedAt=null,this.pinchDelta=0,this.pinchDistance=0,this.initialPinchDistance=null,this.touch1=this.touch2=null}},{key:"maybeTriggerMoreSpecificEvent",value:function maybeTriggerMoreSpecificEvent(event,ctx){ctx.isLongPress?this.trigger("longpress",event,ctx):ctx.isTap?this.trigger("tap",event,ctx):ctx.isSwipe?this.trigger("swipe",event,ctx):ctx.isPinch&&this.trigger("pinch",event,ctx)}},{key:"destroy",value:function destroy(){elemUnbind(this.rootElem,"touchstart",this.onTouchStart),this.unbindTouchEndAndTouchMove(),this.rootElem=null}},{key:"unbindTouchEndAndTouchMove",value:function unbindTouchEndAndTouchMove(){elemUnbind(document,"touchmove",this.onTouchMoveDocument),elemUnbind(document,"touchend",this.onTouchEndDocument),elemUnbind(this.rootElem,"touchmove",this.onTouchMove),elemUnbind(this.rootElem,"touchend",this.onTouchEnd)}}]),TouchEvents}();bindify(TouchEvents.prototype),wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].define("vulcanV2Player/TouchEvents.js",TouchEvents);/* harmony default export */ __webpack_exports__["default"] = (TouchEvents);

/***/ }),

/***/ 195:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _vulcanV2Player_captionsHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(196);
/* harmony import */ var _vulcanV2Player_video_controls_CaptionsButtonControl_CaptionsButtonControl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(197);
/* harmony import */ var _vulcanV2Player_video_controls_CaptionsControl_CaptionsControl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(202);
/* harmony import */ var _vulcanV2Player_video_controls_TranscriptControl_TranscriptControl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(204);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(arr,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function(){}function(){}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Promise=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("promiscuous"),Obj=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/obj"),_W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/wlog"),wlog=_W$lib.wlog;// Defining these plugins means they'll be available as controls when
// they initialize.
var CaptionsPlugin=/*#__PURE__*/function(_W$Plugin$Base){function CaptionsPlugin(video,options){var _this;_classCallCheck(this,CaptionsPlugin),_this=_super.call(this,video,options),_this.video=video,_this.options=options,_this.captions=null;var opts=_this.options.language?{language:_this.options.language}:{};return _this.fetched=Object(_vulcanV2Player_captionsHelper_js__WEBPACK_IMPORTED_MODULE_1__["fetchCaptions"])(video,opts).then(function(captionsResp){_this.captions=captionsResp.captions}),_this.isEnabled=!1!==options.on,_this.unbinds=[],_this.unbinds.push(_this.video.on("plugininitialized",function(pluginName){"captions"!==pluginName||(_this.isEnabled?(_this.enable(),_this.options.onByDefault?_this.turnOn():!1!==_this.options.autoEnableForSilentAutoPlay&&("playing"===_this.video.state()&&_this.video.inSilentPlaybackMode()&&_this.turnOn(),_this.video.on("play",function(){return _this.video.inSilentPlaybackMode()&&_this.turnOn(),_this.video.unbind}),_this.video.on("silentplaybackmodechange",function(inSilentPlaybackMode){return inSilentPlaybackMode&&_this.turnOn(),_this.video.unbind}))):_this.disable())})),_this}_inherits(CaptionsPlugin,_W$Plugin$Base);var _super=_createSuper(CaptionsPlugin);return _createClass(CaptionsPlugin,[{key:"customizePreview",value:function customizePreview(changeSet){var _this2=this;return changeSet.anyChanged(["plugin[captions]","plugin[captions-v1]","ephemeral[captions]"])?new Promise(function(resolve){var captionsOptions=changeSet.currentValue("plugin[captions]")||changeSet.currentValue("plugin[captions-v1]")||{on:!1};// if the language or text of any captions changed, or a set of captions was
// added or removed, fetch the new array of captions from the server.
changeSet.changed("ephemeral[captions][captionsArray]")&&_this2.clearCache(),_this2.allMountedAndFetched().then(function(){if(changeSet.currentValue("ephemeral[ui][captions][isOpen]")){_this2.video.requestControls("customizePreview-captions",4e3);var dialog=Obj.getDeep(_this2.video,"controls.captionsButton.dialog");dialog&&dialog.open(),setTimeout(function(){var dialog=Obj.getDeep(_this2.video,"controls.captionsButton.dialog");dialog&&dialog.close()},4e3)}if(!_this2.captions.length){var defaultCaptions=[{start:0,end:5,text:["These captions are only an example."]},{start:5,end:10,text:["When you get real captions,","they'll be automatically enabled."]},{start:10,end:15,text:["Go ahead: upload an SRT file","or order a transcript!"]}];_this2.insertCaptions(defaultCaptions),_this2.turnOn()}else captionsOptions.onByDefault?_this2.turnOn():_this2.turnOff();resolve()})}):void 0}},{key:"captionsOptionsChanged",value:function captionsOptionsChanged(changedOptions){return changedOptions.some(function(){})}},{key:"captionsArrayChanged",value:function captionsArrayChanged(changedOptions){return changedOptions.some(function(option){return 0===option.indexOf("ephemeral[captions][captionsArray]")})}},{key:"enable",value:function enable(){this.video.setControlEnabled("captions",!0),this.video.setControlEnabled("captionsButton",!0),// This plugin will already be defined by virtue of loading this script, so
// shouldn't make another request.
this.video.addPlugin("captions-v1",{legacy:!0})}},{key:"disable",value:function disable(){this.video.setControlEnabled("captions",!1),this.video.setControlEnabled("captionsButton",!1),this.video.removePlugin("captions-v1")}},{key:"allMountedAndFetched",value:function allMountedAndFetched(){var mountPromises=[this.video.whenControlMounted("captionsButton"),this.video.whenControlMounted("captions")];return Promise.all(mountPromises).then(function(_ref){var _ref2=_slicedToArray(_ref,2),captionsButton=_ref2[0],captions=_ref2[1];return Promise.all([captionsButton.fetchCaptions(),captions.fetchCaptions()])})}},{key:"turnOn",value:function turnOn(){var _this3=this;this.allMountedAndFetched().then(function(){var captionsButton=_this3.video.controls.captionsButton;if(captionsButton){var preferredCaptions=captionsButton.getPreferredCaptions();if(preferredCaptions)captionsButton.setSelectedLanguage(preferredCaptions.language);else{var firstInList=captionsButton.captionsResp.captions[0];firstInList&&captionsButton.setSelectedLanguage(firstInList.language)}}})}},{key:"remove",value:function remove(){this.unbinds.map(function(e){"function"==typeof e?e():wlog.warn("trying to unbind a non-function",e)}),this.disable(),delete this.video.plugin.captions,delete this.video.plugin["captions-v1"],_get(_getPrototypeOf(CaptionsPlugin.prototype),"remove",this).call(this)}},{key:"turnOff",value:function turnOff(){this.video.controls.captionsButton.turnOff()}},{key:"show",value:function show(){this.video.setControlEnabled("captions",!0)}},{key:"hide",value:function(){}},{key:"setSubtitlesScale",value:function setSubtitlesScale(s){var _this4=this;this.video.whenControlMounted("captions").then(function(){_this4.video.controls.captions.setUserScale(s)})}},{key:"getSubtitlesScale",value:function getSubtitlesScale(){return this.video.controls.captions?this.video.controls.captions.getUserScale():1}},{key:"insertCaptions",value:function insertCaptions(lines){// for Customize to inject fake temporary captions
var c={english_name:"English",hash:{lines:lines},language:"_preview_",native_name:"English",right_to_left:!1},fakeResp={captions:[c],preferred_languages:[]};this.video.controls.captions.captionsResp=fakeResp,this.video.controls.captionsButton.captionsResp=fakeResp,this.video.controls.transcript.captionsResp=fakeResp,this.captions=[c],_vulcanV2Player_captionsHelper_js__WEBPACK_IMPORTED_MODULE_1__["captionsPromises"][this.video.hashedId()]=Promise.resolve(fakeResp)}},{key:"clearCache",value:function clearCache(){var _this5=this;this.captions=null,delete _vulcanV2Player_captionsHelper_js__WEBPACK_IMPORTED_MODULE_1__["captionsPromises"][this.video.hashedId()],this.fetched=Object(_vulcanV2Player_captionsHelper_js__WEBPACK_IMPORTED_MODULE_1__["fetchCaptions"])(this.video,this.options).then(function(captionsResp){_this5.captions=captionsResp.captions})}},{key:"setLanguage",value:function(){}}]),CaptionsPlugin}(wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].Plugin.Base);// Legacy support for usage like video.plugin['captions-v1'].turnOn(), etc.
wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].plugin("captions",function(video,options){return new CaptionsPlugin(video,options)}),wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].plugin("captions-v1",function(video,_options){return{turnOn:function turnOn(){video.plugin.captions.turnOn()},turnOff:function turnOff(){video.plugin.captions.turnOff()}}});

/***/ }),

/***/ 196:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "captionsPromises", function() { return captionsPromises; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchCaptions", function() { return fetchCaptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldShowNativeCaptions", function() { return shouldShowNativeCaptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCaptionsForLanguage", function() { return getCaptionsForLanguage; });
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/jsonp"),jsonp=_W$lib.jsonp,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/url"),urlProto=_W$lib2.proto,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/hosts"),eV1Protocol=_W$lib3.eV1Protocol,mediaDataHost=_W$lib3.mediaDataHost,cdnFastWistiaNetHost=_W$lib3.cdnFastWistiaNetHost,Promise=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("promiscuous");var captionsPromises={};var fetchCaptions=function fetchCaptions(video){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},hashedId=video.hashedId(),requestOptions=options.language?{language:options.language}:{};return captionsPromises[hashedId]?captionsPromises[hashedId]:captionsPromises[hashedId]=new Promise(function(resolve){var baseUrl;baseUrl=video._opts.useMediaDataHostLogic?"".concat(eV1Protocol(),"//").concat(mediaDataHost(video._opts)):"".concat(urlProto(),"//").concat(cdnFastWistiaNetHost()),jsonp("".concat(baseUrl,"/embed/captions/").concat(hashedId,".json"),requestOptions,function(resp){resolve(resp)})})};var shouldShowNativeCaptions=function shouldShowNativeCaptions(video){return video._inNativeMode()||video._impl.behaviors.fullscreen&&video._impl.behaviors.fullscreen.inNativeFullscreen()};var getCaptionsForLanguage=function getCaptionsForLanguage(lang,allCaptions){for(var captions,i=0;i<allCaptions.length;i++)if(captions=allCaptions[i],captions.language===lang)return captions;return null};

/***/ }),

/***/ 197:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(111);
/* harmony import */ var _CaptionsButton_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(198);
/* harmony import */ var _CaptionsMenu_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(199);
/* harmony import */ var player_lib_control_lifecycle_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(114);
/* harmony import */ var _captionsHelper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(196);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Promise=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("promiscuous"),_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/detect"),cachedDetect=_W$lib2.cachedDetect,detect=cachedDetect(),_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/translations"),getTranslation=_W$lib3.getTranslation,defineTranslations=_W$lib3.defineTranslations;defineTranslations("en-US",{CAPTIONS_HIDE_MENU:"Hide captions menu",CAPTIONS_OFF:"Off",CAPTIONS_SHOW_MENU:"Show captions menu"});var OFF="_off_",CaptionsButtonControl=/*#__PURE__*/function(_Control){function CaptionsButtonControl(video){var _this;return _classCallCheck(this,CaptionsButtonControl),_this=_super.call(this,video),_defineProperty(_assertThisInitialized(_this),"toggleTranscript",function(){_this.video.whenControlMounted("transcript").then(function(control){control._isVisible?control.close():control.open()})}),_this.video=video,_this.options=video.plugin.captions.options,_this.selectedLanguage=OFF,_this.unbinds=[],_this}_inherits(CaptionsButtonControl,_Control);var _super=_createSuper(CaptionsButtonControl);return _createClass(CaptionsButtonControl,[{key:"destroy",value:function destroy(){Object(player_lib_control_lifecycle_js__WEBPACK_IMPORTED_MODULE_4__["destroyControl"])(this)}},{key:"mountButton",value:function mountButton(buttonRoot){var _this2=this;this.buttonRoot=buttonRoot,this.renderButton(),this.options.onByDefault&&this.fetchCaptions().then(function(){if(!_this2._destroyed){var preferredCaptions=_this2.getPreferredCaptions();preferredCaptions&&_this2.setSelectedLanguage(preferredCaptions.language)}})}},{key:"mountDialog",value:function mountDialog(dialogRoot){var _this3=this;this.dialogRoot=dialogRoot;var codeLoaded=Promise.all([wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].asyncRequire("interFontFace.js"),this.fetchCaptions()]).then(function(){_this3.renderDialog()});return this.loading(new Promise(function(resolve){codeLoaded.then(resolve)})),codeLoaded}},{key:"renderButton",value:function renderButton(){this.video._inNativeMode()||!this.buttonRoot||(this.updateButtonLabel(),render(h(_CaptionsButton_jsx__WEBPACK_IMPORTED_MODULE_2__["default"],null),this.buttonRoot),this.reactMounts.button=[this.buttonRoot])}},{key:"controlDialogOpened",value:function controlDialogOpened(){this.updateButtonLabel()}},{key:"controlDialogClosed",value:function controlDialogClosed(){this.updateButtonLabel()}},{key:"updateButtonLabel",value:function updateButtonLabel(){this.dialog&&(this.dialog.isOpen()?this.setButtonLabel(this.translate("HIDE_MENU")):this.setButtonLabel(this.translate("SHOW_MENU")))}},{key:"renderDialog",value:function renderDialog(){this.captionsResp&&this.dialogRoot&&(render(h(_CaptionsMenu_jsx__WEBPACK_IMPORTED_MODULE_3__["default"],_extends({},this.props,{items:this.menuItems(),scale:this.props.scale,isPlaybarEnabled:this.video.isControlEnabled("playbar"),isTranscriptEnabled:this.isTranscriptEnabled(),toggleTranscript:this.toggleTranscript})),this.dialogRoot),this.reactMounts.menu=[this.dialogRoot])}},{key:"onControlPropsUpdated",value:function onControlPropsUpdated(prevProps){this.dialog&&this.dialog.isOpen()&&this.renderDialog(),prevProps.playerLanguage&&this.props.playerLanguage.code!==prevProps.playerLanguage.code&&this.updateButtonLabel()}},{key:"translate",value:function translate(key){return getTranslation(this.props.playerLanguage.code,"CAPTIONS_".concat(key))}},{key:"isTranscriptEnabled",value:function isTranscriptEnabled(){// dont enable transcript for mobile
return!1!==this.options.transcript}},{key:"menuItems",value:function menuItems(){var _this4=this;return[{text:this.translate("OFF"),isSelected:this.selectedLanguage===OFF,onClick:function onClick(){_this4.isTranscriptEnabled()&&_this4.video.whenControlMounted("transcript").then(function(control){return control.close()}),_this4.turnOff()}}].concat(this.captionsResp.captions.map(function(entry){return{text:entry.native_name,isSelected:_this4.selectedLanguage===entry.language,onClick:function onClick(){_this4.setSelectedLanguage(entry.language)}}}))}},{key:"getCaptions",value:function getCaptions(){return this.captionsResp&&this.captionsResp.captions?this.captionsResp.captions:[]}},{key:"getPreferredCaptions",value:function getPreferredCaptions(){for(var preferredLanguages=this.captionsResp.preferred_languages,i=0;i<preferredLanguages.length;i++){var preferredLanguage=preferredLanguages[i],captions=Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_5__["getCaptionsForLanguage"])(preferredLanguage,this.captionsResp.captions);if(captions)return captions}return null}},{key:"turnOff",value:function turnOff(){this.setSelectedLanguage(OFF)}},{key:"setSelectedLanguage",value:function setSelectedLanguage(lang){var prevLang=this.selectedLanguage;this.selectedLanguage=lang,this.renderDialog(),this.video.controls.captions.setLanguage(lang),this.logSelectionInStats(),prevLang!==lang&&this.video.trigger("captionschange",{visible:lang!==OFF,language:lang})}},{key:"logSelectionInStats",value:function logSelectionInStats(){// if we don't have a captionsResponse, we don't have any captions to report on.
// this can happen if someone tries to turn off legacy captions when they're not on
if(this.captionsResp){var caption=Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_5__["getCaptionsForLanguage"])(this.selectedLanguage,this.captionsResp.captions);caption&&"_preview_"!==caption.language?(this._lastStatsData={caption_key:caption.key,language:caption.language,time:this.video.time(),enabled:caption.language!==OFF},this.video._tracker.logCaptionSelection(this._lastStatsData)):this._lastStatsData&&(this._lastStatsData.enabled=!1,this._lastStatsData.time=this.video.time(),this.video._tracker.logCaptionSelection(this._lastStatsData))}}},{key:"fetchCaptions",value:function fetchCaptions(){var _this5=this;return this._destroyed?new Promise(function(){}):Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_5__["fetchCaptions"])(this.video,this.options).then(function(resp){return _this5.captionsResp=resp,resp})}},{key:"matchMenuToSelectedTextTrack",value:function matchMenuToSelectedTextTrack(){if(!detect.edge||this.video._inNativeMode()){var elem=this.video.getMediaElement(),previousSelection=this.selectedLanguage;this.selectedLanguage=OFF;for(var track,i=0;i<elem.textTracks.length;i++)track=elem.textTracks[i],"showing"===track.mode&&(this.selectedLanguage=track.language);this.renderDialog(),this.video.controls.captions.setLanguage(this.selectedLanguage,{track:!1}),previousSelection!==this.selectedLanguage&&this.logSelectionInStats()}}}]),CaptionsButtonControl}(_shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__["default"]);CaptionsButtonControl.handle="captionsButton",CaptionsButtonControl.type="control-bar-right",CaptionsButtonControl.sortValue=50,CaptionsButtonControl.shouldMount=function(video){return video.plugin.captions},wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].defineControl(CaptionsButtonControl);

/***/ }),

/***/ 198:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _shared_ui_components_svg_boilerplate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(113);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component;var CaptionsButton=/*#__PURE__*/function(_Component){function CaptionsButton(){return _classCallCheck(this,CaptionsButton),_super.apply(this,arguments)}_inherits(CaptionsButton,_Component);var _super=_createSuper(CaptionsButton);return _createClass(CaptionsButton,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!1}},{key:"render",value:function render(){var sharedPathAttrs={fill:"none",stroke:"#ffffff","stroke-linecap":"round","stroke-miterlimit":10};return h("svg",Object(_shared_ui_components_svg_boilerplate_js__WEBPACK_IMPORTED_MODULE_1__["standardSvgAttrs"])(40,34),h("g",null,h("path",_extends({},sharedPathAttrs,{"stroke-width":"1.8",d:"M18.4,18.7c-0.5,0.7-1.1,1.2-2.1,1.2c-1.3,0-2.4-1.1-2.4-2.8c0-1.6,1-2.8,2.4-2.8c1,0,1.6,0.5,2,1.2"}))),h("g",null,h("path",_extends({},sharedPathAttrs,{"stroke-width":"1.8",d:"M25.8,18.7c-0.5,0.7-1.1,1.2-2.1,1.2c-1.3,0-2.4-1.1-2.4-2.8c0-1.6,1-2.8,2.4-2.8c1,0,1.6,0.5,2,1.2"}))),h("g",null,h("path",_extends({},sharedPathAttrs,{"stroke-width":"2",d:"M31,21.9c0,1.6-1.4,3-3,3H12c-1.6,0-3-1.4-3-3V12c0-1.6,1.4-3,3-3h16c1.6,0,3,1.4,3,3V21.9z"}))))}}]),CaptionsButton}(Component);/* harmony default export */ __webpack_exports__["default"] = (CaptionsButton);

/***/ }),

/***/ 199:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _shared_ui_components_svg_boilerplate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(113);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);
/* harmony import */ var _shared_ui_components_CustomEventsWrapper_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(200);
/* harmony import */ var _shared_ui_components_VisuallyHiddenElem_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(201);
function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__["default"].lib("player/translations"),getTranslation=_W$lib2.getTranslation,defineTranslations=_W$lib2.defineTranslations,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__["default"].lib("player/lib/interFontFamily"),interFontFamily=_W$lib3.interFontFamily,_W$lib4=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__["default"].lib("utilities/isMouseDown"),isMouseDown=_W$lib4.isMouseDown,_W$lib5=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_1__["default"].lib("utilities/seqid"),seqId=_W$lib5.seqId;defineTranslations("en-US",{CAPTIONS_READ_TRANSCRIPT:"Search Video"});var CaptionsMenu=/*#__PURE__*/function(_Component){function CaptionsMenu(){return _classCallCheck(this,CaptionsMenu),_super.apply(this,arguments)}_inherits(CaptionsMenu,_Component);var _super=_createSuper(CaptionsMenu);return _createClass(CaptionsMenu,[{key:"render",value:function render(){var _this=this,_this$props=this.props,isTranscriptEnabled=_this$props.isTranscriptEnabled,isPlaybarEnabled=_this$props.isPlaybarEnabled;return h("div",{class:"w-captions-menu w-css-reset w-css-reset-tree"},isTranscriptEnabled&&isPlaybarEnabled&&h(TranscriptItem,this.props),h("fieldset",{style:{border:0,padding:0,margin:0}},h(_shared_ui_components_VisuallyHiddenElem_jsx__WEBPACK_IMPORTED_MODULE_3__["default"],{tagName:"legend"},"Captions Menu"),this.props.items.map(function(item,index){return h(CaptionsItem,_extends({},_this.props,{item:item,index:index}))})))}}]),CaptionsMenu}(Component),TranscriptItem=/*#__PURE__*/function(_Component2){function TranscriptItem(){var _this2;_classCallCheck(this,TranscriptItem);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this2=_super2.call.apply(_super2,[this].concat(args)),_defineProperty(_assertThisInitialized(_this2),"onFocus",function(){isMouseDown()||_this2.setState({isKeyboardFocused:!0})}),_defineProperty(_assertThisInitialized(_this2),"onBlur",function(){_this2.state.isKeyboardFocused&&_this2.setState({isKeyboardFocused:!1})}),_defineProperty(_assertThisInitialized(_this2),"onMouseEnter",function(){_this2.setState({isHovering:!0})}),_defineProperty(_assertThisInitialized(_this2),"onMouseLeave",function(){_this2.setState({isHovering:!1})}),_this2}_inherits(TranscriptItem,_Component2);var _super2=_createSuper(TranscriptItem);return _createClass(TranscriptItem,[{key:"render",value:function render(){return h(_shared_ui_components_CustomEventsWrapper_jsx__WEBPACK_IMPORTED_MODULE_2__["default"],{class:"w-css-reset-button-important w-vulcan-v2-button",tagName:"button",onClick:this.props.toggleTranscript,onfocusin:this.onFocus,onfocusout:this.onBlur,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:this.menuItemStyle()},h("svg",_extends({},Object(_shared_ui_components_svg_boilerplate_js__WEBPACK_IMPORTED_MODULE_0__["standardSvgAttrs"])(40,34),{class:"w-checkmark",style:this.transcriptStyle()}),h("g",{fill:"none",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10"},h("line",{x1:"17",x2:"27",y1:"12",y2:"12"}),h("line",{x1:"17",x2:"30",y1:"17",y2:"17"}),h("line",{x1:"17",x2:"25",y1:"22",y2:"22"}))),this.translate("READ_TRANSCRIPT"))}},{key:"transcriptStyle",value:function transcriptStyle(){return{height:lineHeightPx(this),verticalAlign:"middle",visibility:"visible",width:checkWidthPx(this)}}},{key:"menuItemStyle",value:function menuItemStyle(){return{background:this.state.isHovering?"rgba(0,0,0,.3)":"",boxShadow:this.state.isKeyboardFocused?"0 0 0 2px #fff inset":"none",cursor:"pointer",display:"block",fontFamily:interFontFamily,fontSize:fontSize(this),lineHeight:lineHeightPx(this),marginRight:"".concat(10*this.props.scale,"px"),textAlign:"left",width:"100%"}}},{key:"translate",value:function translate(key){return getTranslation(this.props.playerLanguage.code,"CAPTIONS_".concat(key))}}]),TranscriptItem}(Component),CaptionsItem=/*#__PURE__*/function(_Component3){function CaptionsItem(){var _this3;_classCallCheck(this,CaptionsItem);for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _this3=_super3.call.apply(_super3,[this].concat(args)),_defineProperty(_assertThisInitialized(_this3),"onBlur",function(){}),_defineProperty(_assertThisInitialized(_this3),"onClick",function(){_this3.props.item.onClick()}),_defineProperty(_assertThisInitialized(_this3),"onFocus",function(){isMouseDown()||_this3.setState({isKeyboardFocused:!0})}),_defineProperty(_assertThisInitialized(_this3),"onMouseEnter",function(){_this3.setState({isHovering:!0})}),_defineProperty(_assertThisInitialized(_this3),"onMouseLeave",function(){_this3.setState({isHovering:!1})}),_this3}_inherits(CaptionsItem,_Component3);var _super3=_createSuper(CaptionsItem);return _createClass(CaptionsItem,[{key:"render",value:function render(){var item=this.props.item,itemId=seqId("w-captions-".concat(item.text,"-"));return h("div",{style:this.menuItemStyle(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},h(_shared_ui_components_VisuallyHiddenElem_jsx__WEBPACK_IMPORTED_MODULE_3__["default"],{checked:!!item.isSelected,id:itemId,name:"Captions Menu",onFocus:this.onFocus,onClick:this.onClick,onBlur:this.onBlur,tagName:"input",type:"radio",value:item.text}),h("label",{class:"w-css-reset",for:itemId},h("svg",_extends({},Object(_shared_ui_components_svg_boilerplate_js__WEBPACK_IMPORTED_MODULE_0__["standardSvgAttrs"])(40,34),{class:"w-checkmark",style:this.checkStyle()}),h("polyline",{fill:"none",stroke:"#ffffff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10",points:"17,17 20,20 25,14 "})),item.text))}},{key:"checkStyle",value:function checkStyle(){return{height:lineHeightPx(this),verticalAlign:"middle",visibility:this.props.item.isSelected?"visible":"hidden",width:checkWidthPx(this)}}},{key:"menuItemStyle",value:function menuItemStyle(){return{background:this.state.isHovering?"rgba(0,0,0,.3)":"",boxShadow:this.state.isKeyboardFocused?"0 0 0 2px #fff inset":"none",display:"block",fontFamily:interFontFamily,fontSize:fontSize(this),lineHeight:lineHeightPx(this),marginRight:"".concat(10*this.props.scale,"px"),textAlign:"left",width:"100%"}}}]),CaptionsItem}(Component),checkWidth=function checkWidth(component){return 40*component.props.scale},checkWidthPx=function checkWidthPx(component){return"".concat(checkWidth(component),"px")},lineHeight=function lineHeight(component){return 34*component.props.scale},lineHeightPx=function(){},fontSize=function fontSize(component){return 14*component.props.scale};/* harmony default export */ __webpack_exports__["default"] = (CaptionsMenu);

/***/ }),

/***/ 20:
/***/ (function(){}),

/***/ 200:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _TouchEvents_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(172);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/detect"),cachedDetect=_W$lib2.cachedDetect,detect=cachedDetect();var CustomEventsWrapper=/*#__PURE__*/function(_Component){function(){}_inherits(CustomEventsWrapper,_Component);var _super=_createSuper(CustomEventsWrapper);return _createClass(CustomEventsWrapper,[{key:"render",value:function render(){var TagName=this.props.tagName||"div";return h(TagName,_extends({},this.props,{ref:this.props.elemRef}),this.props.children)}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.base!==this._savedBase&&(this._savedBase=this.base,this.destroyBindings(),this.setupBindings())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.destroyBindings()}},{key:"setupBindings",value:function setupBindings(){if(this.unbinds=[],detect.touchScreen){var touchEvents=this.touchEvents=new _TouchEvents_js__WEBPACK_IMPORTED_MODULE_1__["default"](this.base);touchEvents.on("swipe",this.onSwipe),touchEvents.on("pinch",this.onPinch),touchEvents.on("longpress",this.onLongPress),touchEvents.on("touchmove",this.onCustomTouchMove)}}},{key:"destroyBindings",value:function destroyBindings(){this.touchEvents&&(this.touchEvents.destroy(),this.touchEvents=null),this.unbinds&&(this.unbinds.map(function(unbind){return unbind()}),this.unbinds=null)}}]),CustomEventsWrapper}(Component);/* harmony default export */ __webpack_exports__["default"] = (CustomEventsWrapper);

/***/ }),

/***/ 201:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _extends(){return _extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i],source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,VisuallyHiddenElem=/*#__PURE__*/function(_Component){function VisuallyHiddenElem(){return _classCallCheck(this,VisuallyHiddenElem),_super.apply(this,arguments)}_inherits(VisuallyHiddenElem,_Component);var _super=_createSuper(VisuallyHiddenElem);return _createClass(VisuallyHiddenElem,[{key:"render",value:function render(){var TagName=this.props.tagName||"div";return h(TagName,_extends({},this.props,{ref:this.props.elemRef,style:this.visuallyHiddenStyles()}),this.props.children)}},{key:"visuallyHiddenStyles",value:function(){}}]),VisuallyHiddenElem}(Component);/* harmony default export */ __webpack_exports__["default"] = (VisuallyHiddenElem);

/***/ }),

/***/ 202:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(111);
/* harmony import */ var _Captions_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(203);
/* harmony import */ var player_lib_control_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(114);
/* harmony import */ var _captionsHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(196);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function(){}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/fit-control"),controlMultiplierBasedOnVideo=_W$lib.controlMultiplierBasedOnVideo,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/hosts"),cdnFastWistiaNetHost=_W$lib2.cdnFastWistiaNetHost,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/url"),urlProto=_W$lib3.proto,_W$lib4=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/seqid"),seqId=_W$lib4.seqId,_W$lib5=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib5.h,render=_W$lib5.render,Promise=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("promiscuous"),_W$lib6=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/elem"),elemBind=_W$lib6.elemBind,elemRemove=_W$lib6.elemRemove,addInlineCss=_W$lib6.addInlineCss,_W$lib7=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/detect"),cachedDetect=_W$lib7.cachedDetect,detect=cachedDetect();var OFF="_off_",CaptionsControl=/*#__PURE__*/function(_Control){function CaptionsControl(video){var _this;return _classCallCheck(this,CaptionsControl),_this=_super.call(this,video),_defineProperty(_assertThisInitialized(_this),"onClick",function(){_this.video.whenControlMounted("transcript").then(function(control){return control.open()})}),_defineProperty(_assertThisInitialized(_this),"setActiveLineForTime",function(t){if(_this.captions&&_this.captions.language!==OFF)for(var line,lines=_this.captions.hash.lines,i=0;i<lines.length;i++)if(line=lines[i],line.start<=t&&t<line.end)return _this.setActiveLine(line.text,_this.captions.right_to_left),void _this.renderCaptions();_this.setNoActiveLine(),_this.renderCaptions()}),_this.options=video.plugin.captions.options,_this._wistiaCaptionsId=seqId("wistia_","_captions"),_this._userScale=_this.options.subtitlesScale||1,_this.unbinds=[video.on("timechange",_this.setActiveLineForTime),video.on("enter-fullscreen",function(){_this.hideOrShowNativeCaptions()}),video.on("cancel-fullscreen",function(){_this.hideOrShowNativeCaptions()}),video.on("beforereplace",function(){_this.removeTextTracks()})],_this}_inherits(CaptionsControl,_Control);var _super=_createSuper(CaptionsControl);return _createClass(CaptionsControl,[{key:"destroy",value:function destroy(){elemRemove(this.clippedCueStyle),this.clippedCueStyle=null,this.removeTextTracks(),Object(player_lib_control_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__["destroyControl"])(this)}},{key:"mount",value:function mount(rootElem){var _this2=this;this.rootElem=rootElem,this.fetchCaptions().then(function(){_this2._destroyed||(_this2.setupTextTracks(),_this2.setActiveLineForTime(_this2.video.time()),_this2.renderCaptions())})}},{key:"fetchCaptions",value:function fetchCaptions(){var _this3=this;return this._destroyed?new Promise(function(){}):Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_4__["fetchCaptions"])(this.video,this.options).then(function(resp){return _this3.captionsResp=resp,resp})}},{key:"setupTextTracks",value:function setupTextTracks(){var _this4=this;if(this._setupTextTracksPromise)return this._setupTextTracksPromise;if((detect.edge||detect.trident)&&!this.video._inNativeMode())// Some versions/hardware/drivers on OSX with Safari have issues with the
// presence of <track> elements--the video will throw a MEDIA_DECODE_ERR
// if they're there for unknown reasons. It's a bummer to disable this
// because it hurts accessibility, but the video sure as heck isn't going
// to be accessible if it can't play back, and they'll still hopefully be
// able to view captions via our custom implementation--though we may
// need to add extra markup to make that visible to screen readers.
//
// For Edge, Microsoft is not supporting the ability to target the
// ::cue pseudo-element we use to hide tracks.
// https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12079271/
// se we're not going to add the tracks at all
return this._setupTextTracksPromise=new Promise(function(){});var video=this.video;return this._setupTextTracksPromise=new Promise(function(resolve){_this4.fetchCaptions();var doSetup=function doSetup(){_this4.fetchCaptions().then(function(resp){_this4.removeTextTracks(),video.whenVideoElementInDom().then(function(elem){_this4._destroyed||(resp.captions.map(function(entry){if("_preview_"!==entry.language){var track=document.createElement("track");track.kind=entry.kind||"captions",track.label=entry.native_name,track.srclang=entry.language,track.src="".concat(urlProto(),"//").concat(cdnFastWistiaNetHost(),"/embed/captions/").concat(video.hashedId(),".vtt?language=").concat(entry.language),track._wistiaCaptionsId=_this4._wistiaCaptionsId,elem.appendChild(track)}}),_this4.hideOrShowNativeCaptions(),_this4.unbinds.push(elemBind(elem.textTracks,"change",function(){Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_4__["shouldShowNativeCaptions"])(video)&&video.controls.captionsButton&&video.controls.captionsButton.matchMenuToSelectedTextTrack()})),resolve())})})};"beforeplay"===video.state()&&(detect.safari||detect.ios.version)?video.bind("play",function(){}):doSetup()})}// This method removes the text tracks that it, itself, has added. It's
// important that it targets only the ones it has added because, in a
// playlist setting, it is possible for two impls to target the same
// <video> element, and while it's transitioning, tracks for both impls
// would be present. When the old impl is destroyed, then, it'll remove the
// text tracks that it is responsible for, and all will be right with the
// world.
},{key:"removeTextTracks",value:function removeTextTracks(){var video=this.video,wistiaCaptionsId=this._wistiaCaptionsId;video.whenVideoElementInDom().then(function(elem){for(var child,videoChildren=Array.prototype.slice.call(elem.childNodes),i=0;i<videoChildren.length;i++)child=videoChildren[i],/^track$/i.test(child.tagName)&&child._wistiaCaptionsId===wistiaCaptionsId&&elemRemove(child)})}},{key:"renderCaptions",value:function renderCaptions(){this.video._inNativeMode()||(this.activeLine&&!this._captionsHidden?render(h(_Captions_jsx__WEBPACK_IMPORTED_MODULE_2__["default"],_extends({},this.props,this.activeLine,{scale:this.scale(),onClick:this.onClick,isInFullscreen:this.video.inFullscreen(),isPlaybarEnabled:this.video.isControlEnabled("playbar"),isTranscriptEnabled:this.isTranscriptEnabled()})),this.rootElem):render(h("nothing",null),this.rootElem),this.reactMounts.captions=[this.rootElem])}},{key:"isTranscriptEnabled",value:function(){}},{key:"onControlPropsUpdated",value:function onControlPropsUpdated(prevProps){(prevProps.videoWidth!==this.props.videoWidth||prevProps.controlsAreVisible!==this.props.controlsAreVisible||prevProps.controlBarHeight!==this.props.controlBarHeight)&&this.renderCaptions()}},{key:"setActiveLine",value:function setActiveLine(text){var rtl=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.activeLine={text:text,rtl:rtl}}},{key:"setNoActiveLine",value:function setNoActiveLine(){this.activeLine=null}},{key:"setLanguage",value:function setLanguage(lang){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},captions=Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_4__["getCaptionsForLanguage"])(lang,this.captionsResp.captions);// make sure we have a captions resp on hand before trying to pass captions
this.captions=captions,this.setActiveLineForTime(this.video.time()),this.renderCaptions(),!1!==options.track&&this.showCorrespondingTrack(captions)}// passing null arg disables all tracks
},{key:"showCorrespondingTrack",value:function showCorrespondingTrack(captions){var _this5=this;(detect.edge||detect.trident)&&!this.video._inNativeMode()||this.setupTextTracks().then(function(){for(var track,video=_this5.video,elem=video.getMediaElement(),i=0;i<elem.textTracks.length;i++)track=elem.textTracks[i],"captions"===track.kind&&(captions&&track.language===captions.language?track.mode="showing":track.mode="disabled")})}},{key:"hideOrShowNativeCaptions",value:function hideOrShowNativeCaptions(){Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_4__["shouldShowNativeCaptions"])(this.video)?this.allowShowingNativeCaptions():this.disallowShowingNativeCaptions()}},{key:"allowShowingNativeCaptions",value:function allowShowingNativeCaptions(){this.clippedCueStyle&&(elemRemove(this.clippedCueStyle),this.clippedCueStyle=null),this.hideCustomCaptions()}},{key:"disallowShowingNativeCaptions",value:function disallowShowingNativeCaptions(){return this.clippedCueStyle?this.clippedCueStyle:void(this.clippedCueStyle=addInlineCss(document.head,"\n      #".concat(this.video.chrome.id," ::cue {\n        visibility: hidden;\n      }\n      #").concat(this.video.chrome.id," ::-webkit-media-text-track-container {\n        visibility: hidden;\n      }\n      #").concat(this.video.chrome.id," ::-webkit-media-text-track-background {\n        visibility: hidden;\n      }\n      #").concat(this.video.chrome.id," ::-webkit-media-text-track-display {\n        visibility: hidden;\n      }\n    ")),this.showCustomCaptions())}},{key:"hideCustomCaptions",value:function hideCustomCaptions(){this._captionsHidden=!0,this.renderCaptions()}},{key:"showCustomCaptions",value:function(){}},{key:"setUserScale",value:function(){}},{key:"getUserScale",value:function getUserScale(){return this._userScale}},{key:"scale",value:function scale(){return this._userScale*Math.min(2,Math.max(.6,controlMultiplierBasedOnVideo(this.video,[640,850])))}}]),CaptionsControl}(_shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__["default"]);CaptionsControl.handle="captions",CaptionsControl.type="above-control-bar",CaptionsControl.shouldMount=function(video){return video.plugin.captions},wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].defineControl(CaptionsControl);

/***/ }),

/***/ 203:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
function(){}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function(){}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function(){}function(){}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function(){}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function(){}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/translations"),getTranslation=_W$lib2.getTranslation,Captions=/*#__PURE__*/function(_Component){function Captions(props){var _this;return _classCallCheck(this,Captions),_this=_super.call(this,props),_defineProperty(_assertThisInitialized(_this),"onMouseEnter",function(){_this.setState({isHovering:!0})}),_defineProperty(_assertThisInitialized(_this),"onMouseLeave",function(){_this.setState({isHovering:!1})}),_defineProperty(_assertThisInitialized(_this),"onFocus",function(){_this.setState({isKeyboardFocused:!0})}),_defineProperty(_assertThisInitialized(_this),"onBlur",function(){_this.setState({isKeyboardFocused:!1})}),_defineProperty(_assertThisInitialized(_this),"onMouseDown",function(e){e.preventDefault()}),_this.state={isHovering:!1,isKeyboardFocused:!1},_this}_inherits(Captions,_Component);var _super=_createSuper(Captions);return _createClass(Captions,[{key:"render",value:function render(){var textLines,_this2=this,DivOrButton=this.props.isTranscriptEnabled&&this.props.isPlaybarEnabled?"button":"div";return this.state.isKeyboardFocused?textLines=this.renderAccessibleHelper():this.props.text&&(textLines=this.props.text.map(function(line,index){return _this2.renderLine(line,index)})),h("div",{class:"w-captions w-css-reset w-css-reset-tree w-vulcan-v2-button",style:this.rootContainerStyle()},h(DivOrButton,{class:"w-vulcan-v2-button",style:this.groupStyle(),onMouseEnter:this.onMouseEnter,onBlur:this.onBlur,onClick:this.props.onClick,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,onFocus:this.onFocus,tabIndex:0},textLines))}},{key:"renderAccessibleHelper",value:function renderAccessibleHelper(){return h("p",{class:"w-captions-line",style:this.lineStyle()},h("div",{style:{display:"inline-block",transition:"all 200ms ease"}},h("span",{style:this.spanStyle()},this.translate("READ_TRANSCRIPT"))))}},{key:"renderLine",value:function renderLine(line,index){var opts={isFirst:0===index,isLast:index===this.props.text.length-1},dir=this.props.rtl?"rtl":"ltr";// the empty divs here are for smooth hover animations
return h("p",{class:"w-captions-line",style:this.lineStyle()},h("div",{style:{display:"inline-block",transition:"all 200ms ease",verticalAlign:"bottom"},class:"w-css-reset"},opts.isFirst&&!this.props.isInFullscreen&&h("div",{style:{position:"relative",padding:"3px"}},h("div",{style:this.discoveryStyles()},h("svg",{class:"arrow-icon",viewBox:"0 0 100 100",height:"".concat(10*this.props.scale,"px"),width:"".concat(10*this.props.scale,"px")},h("g",{stroke:"#ccc",fill:"none","stroke-linecap":"round"},h("polyline",{"stroke-width":"15",points:"25,15 85,15 85,75"}),h("line",{"stroke-width":"15",x1:"25",x2:"85",y1:"75",y2:"15"}))))),opts.isFirst&&!this.props.isInFullscreen&&h("div",{style:{position:"relative"}},h("div",{style:this.topAnimateStyle()})),h("span",{dir:dir,style:this.spanStyle(opts),dangerouslySetInnerHTML:{__html:line}}),opts.isLast&&!this.props.isInFullscreen&&h("div",{style:{position:"relative"}},h("div",{style:this.bottomAnimateStyle()}))))}},{key:"canOpenICAndIsHoveringPlayer",value:function canOpenICAndIsHoveringPlayer(){var _this$props=this.props,isTranscriptEnabled=_this$props.isTranscriptEnabled,isPlaybarEnabled=_this$props.isPlaybarEnabled,isHoveringOnPlayer=_this$props.isHoveringOnPlayer,isInFullscreen=_this$props.isInFullscreen;return isTranscriptEnabled&&isPlaybarEnabled&&isHoveringOnPlayer&&!isInFullscreen}},{key:"discoveryStyles",value:function discoveryStyles(){var canOpenIC=this.canOpenICAndIsHoveringPlayer();return{position:"absolute",padding:"3px",fontSize:"15px",right:"1%",top:"100%",opacity:canOpenIC?"1":"0",transition:"opacity 200ms ease",transitionDelay:canOpenIC?"150ms":"0ms"}}},{key:"animateHelper",value:function animateHelper(){var canOpenIC=this.canOpenICAndIsHoveringPlayer(),isHoverSrt=this.state.isHovering;return{position:"absolute",height:canOpenIC?"3px":"0",width:"100%",transition:"all 200ms ease",transitionProperty:"height",transitionDelay:canOpenIC?"150ms":"none",background:isHoverSrt?"rgba(0,0,0,1)":"rgba(0,0,0,.55)"}}},{key:"topAnimateStyle",value:function topAnimateStyle(){return _objectSpread({},this.animateHelper(),{bottom:0})}},{key:"bottomAnimateStyle",value:function bottomAnimateStyle(){return _objectSpread({},this.animateHelper())}},{key:"rootContainerStyle",value:function rootContainerStyle(){var props=this.props,gapSize=18*props.scale,bottomOffset=props.controlsAreVisible?0:-props.controlBarHeight;return{bottom:"".concat(bottomOffset+gapSize,"px"),left:0,pointerEvents:"none",position:"absolute",textAlign:"center",width:"100%",transition:"all 100ms ease"}}},{key:"groupStyle",value:function groupStyle(){var isTranscriptEnabled=this.props.isTranscriptEnabled;return{pointerEvents:isTranscriptEnabled?"auto":"none",display:"inline-block",position:"relative",margin:"auto",maxWidth:"80%",outline:"none",border:this.state.isKeyboardFocused?"2px #fff solid":"none",cursor:"pointer"}}},{key:"lineStyle",value:function(){}},{key:"spanStyle",value:function spanStyle(){var scale=this.props.scale,canOpenIC=this.canOpenICAndIsHoveringPlayer(),isHoverSrt=this.state.isHovering;return{background:isHoverSrt?"rgba(0,0,0, 1)":"rgba(0,0,0,.55)",color:"#fff",display:"block",fontFamily:"Helvetica, Arial, Sans-Serif",fontSize:"".concat(18*scale,"px"),lineHeight:"1em",overflow:"hidden",padding:canOpenIC?".25em 1em":".25em .6em",textOverflow:"ellipsis",webkitFontSmoothing:"antialiased",transition:"all 100ms ease",transitionDelay:canOpenIC?"150ms":"none",transitionProperty:"padding",width:"100%"}}},{key:"translate",value:function translate(key){return getTranslation(this.props.playerLanguage,"CAPTIONS_".concat(key))}}]),Captions}(Component);/* harmony default export */ __webpack_exports__["default"] = (Captions);

/***/ }),

/***/ 204:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(111);
/* harmony import */ var _Transcript_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(205);
/* harmony import */ var _captionsHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(196);
/* harmony import */ var player_lib_control_lifecycle_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(114);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Promise=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("promiscuous"),_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/elem"),elemAppend=_W$lib2.elemAppend,elemFromObject=_W$lib2.elemFromObject,elemStyle=_W$lib2.elemStyle,elemAnimate=_W$lib2.elemAnimate,TranscriptControl=/*#__PURE__*/function(_Control){function TranscriptControl(video){var _this;return _classCallCheck(this,TranscriptControl),_this=_super.call(this,video),_defineProperty(_assertThisInitialized(_this),"close",function(){_this._isVisible=!1,_this.animateOut().then(function(){_this.video.controls.captions.showCustomCaptions(),render(h("nothing",null),_this.rootElem),_this.reactMounts=[_this.rootElem]})}),_defineProperty(_assertThisInitialized(_this),"seekTranscript",function(time){_this.video.time(time)}),_defineProperty(_assertThisInitialized(_this),"metricsVideoCount",function(eventName){wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].Metrics.videoCount(_this.video._impl,"player/".concat(eventName))}),_this.video=video,_this.options=video.plugin.captions.options,_this._isVisible=!1,_this._turnstileClosed=!1,_this.unbinds=[],_this.unbinds.push(_this.video.on("captionschange",function(options){_this.setSelectedLanguage(options)}),_this.video.on("timechange",function(){}),_this.video.on("turnstileclose",function(){})),_this}_inherits(TranscriptControl,_Control);var _super=_createSuper(TranscriptControl);return _createClass(TranscriptControl,[{key:"destroy",value:function(){}},{key:"mount",value:function mount(rootElem){var _this2=this;this.fetchCaptions().then(function(){var style={position:"absolute"},container=elemFromObject({style:style,class:"w-css-reset"});elemAppend(rootElem,container),_this2.rootElem=container})}},{key:"open",value:function open(){"beforeplay"===this.video.state()&&this.video.setControlEnabled("bigPlayButton",!1),this.video.controls.captions.hideCustomCaptions(),this._isVisible=!0,this.renderTranscript(),this.animateIn()}},{key:"onControlPropsUpdated",value:function onControlPropsUpdated(prevProps){var _this3=this;this._isVisible&&(this.props.controlsAreVisible!==prevProps.controlsAreVisible&&this.fetchCaptions().then(function(){_this3.renderTranscript()}),this.props.videoWidth!==prevProps.videoWidth&&this.fetchCaptions().then(function(){_this3.renderTranscript()}),this.props.videoHeight!==prevProps.videoHeight&&this.fetchCaptions().then(function(){_this3.renderTranscript()}))}},{key:"fetchCaptions",value:function fetchCaptions(){var _this4=this;return Object(_captionsHelper_js__WEBPACK_IMPORTED_MODULE_3__["fetchCaptions"])(this.video,this.options).then(function(resp){return _this4.captionsResp=resp,resp})}},{key:"setSelectedLanguage",value:function setSelectedLanguage(options){this.selectedLanguage=options.language,this.rootElem&&this._isVisible&&("_off_"===options.language?this.close():this.renderTranscript())}},{key:"renderTranscript",value:function renderTranscript(){var _this5=this;// safari keeps the captions coming back
return this.video.controls.captions.hideCustomCaptions(),new Promise(function(resolve){wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].asyncRequire(["interFontFace.js"]).then(function(){render(h(_Transcript_jsx__WEBPACK_IMPORTED_MODULE_2__["default"],{closeTranscript:_this5.close,controlBarHeight:_this5.props.controlBarHeight,controlsAreVisible:_this5.props.controlsAreVisible,preferredLanguage:_this5.captionsResp.preferred_languages[0],playerLanguage:_this5.video.playerLanguage(),scale:_this5.props.scale,seekTranscript:_this5.seekTranscript,selectedLanguage:_this5.selectedLanguage||_this5.captionsResp.preferred_languages[0],srtCaptions:_this5.captionsResp.captions,metricsVideoCount:_this5.metricsVideoCount,turnstileClosed:_this5._turnstileClosed,turnstileEmail:_this5.video.email(),turnstilePlugin:_this5.video.plugin["requireEmail-v1"],videoDuration:_this5.video.duration(),videoHeight:_this5.video.videoHeight(),videoTime:_this5.video.time(),videoWidth:_this5.video.videoWidth()}),_this5.rootElem),_this5.reactMounts=[_this5.rootElem],resolve()})})}// animation helpers
},{key:"animateIn",value:function animateIn(){var _this6=this;return new Promise(function(resolve){elemStyle(_this6.rootElem,{opacity:0,height:"100%",width:"100%"}),setTimeout(function(){elemAnimate(_this6.rootElem,{opacity:1},{time:200,callback:resolve})},0)})}},{key:"animateOut",value:function animateOut(){var _this7=this;return new Promise(function(resolve){elemStyle(_this7.rootElem,{opacity:1}),setTimeout(function(){elemAnimate(_this7.rootElem,{opacity:0},{time:200,callback:function callback(){elemStyle(_this7.rootElem,{height:0,width:0}),resolve()}})},0)})}}]),TranscriptControl}(_shared_controls_Control_js__WEBPACK_IMPORTED_MODULE_1__["default"]);TranscriptControl.handle="transcript",TranscriptControl.type="above-control-bar",TranscriptControl.sortValue=600,TranscriptControl.shouldMount=function(video){var disabledViaEmbed=video.embedOptions().plugin&&video.embedOptions().plugin["captions-v1"]&&!1===video.embedOptions().plugin["captions-v1"].transcript;if(disabledViaEmbed)return!1;var enabledViaCaptionsOptions=video.plugin.captions&&video.plugin.captions.options;return enabledViaCaptionsOptions&&!disabledViaEmbed},wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].defineControl(TranscriptControl);/* harmony default export */ __webpack_exports__["default"] = (TranscriptControl);

/***/ }),

/***/ 205:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _TranscriptText_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(206);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/interFontFamily"),interFontFamily=_W$lib2.interFontFamily,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/isMouseDown"),isMouseDown=_W$lib3.isMouseDown,DOWN_ARROW_KEY=40,ESC_KEY=27,ENTER_KEY=13,BASE_ELEM_SIZING=20,BASE_CONTROL_BAR_HEIGHT=34,Transcript=/*#__PURE__*/function(_Component){function Transcript(props){var _this;return _classCallCheck(this,Transcript),_this=_super.call(this,props),_defineProperty(_assertThisInitialized(_this),"setRefs",function(allRefs){_this.sectionRefs=allRefs}),_defineProperty(_assertThisInitialized(_this),"resetFirstHitIndex",function(){}),_defineProperty(_assertThisInitialized(_this),"setCloseFocus",function(){isMouseDown()||_this.setState({closeFocus:!0})}),_defineProperty(_assertThisInitialized(_this),"setCloseBlur",function(){_this.setState({closeFocus:!1})}),_defineProperty(_assertThisInitialized(_this),"updateSearchValue",function(e){_this.setState({searchKey:e.target.value})}),_defineProperty(_assertThisInitialized(_this),"inputKeyDown",function(e){var _this$state=_this.state,hitCounter=_this$state.hitCounter,activeSearchHitIndex=_this$state.activeSearchHitIndex,hitAndMissIndices=_this$state.hitAndMissIndices,searchKey=_this$state.searchKey,searchFrom=e.which===DOWN_ARROW_KEY?0:activeSearchHitIndex+1,nextSearchHit=hitAndMissIndices.indexOf(!0,searchFrom),firstHit=hitAndMissIndices.indexOf(!0);firstHit=-1===firstHit?0:firstHit;var index,updatedHitCounter=hitCounter;// down arrow highlights _and_ focuses the first hit
// enter key just highlights the next item
switch(-1===nextSearchHit?(index=firstHit,updatedHitCounter=searchKey?1:0):(index=nextSearchHit,updatedHitCounter++),e.which){case DOWN_ARROW_KEY:_this.setState({activeSearchHitIndex:index,hitCounter:searchKey?1:0}),setTimeout(function(){},20);break;case ENTER_KEY:_this.setState({activeSearchHitIndex:index,hitCounter:updatedHitCounter});break;default:return;}}),_defineProperty(_assertThisInitialized(_this),"inputOnFocus",function(){_this.setState({inputHasFocus:!0})}),_defineProperty(_assertThisInitialized(_this),"inputOnBlur",function(){_this.setState({inputHasFocus:!1})}),_defineProperty(_assertThisInitialized(_this),"focusInput",function(){}),_defineProperty(_assertThisInitialized(_this),"updateHitCounter",function(increment){var hitCounter=_this.state.hitCounter,updatedHitCounter=increment?hitCounter+1:hitCounter-1;_this.state.searchKey&&_this.setState({hitCounter:updatedHitCounter})}),_defineProperty(_assertThisInitialized(_this),"onMouseMove",function(){!1===_this.state.recentlyMoused&&_this.setState({recentlyMoused:!0}),_this.isMousingTimeout&&clearTimeout(_this.isMousingTimeout),_this.isMousingTimeout=setTimeout(function(){_this.setState({recentlyMoused:!1})},7e3)}),_defineProperty(_assertThisInitialized(_this),"onKeyUp",function(e){e.which!==ESC_KEY||e.escapeHandled||(e.escapeHandled=!0,_this.props.closeTranscript())}),_this.state={captions:_this.formatCaptions(),closeFocus:!1,hitAndMissIndices:[],hitCounter:0,inputHasFocus:!1,isContainerHover:null,recentlyMoused:!1,searchKey:"",totalHits:0,turnstile:{}},_this.isMousingTimeout=null,_this.searchTimeout=null,_this.setTurnstileOptions(),_this}_inherits(Transcript,_Component);var _super=_createSuper(Transcript);return _createClass(Transcript,[{key:"componentDidMount",value:function componentDidMount(){this.setState({hitAndMissIndices:this.initialHitAndMissIndices()}),this.props.metricsVideoCount("interactiveCaptions-open"),this.inputElem.focus()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.metricsVideoCount("interactiveCaptions-close")}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){this.state.searchKey!==prevState.searchKey&&this.debounceSearch(),this.props.selectedLanguage!==prevProps.selectedLanguage&&(this.setState({captions:this.formatCaptions()}),this.setState({hitAndMissIndices:this.initialHitAndMissIndices()})),(this.props.turnstileClosed!==prevProps.turnstileClosed||this.props.turnstileEmail!==prevProps.turnstileEmail||void 0!==this.props.turnstilePlugin&&void 0===prevProps.turnstilePlugin)&&this.setTurnstileOptions()}},{key:"initialHitAndMissIndices",value:function initialHitAndMissIndices(){var captions=this.state.captions,length=captions.length,prefilledArr=Array.apply(null,Array(length)).map(function(){return!1});return prefilledArr}},{key:"setTurnstileOptions",value:function setTurnstileOptions(){var plugin=this.props.turnstilePlugin;plugin?this.setState({turnstile:{enabled:!0,time:plugin.options.time,hasClosed:this.props.turnstileClosed||!!this.props.turnstileEmail||!1}}):this.setState({turnstile:{enabled:!1,time:void 0,hasClosed:void 0}})}},{key:"debounceSearch",value:function debounceSearch(){var _this2=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){_this2.doSearch()},350)}},{key:"doSearch",value:function doSearch(){var _this$state2=this.state,searchKey=_this$state2.searchKey,captions=_this$state2.captions,searchRegEx=new RegExp(searchKey,"ig"),activeSearchHitIndex=void 0,totalHits=0;// if we have no captions lines, get outta here
if(!captions||!searchKey)return void this.setState({hitAndMissIndices:this.initialHitAndMissIndices(),totalHits:totalHits,hitCounter:0,activeSearchHitIndex:activeSearchHitIndex});// make an array of bools whether each line contains a hit or not
var hits=captions.map(function(line,index){var isHitInLine=searchRegEx.test(line.text);return void 0===activeSearchHitIndex&&isHitInLine&&(activeSearchHitIndex=index),isHitInLine&&totalHits++,isHitInLine}),hitCounter=activeSearchHitIndex?1:0;this.setState({hitAndMissIndices:hits,activeSearchHitIndex:activeSearchHitIndex,hitCounter:hitCounter,totalHits:totalHits}),this.props.metricsVideoCount("interactiveCaptions-search")}},{key:"getCaptionsForLanguage",value:function getCaptionsForLanguage(){var _this$props=this.props,srtCaptions=_this$props.srtCaptions,selectedLanguage=_this$props.selectedLanguage,preferredLanguage=_this$props.preferredLanguage,language="_off_"===selectedLanguage?preferredLanguage:selectedLanguage;return srtCaptions.filter(function(caption){return caption.language===language})[0]}},{key:"formatCaptions",value:function formatCaptions(){var captions=this.getCaptionsForLanguage(),formattedLines=captions.hash.lines.map(function(section){return section.text.map(function(){})});return[].concat.apply([],formattedLines)}},{key:"render",value:function render(){var _this3=this,scale=this.props.scale,_this$state3=this.state,captions=_this$state3.captions,hitCounter=_this$state3.hitCounter,totalHits=_this$state3.totalHits,dir=this.getCaptionsForLanguage().right_to_left?"rtl":"ltr";return h("div",{class:"w-css-reset w-css-reset-tree",onKeyUp:this.onKeyUp,onMouseMove:this.onMouseMove,style:this.rootStyles(),tabIndex:0},h("div",{dir:dir,style:this.searchAndCloseContainerStyles()},h("div",{style:{position:"absolute",width:"50%",left:0,right:0,top:"50%",transform:"translateY(-50%)",margin:"auto"}},h("svg",{width:"".concat(BASE_ELEM_SIZING*scale),height:"".concat(BASE_ELEM_SIZING*scale),viewBox:"0 0 100 100",style:this.searchIconStyles()},h("g",{stroke:this.state.inputHasFocus||this.state.searchKey?"#505050":"white",fill:"none","stroke-width":"10"},h("circle",{cx:"40",cy:"40",r:"30"}),h("line",{x1:"90",y1:"90",x2:"60",y2:"60"}))),h("style",{dangerouslySetInnerHTML:{__html:".w-interactive-captions--search-input::placeholder {\n                color: ".concat(this.state.inputHasFocus||this.state.searchKey?"#505050":"#FFF",";\n                opacity: 1;\n              }\n              ")}}),h("input",{"aria-label":"Search Captions",class:"w-interactive-captions--search-input",onBlur:this.inputOnBlur,onInput:this.updateSearchValue,onFocus:this.inputOnFocus,onKeyDown:this.inputKeyDown,onKeyUp:this.inputKeyUp,placeholder:"Search",style:this.searchInputStyles(),type:"search",value:this.state.searchKey,ref:function ref(el){return _this3.inputElem=el}}),this.state.searchKey&&h("div",{style:this.hitCountStyle()},hitCounter," / ",totalHits)),h("div",{style:{position:"absolute",right:"5%",top:"50%",transform:"translateY(-50%)",display:"inline-block"}},h("button",{style:this.closeButtonStyles(),class:"w-vulcan-v2-button w-css-reset",onClick:this.props.closeTranscript,onFocus:this.setCloseFocus,onBlur:this.setCloseBlur,tabIndex:0,"aria-label":"Close Interactive Captions"},h("svg",{viewBox:"0 0 100 100",width:"".concat(15*scale),height:"".concat(15*scale)},h("g",{stroke:"white","stroke-width":"10"},h("line",{x1:"0",y1:"100",x2:"100",y2:"0"}),h("line",{x1:"100",y1:"100",x2:"0",y2:"0"})))))),h(_TranscriptText_jsx__WEBPACK_IMPORTED_MODULE_1__["default"],{activeSearchHitIndex:this.state.activeSearchHitIndex,allRefs:this.sectionRefs,captions:captions,closeTranscript:this.props.closeTranscript,controlsAreVisible:this.props.controlsAreVisible,controlBarHeight:this.calculateSearchHeight(),focusInput:this.focusInput,hitAndMissIndices:this.state.hitAndMissIndices,recentlyMoused:this.state.recentlyMoused,scale:this.props.scale,setRefs:this.setRefs,searchKey:this.state.searchKey,seekTranscript:this.props.seekTranscript,turnstile:this.state.turnstile,updateHitCounter:this.updateHitCounter,videoDuration:this.props.videoDuration,videoHeight:this.props.videoHeight,videoTime:this.props.videoTime,dir:dir}))}},{key:"rootStyles",value:function rootStyles(){return{backgroundColor:"rgba(0,0,0,.65)",clip:"rect(0,0,0,0)",color:"#fff",height:"calc(100% + ".concat(this.props.controlBarHeight,"px)")}}// if controls are not visible on load and someone opens IC,
// this might be 0... so we set to default in that case
},{key:"calculateSearchHeight",value:function calculateSearchHeight(){return this.props.controlBarHeight?this.props.controlBarHeight:BASE_CONTROL_BAR_HEIGHT*this.props.scale}},{key:"searchAndCloseContainerStyles",value:function searchAndCloseContainerStyles(){return{position:"relative",height:"".concat(2*this.calculateSearchHeight(),"px"),minHeight:"".concat(2*this.calculateSearchHeight(),"px")}}},{key:"searchIconStyles",value:function searchIconStyles(){var scale=this.props.scale,_this$state4=this.state,inputHasFocus=_this$state4.inputHasFocus,searchKey=_this$state4.searchKey,focusable=!!(inputHasFocus||searchKey),left=focusable?"".concat(36*scale,"px"):"".concat(36*scale,"px");return{position:"absolute",display:"inline-block",top:"50%",transform:"translateY(-50%)",left:left,transition:"all 300ms ease"}}},{key:"closeButtonStyles",value:function closeButtonStyles(){var scale=this.props.scale;return{boxShadow:this.state.closeFocus?"0 0 0 2px #fff inset":"none",borderWidth:"1px",borderRadius:"0%",cursor:"pointer",height:"".concat(30*scale,"px"),width:"".concat(30*scale,"px"),display:"flex",alignItems:"center",justifyContent:"center"}}},{key:"hitCountStyle",value:function hitCountStyle(){var scale=this.props.scale,style={position:"absolute",transform:"translateY(-50%)",color:"#888",top:"50%",fontSize:"".concat(10*scale,"px"),fontWeight:600,fontFamily:interFontFamily},isRtL=this.getCaptionsForLanguage().right_to_left;return isRtL?style.left="".concat(48*scale+45,"px"):style.right="".concat(48*scale,"px"),style}},{key:"searchInputStyles",value:function searchInputStyles(){var scale=this.props.scale,_this$state5=this.state,inputHasFocus=_this$state5.inputHasFocus,searchKey=_this$state5.searchKey,focusable=!!(inputHasFocus||searchKey),backgroundColor=focusable?"white":"transparent",border="1px solid white",width="calc(100% - ".concat(40*scale,"px)"),buffer=8*scale;return{"-webkit-appearance":"none",padding:"".concat(buffer,"px ").concat(buffer,"px ").concat(buffer,"px ").concat(45*scale,"px"),fontSize:"".concat(17*scale,"px"),display:"block",fontFamily:interFontFamily,transition:"all 300ms ease",color:focusable?"#505050":"white",backgroundColor:backgroundColor,border:"1px solid white",width:width,margin:"auto",outline:"none",boxSizing:"border-box"}}}]),Transcript}(Component);/* harmony default export */ __webpack_exports__["default"] = (Transcript);

/***/ }),

/***/ 206:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var interpolation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59);
/* harmony import */ var interpolation__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(interpolation__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _TranscriptLine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(207);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/interFontFamily"),interFontFamily=_W$lib2.interFontFamily,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/elem"),elemIsInside=_W$lib3.elemIsInside,_W$lib4=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/isMouseDown"),isMouseDown=_W$lib4.isMouseDown,_W$lib5=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/seqid"),seqId=_W$lib5.seqId,BASE_ELEM_SIZING=20,UP_ARROW_KEY=38,DOWN_ARROW_KEY=40,TranscriptText=/*#__PURE__*/function(_Component){function TranscriptText(props){var _this;return _classCallCheck(this,TranscriptText),_this=_super.call(this,props),_defineProperty(_assertThisInitialized(_this),"focusNextOrPrevious",function(index){_this.setState({scrollToIndex:index,focusIndex:index}),setTimeout(function(){requestAnimationFrame(function(){_this.props.allRefs[index].focus()})},20)}),_defineProperty(_assertThisInitialized(_this),"handleScroll",function(event){_this.setState({scrollTop:event.target.scrollTop})}),_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(e){if((e.which===UP_ARROW_KEY||e.which===DOWN_ARROW_KEY)&&!e.wistiaPlayerHandled){e.preventDefault(),e.wistiaPlayerHandled=!0;var nextSearchHit=_this.props.hitAndMissIndices.indexOf(!0),index=-1===nextSearchHit?0:nextSearchHit;_this.setState({scrollToIndex:index,focusIndex:index}),setTimeout(function(){requestAnimationFrame(function(){_this.props.allRefs[index].focus()})},20)}}),_defineProperty(_assertThisInitialized(_this),"onWheel",function(){!1===_this.state.recentlyScrolled&&_this.setState({recentlyScrolled:!0}),_this.scrollingTimeout&&clearTimeout(_this.scrollingTimeout),_this.scrollingTimeout=setTimeout(function(){_this.setState({recentlyScrolled:!1})},7e3)}),_defineProperty(_assertThisInitialized(_this),"setSectionBlur",function(){_this.setState({sectionFocus:!1})}),_defineProperty(_assertThisInitialized(_this),"setSectionFocus",function(){}),_defineProperty(_assertThisInitialized(_this),"setFocusIndex",function(index){_this.setState({focusIndex:index})}),_defineProperty(_assertThisInitialized(_this),"setSectionRef",function(ref,index){_this.savedRefs[index]=ref}),_defineProperty(_assertThisInitialized(_this),"renderRowAtIndex",function(index){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return _this.renderLine(_this.props.captions[index],index,opts)}),_this.state={sectionFocus:!1,availableHeight:0,scrollTop:0,scrollToIndex:void 0,prevScrollToIndex:void 0,recentlyScrolled:!1},_this.savedRefs={},_this.scrollingTimeout=null,_this.containerId=seqId("w-interactive-transcript-"),_this}_inherits(TranscriptText,_Component);var _super=_createSuper(TranscriptText);return _createClass(TranscriptText,[{key:"componentDidMount",value:function componentDidMount(){var captions=this.props.captions;// when first opening the transcript, make sure we have the first line be the line that
// was clicked. Or if we're at the end of the video, that it is in the screen.
if(this.props.setRefs&&this.props.setRefs(this.savedRefs),this.setState({availableHeight:this.calculateAvailableHeight()}),0<this.props.videoTime)for(var i=0;i<captions.length;i++)if(this.isWithinTime(captions[i])){this.setState({scrollToIndex:i});break}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var segments=this.props.captions;// if the video has been playing and the mouse hasnt been moving, have the transcript follow along
if(this.props.setRefs&&this.props.setRefs(this.savedRefs),(this.props.controlsAreVisible!==prevProps.controlsAreVisible||this.props.videoHeight!==prevProps.videoHeight)&&this.setState({availableHeight:this.calculateAvailableHeight()}),this.props.activeSearchHitIndex!==prevProps.activeSearchHitIndex&&this.setState({scrollToIndex:this.props.activeSearchHitIndex,prevScrollToIndex:prevProps.activeSearchHitIndex}),this.state.scrollToIndex!==prevState.scrollToIndex&&this.setState({prevScrollToIndex:this.state.scrollToIndex}),this.props.videoTime!==prevProps.videoTime&&!1===this.props.recentlyMoused&&!1===this.state.recentlyScrolled)for(var i=0;i<segments.length;i++)if(this.isWithinTime(segments[i])){this.props.allRefs[i-1]&&null!==this.props.allRefs[i-1].offsetParent?this.startScrollAnimation(i):this.setState({scrollToIndex:i});break}this.props.controlsAreVisible&&!prevProps.controlsAreVisible&&this.isAtBottomOfCaptions()&&this.scrollToBottom()}},{key:"animate",value:function animate(){var _this2=this;return!this.scollInterpolation||this.scollInterpolation.atEnd()?void cancelAnimationFrame(this.scrollingAnimation):void(this.scrollingAnimation=requestAnimationFrame(function(){_this2.transcriptText.scrollTop=_this2.scollInterpolation.value(),_this2.scollInterpolation.atEnd()||_this2.animate()}))}},{key:"calculateAvailableHeight",value:function calculateAvailableHeight(){var _this$props=this.props,controlsAreVisible=_this$props.controlsAreVisible,controlBarHeight=_this$props.controlBarHeight,videoHeight=_this$props.videoHeight,heightOfSearch=2*controlBarHeight,heightOfControls=controlsAreVisible?controlBarHeight:0;return videoHeight-(heightOfSearch+heightOfControls)}},{key:"focusMaintainer",value:function focusMaintainer(startIndex,endIndex){this.state.focusIndex&&elemIsInside(document.activeElement,this.transcriptTextRoot)&&(this.state.focusIndex<startIndex||this.state.focusIndex>=endIndex?this.props.allRefs.focusHelper&&this.props.allRefs.focusHelper.focus({preventScroll:!0}):this.state.focusIndex>startIndex&&this.state.focusIndex<endIndex&&this.props.allRefs[this.state.focusIndex].focus())}},{key:"calculateNumberOfRowsToRender",value:function calculateNumberOfRowsToRender(){var _this$props2=this.props,captions=_this$props2.captions,turnstile=_this$props2.turnstile;// turnstiles that haven't been completed hide text past the turnstile time
if(turnstile.enabled&&!1===turnstile.hasClosed&&"end"!==turnstile.time){// binary search for the index of the text section that goes right up to the start of the turnstile
for(var beginning=0,end=captions.length-1,middle=Math.floor((beginning+end)/2);captions[middle].start>turnstile.time&&middle-1<end;)turnstile.time>captions[middle].start?beginning=middle-1:end=middle+1,middle=Math.floor((beginning+end)/2);// add 1 to the middle because we want the number of rows to display, not the index
return captions[middle].start<=turnstile.time?middle+1:1}return captions.length}},{key:"getNeighboringIndices",// for keyboard accessibility when arrowing between the sections
// if we have a search (with hits) arrowing should go to the next hit
// if there is no search it should just go to the next line
value:function getNeighboringIndices(index){var left=index,right=index,arr=this.props.hitAndMissIndices;// if there's no searchKey just want to +/- 1
if(!this.props.searchKey)return[index-1,index===arr.length-1?-1:index+1];// starting at the given index, move towards the ends of the array
// breaking when you hit the first true value
// if there is none the value will be -1, meaning not found
for(;0<=--left&&!arr[left];);for(;++right<arr.length&&!arr[right];);return[left,right===arr.length?-1:right]}},{key:"isAtBottomOfCaptions",value:function isAtBottomOfCaptions(){var el=this.transcriptText;return el.scrollTop+5>=el.scrollHeight-el.offsetHeight}},{key:"isWithinTime",value:function isWithinTime(options){var videoTime=this.props.videoTime,start=options.start,end=options.end;return videoTime>=start&&videoTime<end}// only focus in on the sections if the container is active and the arrow keys come
// into use
},{key:"scrollToBottom",value:function scrollToBottom(){var lastIndex=this.props.captions.length-1;this.startScrollAnimation(lastIndex)}},{key:"sectionContainerStyles",value:function sectionContainerStyles(){return{height:"100%",overflowY:"scroll",boxShadow:this.state.sectionFocus?"0 0 0 2px #fff inset":"none",outline:"none"}}},{key:"startScrollAnimation",value:function startScrollAnimation(toIndex){var elemAtTop=1.5*(toIndex*BASE_ELEM_SIZING)*this.props.scale,animateTo=Math.max(0,elemAtTop),animateFrom=this.transcriptText.scrollTop;cancelAnimationFrame(this.scrollingAnimation),this.scollInterpolation=new interpolation__WEBPACK_IMPORTED_MODULE_1___default.a({seedRange:300,outputStart:animateFrom,outputEnd:animateTo}),this.animate()}},{key:"turnstileText",value:function turnstileText(){var scale=this.props.scale;return{display:"block",fontWeight:"500",fontSize:"".concat(16*scale,"px"),lineHeight:"".concat(30*scale,"px"),fontFamily:interFontFamily,textAlign:"center",textStyle:"italic"}}},{key:"renderLine",value:function renderLine(section,index,opts){var start=section.start,end=section.end,isWithinTime=this.isWithinTime({start:start,end:end}),focusNeighbors=this.getNeighboringIndices(index);return h("div",{key:index,style:{boxShadow:isWithinTime&&!opts.focusHelper?"2px 0 0 0 #fff inset":"none",boxSizing:"border-box"},dir:this.props.dir,"aria-rowindex":index+1,role:!opts.focusHelper&&"row"},h(_TranscriptLine__WEBPACK_IMPORTED_MODULE_2__["default"],{containerId:this.containerId,dir:this.props.dir,line:section,focusHelper:opts.focusHelper||!1,focusInput:this.props.focusInput,focusNeighbors:focusNeighbors,focusNextOrPrevious:this.focusNextOrPrevious,index:index,isActive:isWithinTime,isHovered:!1,key:index,scale:this.props.scale,searchKey:this.props.searchKey,seek:this.props.seekTranscript,setSectionRef:this.setSectionRef,setFocusIndex:this.setFocusIndex,updateHitCounter:this.props.updateHitCounter}))}},{key:"render",value:function render(){var turnstileNearEnd,_this3=this,_this$props3=this.props,scale=_this$props3.scale,turnstile=_this$props3.turnstile,videoDuration=_this$props3.videoDuration,numRows=this.calculateNumberOfRowsToRender(),rowHeight=30*scale,totalHeight=rowHeight*numRows;turnstileNearEnd="end"===turnstile.time||videoDuration-5<=turnstile.time;var _this$state=this.state,availableHeight=_this$state.availableHeight,scrollTop=_this$state.scrollTop,startIndex=Math.floor(scrollTop/rowHeight);this.state.prevScrollToIndex!==this.state.scrollToIndex&&this.transcriptText&&void 0!==this.state.scrollToIndex&&(startIndex=this.state.scrollToIndex,this.transcriptText.scrollTop=startIndex*rowHeight);var endIndex=startIndex+Math.ceil(availableHeight/rowHeight);endIndex>numRows&&(endIndex=numRows);for(var items=[],index=startIndex;index<endIndex;)items.push(this.renderRowAtIndex(index,{})),index++;// helps bring focus to either the correct element or the focusHelper element if necessary
this.focusMaintainer(startIndex,endIndex);var listStyles={height:totalHeight,paddingTop:"".concat(startIndex*rowHeight,"px")};return"rtl"===this.props.dir?(listStyles.marginRight="".concat(25,"%"),listStyles.textAlign="right"):(listStyles.marginLeft="".concat(29,"%"),listStyles.textAlign="left",listStyles.width="".concat(60,"%")),h("div",{style:{height:"".concat(availableHeight,"px")},ref:function ref(el){return _this3.transcriptTextRoot=el}},h("div",{key:"focusHelper",style:{height:0}},this.renderRowAtIndex(this.state.focusIndex||0,{focusHelper:!0})),h("div",{"aria-label":"Use the arrow keys to move between the different caption lines. Click each line to seek the video to that line",id:this.containerId,onBlur:this.setSectionBlur,onFocus:this.setSectionFocus,onKeyDown:this.onKeyDown,onScroll:this.handleScroll,onWheel:this.onWheel,ref:function ref(el){return _this3.transcriptText=el},style:this.sectionContainerStyles(),tabIndex:0},h("div",{style:listStyles,role:"grid","aria-rowcount":numRows},h("div",{role:"rowgroup"},items)),turnstile.enabled&&!1===turnstile.hasClosed&&!turnstileNearEnd&&h("span",{style:this.turnstileText()},"-- You must enter your email to access the rest of the video. --")))}}]),TranscriptText}(Component);/* harmony default export */ __webpack_exports__["default"] = (TranscriptText);

/***/ }),

/***/ 207:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function(){}function(){}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _createSuper(Derived){return function(){var result,Super=_getPrototypeOf(Derived);if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return call&&("object"===_typeof(call)||"function"==typeof call)?call:_assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _W$lib=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("preact"),h=_W$lib.h,render=_W$lib.render,Component=_W$lib.Component,_W$lib2=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("player/lib/interFontFamily"),interFontFamily=_W$lib2.interFontFamily,_W$lib3=wistia_namespace_js__WEBPACK_IMPORTED_MODULE_0__["default"].lib("utilities/isMouseDown"),isMouseDown=_W$lib3.isMouseDown,UP_ARROW_KEY=38,DOWN_ARROW_KEY=40,ESC_KEY=27,BASE_ELEM_SIZING=20,TranscriptLine=/*#__PURE__*/function(_Component){function TranscriptLine(props){var _this;return _classCallCheck(this,TranscriptLine),_this=_super.call(this,props),_defineProperty(_assertThisInitialized(_this),"clickLine",function(e){var _this$props=_this.props,seek=_this$props.seek,line=_this$props.line;e.preventDefault(),seek(line.start+.001)}),_defineProperty(_assertThisInitialized(_this),"onMouseEnter",function(){!0!==_this.state.isHovered&&_this.setState({isHovered:!0})}),_defineProperty(_assertThisInitialized(_this),"onMouseLeave",function(){!1!==_this.state.isHovered&&_this.setState({isHovered:!1})}),_defineProperty(_assertThisInitialized(_this),"onFocus",function(){isMouseDown()||(_this.props.setFocusIndex(_this.props.index),_this.setState({isKeyboardFocused:!0}))}),_defineProperty(_assertThisInitialized(_this),"unsetKeyboardFocus",function(){_this.setState({isKeyboardFocused:!1})}),_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(e){var _this$props$focusNeig=_slicedToArray(_this.props.focusNeighbors,2),prev=_this$props$focusNeig[0],next=_this$props$focusNeig[1];switch(e.which){case DOWN_ARROW_KEY:e.preventDefault(),e.wistiaPlayerHandled=!0,-1!==next&&(_this.unsetKeyboardFocus(),_this.props.focusNextOrPrevious(next),_this.props.updateHitCounter(!0));break;case UP_ARROW_KEY:e.preventDefault(),e.wistiaPlayerHandled=!0,_this.unsetKeyboardFocus(),-1===prev?_this.props.focusInput(_this.props.index):(_this.props.focusNextOrPrevious(prev),_this.props.updateHitCounter(!1));break;default:return;}}),_defineProperty(_assertThisInitialized(_this),"onKeyUp",function(e){e.which===ESC_KEY&&(_this.props.focusInput(_this.props.index),e.escapeHandled=!0)}),_this.state={isHovered:!1,isKeyboardFocused:!1},_this}_inherits(TranscriptLine,_Component);var _super=_createSuper(TranscriptLine);return _createClass(TranscriptLine,[{key:"componentDidMount",value:function componentDidMount(){if(this.el){var id=this.props.focusHelper?"focusHelper":this.props.index;this.props.setSectionRef(this.el,id)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.el){var id=this.props.focusHelper?"focusHelper":this.props.index;this.props.setSectionRef(this.el,id)}}},{key:"render",value:function render(){var _this2=this,_this$props2=this.props,searchKey=_this$props2.searchKey,line=_this$props2.line,isActive=_this$props2.isActive,scale=_this$props2.scale,searchRegEx=new RegExp(searchKey,"ig"),ButtonOrDiv=this.props.focusHelper?"div":"button",renderLine=line.text;return""!==searchKey&&searchRegEx.test(line.text)&&(renderLine=line.text.replace(searchRegEx,function(wordBeingReplaced){return"<mark>".concat(wordBeingReplaced,"</mark>")})),h("div",{role:!this.props.focusHelper&&"gridcell"},h(ButtonOrDiv,{"aria-describedby":this.props.focusHelper?"":this.props.containerId,onBlur:this.unsetKeyboardFocus,onClick:this.clickLine,onFocus:this.onFocus,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter,ref:function ref(el){return _this2.el=el},style:this.lineStyles(isActive),tabIndex:-1},!1===this.props.focusHelper&&h("span",{dangerouslySetInnerHTML:{__html:renderLine},style:{backgroundColor:this.state.isHovered?"black":"transparent",boxShadow:this.state.isKeyboardFocused?"0 0 0 2px #fff inset":"none",cursor:"pointer",padding:"".concat(3.4*scale,"px ").concat(8*scale,"px"),textAlign:"rtl"===this.props.dir?"right":"left"}})))}},{key:"lineStyles",value:function lineStyles(isActive){var scale=this.props.scale;return{display:"inline-flex",minHeight:this.props.focusHelper?"0":"".concat(30*scale,"px"),fontFamily:interFontFamily,fontSize:"".concat(17*scale,"px"),fontWeight:isActive?"700":"500",lineHeight:this.props.focusHelper?"0":"".concat(26*scale,"px"),outline:"none",marginLeft:"".concat(BASE_ELEM_SIZING/3.3*scale,"px")}}}]),TranscriptLine}(Component);/* harmony default export */ __webpack_exports__["default"] = (TranscriptLine);

/***/ }),

/***/ 31:
/***/ (function(){}),

/***/ 5:
/***/ (function(){}),

/***/ 59:
/***/ (function(module, exports) {

var Interpolation;Interpolation=function(){}(),module.exports=Interpolation;

/***/ }),

/***/ 6:
/***/ (function(){}),

/***/ 9:
/***/ (function(){}