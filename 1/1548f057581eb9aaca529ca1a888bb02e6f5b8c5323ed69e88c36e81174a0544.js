var QueueIt,QueueIt,QueueIt,QueueIt,QueueIt,QueueIt,QueueIt,QueueIt;!function(e){(e.Javascript||(e.Javascript={})).Version="2.0.17"}(QueueIt=QueueIt||{}),function(e){!function(e){var t=(p.retrieveEnvInfoFromScriptTag=function(){if(p.environemntVariable)return p.environemntVariable;try{for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var r=e[t],n=r.getAttribute("data-queueit-c");if(n){var o=r.getAttribute("data-queueit-host")||"",i="true"==(r.getAttribute("data-queueit-intercept")||"").toLowerCase(),a=null!==r.getAttribute("data-queueit-interceptvnext"),u=r.getAttribute("data-queueit-intercept-domain")||"",s=r.getAttribute("data-queueit-jshost")||"",l="true"==(r.getAttribute("data-queueit-nocachereq")||"").toLowerCase(),d="true"==(r.getAttribute("data-queueit-noautorun")||"").toLowerCase(),c=r.getAttribute("data-queueit-ku-redirect-headername")||"",g="true"===(r.getAttribute("data-queueit-spa")||"").toLowerCase();return p.environemntVariable={cid:n,intercept:i,interceptVNext:a,host:o,jsHost:s,noCacheRequest:l,noAutorun:d,domainToIntercept:u,queueitKURedirectHeaderName:c,isSPA:g}}}}catch(e){console.warn(e)}return null},p.cleanUp=function(){},p);function p(){}e.EnvironmentHelper=t;function r(){}e.EnvironmentInfo=r}(e.Tools||(e.Tools={}))}(QueueIt=QueueIt||{}),function(e){var t,r,n;function o(){}t=e.Javascript||(e.Javascript={}),r=t.KnownUser||(t.KnownUser={}),o.getAjaxHeader=function(){},o.getUrlFromFetchArguments=function(e){return e instanceof Request?e.url:String(e)},o.getRedirectHeaderName=function(){},o.defaultRedirector=function(e){window.location.href=e,document.close()},o.tryGetQueueItRedirectHeaderFromFetch=function(){},o.tryGetQueueItRedirectHeaderFromXHR=function(e,t){var r="";return("function"!=typeof e.getAllResponseHeaders||0<=(e.getAllResponseHeaders()||"").indexOf(t))&&(r=e.getResponseHeader(t)),r},o.isUrlDomainMatchingOrIsRelativeURL=function(e,t){if(!new RegExp("^(?:[a-z]+:)?//","i").test(e))return!0;if(t){var r=document.createElement("a");if(r.href=e,-1<r.hostname.indexOf(t))return!0}return!1},n=o,r.RequestInterceptHelper=n}(QueueIt=QueueIt||{}),function(e){var t,g,r;function n(){}t=e.Javascript||(e.Javascript={}),g=t.KnownUser||(t.KnownUser={}),n.interceptOpen=function(u,e,s,l){void 0===s&&(s=null),void 0===l&&(l=null);var d=g.RequestInterceptHelper.getRedirectHeaderName(e);if(l=l||g.RequestInterceptHelper.defaultRedirector,s=s||function(){return window.location.href},("function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest)&&XMLHttpRequest.prototype){var c=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t,r,n,o){var i=this,a=!1;try{(a=g.RequestInterceptHelper.isUrlDomainMatchingOrIsRelativeURL(t,u))&&i.addEventListener("readystatechange",function(){return function(e){if(e.readyState===XMLHttpRequest.DONE)try{var t=g.RequestInterceptHelper.tryGetQueueItRedirectHeaderFromXHR(e,d);t&&l(decodeURIComponent(t))}catch(e){console.log("getResponseHeader('"+d+"') error"+e)}}(i)})}catch(e){console.warn(e)}finally{c.apply(i,arguments),a&&i.setRequestHeader.apply(i,g.RequestInterceptHelper.getAjaxHeader(s()))}}}},r=n,g.AjaxInterceptor=r}(QueueIt=QueueIt||{}),function(e){var t,d,r;function c(){}t=e.Javascript||(e.Javascript={}),d=t.KnownUser||(t.KnownUser={}),c.addEventListener=function(n){return function(e,t,r){"readystatechange"==e?(this.listeners=this.listeners||[],this.listeners.push(t)):n.AddEventListener.apply(this,arguments)}},c.removeEventListener=function(n){return function(e,t,r){"readystatechange"==e?(this.listeners=this.listeners||[],this.listeners=this.listeners.filter(function(e){return e!==t})):n.RemoveEventListener.apply(this,arguments)}},c.open=function(l){return function(e,t,r,n,o){var i=this;i.redirect=l.Redirect,i.redirectHeaderName=l.RedirectHeaderName;try{i.shouldBeIntercepted=d.RequestInterceptHelper.isUrlDomainMatchingOrIsRelativeURL(t,l.InterceptDomain),l.AddEventListener.apply(i,["readystatechange",c.stateUpdatedHandler])}catch(e){console.warn("Couldn't setup open intercept: ",e)}finally{if(l.Open.apply(i,arguments),i.shouldBeIntercepted){var a=d.RequestInterceptHelper.getAjaxHeader(l.GetCurrentUrl()),u=a[0],s=a[1];i.setRequestHeader(u,s)}}}},c.invokeListeners=function(e,t){for(var r=0;r<(e.listeners||[]).length;r++)e.listeners[r].apply(e,arguments)},c.interceptOpen=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o=d.RequestInterceptHelper.getRedirectHeaderName(t);if(n=n||d.RequestInterceptHelper.defaultRedirector,r=r||function(){return window.location.href},("function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest)&&XMLHttpRequest.prototype){var i={Open:XMLHttpRequest.prototype.open,AddEventListener:XMLHttpRequest.prototype.addEventListener,RemoveEventListener:XMLHttpRequest.prototype.removeEventListener,GetCurrentUrl:r,Redirect:n,RedirectHeaderName:o,InterceptDomain:e};XMLHttpRequest.prototype.addEventListener=c.addEventListener(i),XMLHttpRequest.prototype.removeEventListener=c.removeEventListener(i),XMLHttpRequest.prototype.open=c.open(i)}},c.stateUpdatedHandler=function(e){var t=this;if(!t.wasIntercepted)if(t.shouldBeIntercepted){if(t.readyState==XMLHttpRequest.HEADERS_RECEIVED||t.readyState==XMLHttpRequest.DONE)try{var r=d.RequestInterceptHelper.tryGetQueueItRedirectHeaderFromXHR(t,t.redirectHeaderName);if(r)return t.wasIntercepted=!0,t.onreadystatechange=c.stateUpdatedHandler.bind(t),t.onload=c.stateUpdatedHandler.bind(t),void t.redirect(decodeURIComponent(r))}catch(e){console.log("getResponseHeader('"+t.redirectHeaderName+"') error"+e,e)}c.invokeListeners(t,arguments)}else c.invokeListeners(t,arguments)},r=c,d.AjaxVNextInterceptor=r}(QueueIt=QueueIt||{}),function(e){var t,p,r;function f(){}t=e.Javascript||(e.Javascript={}),p=t.KnownUser||(t.KnownUser={}),f.responseHandler=function(r,n){return function(e){try{var t=p.RequestInterceptHelper.tryGetQueueItRedirectHeaderFromFetch(e,n);return t?(r(decodeURIComponent(t)),new Promise(function(){})):e}catch(e){throw console.warn("fetch response header ('"+n+"') error"+e),e}}},f.addQueueItHeadersToFetchRequest=function(e,t,r){var n=p.RequestInterceptHelper.getAjaxHeader(r),o=n[0],i=n[1];return e instanceof Request?e.headers.set(o,i):"string"==typeof e&&((t=t||{}).headers=t.headers||{},t.headers[o]=i),null!=t&&"object"==typeof t&&"no-cors"==t.mode&&console.warn("when no-cors is used, custom queue-it headers can't be used"),[e,t]},f.interceptFetch=function(u,e,s,l){void 0===s&&(s=null),void 0===l&&(l=null);var d=window;if("function"==typeof d.fetch){var c=p.RequestInterceptHelper.getRedirectHeaderName(e),g=d.fetch;l=l||p.RequestInterceptHelper.defaultRedirector,s=s||function(){return window.location.href},d.fetch=function(e,t){var r=p.RequestInterceptHelper.getUrlFromFetchArguments(e),n=!1;try{n=p.RequestInterceptHelper.isUrlDomainMatchingOrIsRelativeURL(r,u)}catch(e){console.warn(e)}if(!n)return g.apply(d,arguments);var o=f.addQueueItHeadersToFetchRequest(e,t,s()),i=o[0],a=o[1];return g.apply(d,[i,a]).then(f.responseHandler(l,c))}}},r=f,p.FetchInterceptor=r}(QueueIt=QueueIt||{}),function(i){var e;(function(e){var t=(o.tryInitQueueClientFromToken=function(e,t){if(void 0===t&&(t=null),t=t||window.location.href,e&&e.cid){var r=o.getQueueITToken(t);if(r&&r.eventId&&i.Javascript.QueueClient&&!window.myQueueClient){var n={removeTokenFromUrl:!0};e.host&&(n.host=e.host),window.myQueueClient=window.queueClient(e.cid,r.eventId,n)}}},o.getQueueITToken=function(e){var t=/queueittoken=([^&]*)/i.exec(e);if(!t||!t[1])return null;var r=new a;r.rawQueueItToken=t[1];for(var n=0,o=r.rawQueueItToken.split("~");n<o.length;n++){var i=o[n].split("_");"e"===i[0].toLowerCase()&&(r.eventId=i[1])}return r},o);function o(){}e.UrlQueueClientInitializer=t;var a=function(){};e.QueueItToken=a})((e=i.Javascript||(i.Javascript={})).KnownUser||(e.KnownUser={}))}(QueueIt=QueueIt||{}),function(e){var t,r;t=e.Javascript||(e.Javascript={}),function(e){function t(){}e.QueueClientEventConfig=t;var r=(n.AllowTParameter="AllowTParameter",n.EventTargetUrl="EventTargetUrl",n.ForcedTargetUrl="ForcedTargetUrl",n.ForecedTargetUrl="ForecedTargetUrl",n);function n(){}e.RedirectionLogic=r;var o=(i.UrlValidator="UrlValidator",i.CookieValidator="CookieValidator",i.JSVariableValidator="JSVariableValidator",i.UserAgentValidator="UserAgentValidator",i);function i(){}e.ValidatorType=o;var a=(u.Equals="Equals",u.Contains="Contains",u.ContainsAny="ContainsAny",u.EqualsAny="EqualsAny",u.NotEquals="NotEquals",u.NotContains="NotContains",u.IgEquals="IgEquals",u.IgContains="IgContains",u);function u(){}e.ComparisonOperatorType=a;var s=(l.PagePath="PagePath",l.HostName="HostName",l.PageUrl="PageUrl",l);function l(){}e.UrlPartSelectorType=s;var d=(c.CancelAction="Cancel",c.QueueAction="Queue",c.IgnoreAction="Ignore",c);function c(){}e.ActionType=d}((r=t.IntegrationConfig||(t.IntegrationConfig={})).Model||(r.Model={}))}(QueueIt=QueueIt||{});var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),QueueIt,QueueIt;if(!function(QueueIt){var Javascript;!function(Javascript){var IntegrationConfig;!function(IntegrationConfig){function isNumber(e){var t;return("number"!=typeof(t=parseFloat(e))||!isNaN(t))&&isFinite(e)}var IntegrationPointBase=(bd.CreateIntegrationPoint=function(e,t){return void 0===t&&(t=Trigger.CreateTrigger),new(bd.getActionType(e)===IntegrationConfig.Model.ActionType.QueueAction?IntegrationPointQueue:bd.getActionType(e)===IntegrationConfig.Model.ActionType.CancelAction?IntegrationPointCancel:IntegrationPointIgnore)(e,t)},bd.prototype.initTriggers=function(){this._triggers=new Array;for(var e=0,t=this.model.triggers;e<t.length;e++){var r=t[e];this._triggers.push(this._triggerFactory(r))}},bd.prototype.evaluate=function(){for(var e=0,t=this._triggers;e<t.length;e++)if(t[e].evaluate())return!0;return!1},bd.prototype.getActionType=function(){return bd.getActionType(this.model)},bd.getActionType=function(){},bd);function bd(e,t){this.model=e,this._triggerFactory=t,this.initTriggers()}IntegrationConfig.IntegrationPointBase=IntegrationPointBase;var IntegrationPointQueue=function(_super){function IntegrationPointQueue(e,t){return _super.call(this,e,t)||this}return __extends(IntegrationPointQueue,_super),IntegrationPointQueue.prototype.getQueueClientConfig=function(customerId){var result=new IntegrationConfig.Model.QueueClientEventConfig;result.eventId=this.model.eventId,result.cookieDomain=this.model.cookieDomain,result.culture=this.model.culture,result.extendValidity=this.model.extendValidity,result.layoutName=this.model.layoutName,result.validity=this.model.validity,this.model.queueDomain&&(result.host=this.model.queueDomain),this.model.removeTokenFromUrl&&(result.removeTokenFromUrl=!0,result.queryStringPrefix=this.model.queryStringPrefix);var that=this;return this.model.onVerified&&(result.onVerified=function(){!function(customerId,eventId){eval(that.model.onVerified)}(customerId,that.model.eventId)}),this.model.onDisabled&&(result.onDisabled=function(){!function(customerId,eventId){eval(that.model.onDisabled)}(customerId,that.model.eventId)}),this.model.onTimeout&&(result.onTimeout=function(){!function(){}