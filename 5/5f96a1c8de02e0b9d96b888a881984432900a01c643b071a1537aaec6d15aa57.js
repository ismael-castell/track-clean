!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn1.affirm.com/products/affirmjs/master/dist/",n(n.s=69)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),o=a(n(1)),i=a(n(44));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={buildParams:function(e,t,n){Array.isArray(t)?t.forEach(function(t,r){e.match(/\[]$/)?n(e,t):l.buildParams("".concat(e,"[").concat("object"===c(t)?r:"","]"),t,n)}):l.isObject(t)?Object.keys(t).forEach(function(r){l.buildParams("".concat(e,"[").concat(r,"]"),t[r],n)}):null!==t&&n(e,t)},delay:function(e,t){return setTimeout(e,t)},extend:function(e,t){return l.isObject(t)?(Object.keys(t).forEach(function(n){var r=t[n];Object.prototype.hasOwnProperty.call(t,n)&&(!r||"object"!==c(r)||Array.isArray(r)||l.isElement(r)?e[n]=r:"object"===c(e[n])?e[n]=l.extend(e[n],l.extend({},r)):e[n]=l.extend({},r))}),e):e},formattedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e.split("#"),2),r=n[0],o=n[1],i=r.match(/\?/)?"&":"?",a=r;return a="".concat(a).concat(i).concat(l.param(t)),o&&(a+="#".concat("".concat(o))),a},getApiUrl:function(e){return l.getResourceUrl(r.default.api_url,e)},getDomain:function(e){try{var t=document.createElement("a");t.href=encodeURI(e);var n=""!==t.port?":".concat(t.port):"";return"".concat(t.protocol,"//").concat(t.hostname).concat(n,"/")}catch(t){return e}},getElementById:function(e){var t=e;return"string"==typeof t&&(t=document.getElementById(t.replace(/^#/,""))),t},getResourceUrl:function(e,t){var n="",r=e&&e.length&&"/"!==e[e.length-1],o=t&&t.length&&"/"!==t[0];return r&&o&&(n="/"),"".concat(e).concat(n).concat(t)},getFrontendUrl:function(e){return l.getResourceUrl(r.default.frontend_url,e)},getUserAgent:function(){return navigator.userAgent},getUserTimeZone:function(){return Intl&&"function"==typeof Intl.DateTimeFormat&&"function"==typeof Intl.DateTimeFormat().resolvedOptions&&Intl.DateTimeFormat().resolvedOptions().timeZone||null},getWebhookSessionId:function(){},isAffirmWebView:function(){var e=l.getUserAgent(),t=!!e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari).*(Affirm-iOS).*/i),n=!!e.match(/(Android).*AppleWebKit.*(Affirm-Android).*/i);return t||n},isElement:function(e){try{return e instanceof HTMLElement}catch(e){}try{return"object"===c(e)&&1===e.nodeType&&"object"===c(e.style)&&"object"===c(e.ownerDocument)}catch(e){}return!1},isIe:function(){return l.getUserAgent().match(/MSIE/i)||l.getUserAgent().match(/Trident.*rv:11\./)},isMobile:function(){return l.getUserAgent().match(/Android/i)||l.getUserAgent().match(/iPad/i)||l.getUserAgent().match(/iPod/i)||l.getUserAgent().match(/webOS/i)||l.getUserAgent().match(/iPhone/i)||l.getUserAgent().match(/BlackBerry/i)},isObject:function(){},isTouch:function(){return l.getUserAgent().match(/Android/i)||l.getUserAgent().match(/iPad/i)||l.getUserAgent().match(/iPod/i)||l.getUserAgent().match(/iPhone/i)},isIosWebView:function(){},param:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=function(e,t){var r=t;"function"==typeof t?r=t():null!==t&&void 0!==t||(r=""),n[n.length]="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))};return Array.isArray(e)?e.forEach(function(e,t){l.buildParams(t,e,r)}):l.isObject(e)&&Object.keys(e).forEach(function(t){l.buildParams(t,e[t],r)}),n=n.join("&"),t&&(n=n.replace(/%20/g,"+")),n},postToUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=document.createElement("form");l.setElementAttrs(r,{"accept-charset":"utf-8",action:e,method:n}),l.isObject(t)&&Object.keys(t).forEach(function(e){var n=t[e];Object.prototype.hasOwnProperty.call(t,e)&&("string"==typeof n&&(n=[n]),n.forEach(function(t){var n=document.createElement("input");l.setElementAttrs(n,{name:e,type:"hidden",value:t}),r.appendChild(n)}))}),document.body.appendChild(r),o.default.trackActionLog("AFJS_form_sent",{checkoutToken:t.checkout_token,path:e,method:n}),r.submit()},preconnectTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];["preconnect","dns-prefetch"].forEach(function(n){var r=document.createElement("link");r.rel=n,r.href=e,t&&(r.crossOrigin=""),document.head.appendChild(r)})},queryObj:function(e){var t={};return(e?l.queryString(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]||""}}),t},queryString:function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""},setElementAttrs:function(e,t){l.isObject(t)&&Object.keys(t).forEach(function(n){var r=t[n];try{e.setAttribute(n,r)}catch(t){e[n]=r}})},setElementStyle:function(e,t){l.isObject(t)&&Object.keys(t).forEach(function(n){e.style[n]=t[n]})},setUrl:function(e){document.location.assign&&document.location.assign(e),document.location.href=e},sniffer:{failed:[],promises:{},register:function(e,t){if(t.async){var n=t.test();return l.sniffer.promises[e]=n,void n.then(function(n){l.sniffer[e]=n,n||l.sniffer.failed.push(t.message)})}try{l.sniffer[e]=t.test()}catch(t){l.sniffer[e]=!1}l.sniffer[e]||l.sniffer.failed.push(t.message)}},swapStyle:function(e,t,n){if(e.style[t]){var r=e.style[n];e.style[n]=e.style[t],e.style[t]=r}if(e.style[n]){var o=e.style[t];e.style[t]=e.style[n],e.style[n]=o}},throwErrIfNotObject:function(e){if(!e||e.constructor!==Object)throw new Error("Provided argument is not an object")}},f={cookies:{message:"Cookies Disabled",test:i.default.cookies},cors:{message:"Cross Origin Resource Sharing not available",test:i.default.cors},JSON:{message:"JSON not available",test:i.default.json},localstorage:{message:"localStorage Disabled",test:i.default.localStorage},thirdPartyCookies:{async:!0,message:"Third Party Cookies not available",test:function(){return i.default.thirdPartyCookies(l.getFrontendUrl("api/v2/".concat(r.default.resource_urls.third_party_cookie_check)))}}};Object.keys(f).forEach(function(e){l.sniffer.register(e,f[e])}),l.get_domain=l.getDomain;var d=l;t.default=d},function(e,t,n){"use strict";n.r(t),n.d(t,"USER_ACTIONS",function(){return b}),n.d(t,"trackEvent",function(){return R}),n.d(t,"trackCustomEvent",function(){return x}),n.d(t,"trackDebugEvent",function(){return j}),n.d(t,"trackOnExit",function(){return D}),n.d(t,"trackPageView",function(){return N}),n.d(t,"trackImpression",function(){return L}),n.d(t,"trackActionLog",function(){return F}),n.d(t,"trackAPI",function(){return U}),n.d(t,"trackBrowserNotSupportedImpression",function(){return B}),n.d(t,"trackLongTasksEntries",function(){return Q}),n.d(t,"trackResourceTiming",function(){return V}),n.d(t,"trackApplicationResponseTime",function(){return G}),n.d(t,"trackUserInteraction",function(){return K}),n.d(t,"trackFirstInputDelay",function(){return J}),n.d(t,"trackTimeToInteractive",function(){return Y}),n.d(t,"trackAppAbandonment",function(){return z}),n.d(t,"tag",function(){return X}),n.d(t,"untag",function(){return Z}),n.d(t,"clearTags",function(){return $}),n.d(t,"init",function(){return te});var r=n(2),o=n(64),i=n.n(o),a=n(37),s=n.n(a),u=n(65),c=n(66),l=n.n(c),f=n(23),d=n.n(f),p=n(67),h=n(24),m=n(25),g=n(68),y=n.n(g);n(108);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A="last_session_id",b={CLICK:"Click",DISMISS:"Dismiss",HOVER:"Hover",SWIPE_LEFT:"Swipe Left",SWIPE_RIGHT:"Swipe Right",TAP:"Tap"},_={},w="",E=!1,k=null,O=[],S=null,P=1;function I(e){if(void 0===e&&(e={}),w){var t="localhost"===w?"/collect":"https://"+w+"/collect",n=window.Rollbar||window.affirm&&window.affirm.Rollbar;if(navigator&&"function"==typeof navigator.sendBeacon){navigator.sendBeacon(t,JSON.stringify(e))||Math.random()<.01&&n&&n.warn("Error queueing beacon to "+t,void 0,{version:"v2"})}else{window.fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).catch(function(e){!Object(h.a)(e)&&Math.random()<.01&&n&&n.warn("Network error fetching "+t,e,{version:"v2"})})}}else window.console&&"function"==typeof console.log&&console.log("Tracking event: "+e.eventType,e)}function T(){var e,t,n=(e=window.location.href,(t=document.createElement("a")).href=e,t);return{hash:n.hash,hostname:n.hostname,pathname:n.pathname,queryParams:n.search}}function M(){for(;0!==O.length;){var e=O.pop();Object.assign(e,_),I(e)}}function C(e,t,n){void 0===n&&(n=!0);var r={hr:window.location.href,ts:Date.now(),ms:window.performance?window.performance.now():null,is_load_finished:null!=k},o={};Object.assign(o,_),Object.assign(o,{eventType:e}),Object.assign(o,r),Object.assign(o,t),"user-interaction"===e?S=o:S&&"page-view"===e&&(o.screen_transition={latency:o.ms-S.ms,start_page_key:S.pageKey,start_user_action:S.user_action,start_element_name:S.element_name},S=null);var i=s()(o),a=i;return n&&(a=d()(i)),a}function R(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n=1),void 0===r&&(r=!0),!(Math.random()>n)){var o=C(e,t,r);if(window.Rollbar&&"function"==typeof window.Rollbar.captureEvent&&"resource-timing"!==e){var i={eventType:e,action_name:t.action_name,url:t.url,response_status:t.response_status,pageKey:t.pageKey,user_action:t.user_action,element_name:t.element_name,referrer:t.referrer,load_type:t.load_type};o&&(i.screen_transition=o.screen_transition),window.Rollbar.captureEvent(i,"info")}E?(I(o),M()):O.push(o)}}function x(e,t){void 0===t&&(t={}),ne.trackEvent("custom-event",v({customEventName:e},t))}function j(e,t){void 0===t&&(t={}),ne.trackEvent("debug-event",v({debugEventName:e},t))}function D(e,t){void 0===e&&(e={}),void 0===t&&(t="resource-timing"),I(C(t,{entry:e&&e.entry?e.entry:{entryType:"exit_page"}}))}function N(e,t,n){void 0===t&&(t=!0),void 0===n&&(n={});var r=v({},n,{load_type:t?"full":"dynamic",referrer:document.referrer});e&&Object.assign(r,{pageKey:e}),X({path:T()}),R("page-view",r)}function L(e,t){void 0===t&&(t={}),ne.trackEvent("impression",v({},t,{element_name:e}))}function(){}function U(e,t,n,r){var o;void 0===r&&(r={}),o="string"!=typeof n?JSON.stringify(n):n;var i=t<=299?P:1;R("api",v({},r,{url:e,response_status:t||"unknown",response_message:o}),i)}function B(e,t){R("Browser does not support PerformanceEntry type "+e,{errorMessage:t?t.message:""})}function H(e){e.forEach(function(e){var t=e.toJSON();t.entryName=t.name,delete t.name,R("resource-timing",{entry:t})})}function q(e,t){void 0===t&&(t={});var n=Object.assign({},e);n.entryName=n.name,delete n.name;var r=Object.assign({},n,t);if(!!r.responseStart){var o=r.redirectEnd-r.redirectStart,i=0!==o,a=r.domainLookupStart-r.fetchStart==0,s=r.domainLookupEnd-r.domainLookupStart,u=0===s,c=r.connectEnd-r.connectStart,l=0===c;Object.assign(r,{isBrowserCached:a,isDNSCached:u,isPersistentConnection:l,isRedirected:i,resourceConnectionTime:c,resourceContentDownloadTime:r.responseEnd-r.responseStart,resourceDNSLookupTime:s,resourceRedirectTime:o,resourceTTFB:r.responseStart-r.startTime,resourceTTLB:r.responseEnd-r.startTime})}return r}function W(e,t){e.reduce(function(e,n){if("function"!=typeof n.toJSON)return e;var r=n.toJSON(),o="localhost"===w?"/collect":"https://"+w+"/collect";if(-1!==r.name.indexOf(o))return e;if(t&&t.length&&!t.find(function(){}))return e;return e.push(q(r)),e},[]).forEach(function(e){ne.trackEvent("resource-timing",{entry:e})})}function Q(e){e.forEach(function(e){var t=e.toJSON();if(t&&t.attribution){var n=q(t);delete n.attribution,t.attribution.forEach(function(e){var t=e;t.attributionName=t.name,delete t.name,ne.trackEvent("resource-timing",{entry:n,attribution:t})})}else{B("longtask",{message:"TaskAttributionTiming not present in the entry"})}})}function V(){}function(){}function K(e,t,n){void 0===n&&(n={}),Object.keys(b).some(function(e){return b[e]===t})&&ne.trackEvent("user-interaction",{element_name:e,meta_data:n,user_action:t})}function J(){try{perfMetrics.onFirstInputDelay(function(e){ne.trackEvent("resource-timing",{entry:{entryType:"first-input-delay",duration:e}})})}catch(e){B("first-input-delay",e)}return r.default.deviceId}function Y(){return window.performance&&window.PerformanceLongTaskTiming?(window.__tti={entries:[]},window.__tti.entries=window.__tti.entries.concat(window.performance.getEntriesByType("longtask")),y.a.getFirstConsistentlyInteractive().then(function(e){ne.trackEvent("resource-timing",{entry:{entryType:"time-to-interactive",duration:e}})})):r.default.deviceId}function z(){document.addEventListener("visibilitychange",function e(){document.removeEventListener("visibilitychange",e),ne.trackOnExit({entry:{entryType:"app-abandonment",startTime:window.performance?window.performance.now():null}},"page-view")})}function X(e){return void 0===e&&(e={}),Object.assign(_,d()(s()(e))),this}function Z(e){return(Array.isArray(e)?e:[e]).forEach(function(e){return delete _[e]}),this}function $(){return _={},this}function ee(e){var t,n,o=r.default.localDeviceId,a=m.a.read(A),s=((t={})[r.default.COOKIE_KEY]=o,t);return a&&(s[A]=a),X(s),E=!0,e.firePageView&&(n=function(){R("page-load",{performance:i()(),load_type:"full",is_performance_observed:"PerformanceObserver"in window})},Object(p.loadEventListener)(function(){return setTimeout(n,0)}),N()),e.fireAppAbandonment&&z(),M(),r.default.deviceId}function te(e,t,n,o,i,a,s,c,f,d,p,h,m){void 0===i&&(i={}),void 0===a&&(a=!0),void 0===s&&(s=1),void 0===c&&(c=[]),void 0===f&&(f=!0),void 0===d&&(d=!0),void 0===p&&(p=1),void 0===h&&(h=!0),void 0===m&&(m=p),P=m;var g=navigator.userAgent,y=l()(g),A=Object(u.parseUserAgentIntoDeviceType)(g),b=navigator.connection?navigator.connection.effectiveType:"";w=o;var _={firePageView:a,fireAppAbandonment:h,defaultObserverSampleRate:s};return X({client:{appName:e,appVersion:t,browser:y,deviceType:A,connectionType:b},path:T()}),X(i),X({pageKey:window.location.href}),r.default.initialize({apiUrl:n}).then(function(){return ee(_)}).then(function(){return function(e,t){if(Math.random()>t)return r.default.deviceId;try{window.performance&&window.performance.getEntriesByType&&W(window.performance.getEntriesByType("resource"),e),new PerformanceObserver(function(t){W(t.getEntries(),e)}).observe({entryTypes:["resource"]})}catch(e){B("resource",e)}return r.default.deviceId}(c,p)}).then(function(){Math.random()>s||function(){if(window.performance&&window.performance.getEntriesByType&&(H(window.performance.getEntriesByType("paint")),window.PerformanceObserver)){var e=new PerformanceObserver(function(t){H(t.getEntries()),e.disconnect()});try{e.observe({entryTypes:["paint"]})}catch(e){B("paint",e)}}return r.default.deviceId}().then(function(){return function(){if(window.performance&&window.performance.getEntriesByType&&(Q(window.performance.getEntriesByType("longtask")),window.PerformanceObserver)){var e=new PerformanceObserver(function(e){Q(e.getEntries())});try{e.observe({entryTypes:["longtask"]})}catch(e){B("longtask",e)}}return r.default.deviceId}()}).then(function(){return function(){var e="largest-contentful-paint";try{new PerformanceObserver(function(e){var t=e.getEntries(),n=t[t.length-1];k={startTime:n.renderTime||n.loadTime,size:n.size,url:n.url,element:{text:n.element&&n.element.innerText,pageUrl:n.element&&n.element.baseURI}}}).observe({type:e,buffered:!0}),document.addEventListener("visibilitychange",function(){k&&"hidden"===document.visibilityState&&ne.trackOnExit({entry:v({entryType:"largest-contentful-paint"},k)})})}catch(t){B(e,t)}return r.default.deviceId}()}).then(function(){return d&&Y()}).then(function(){})}),this}var ne={clearTags:$,init:te,tag:X,untag:Z,trackEvent:R,trackBrowserNotSupportedImpression:B,trackCustomEvent:x,trackDebugEvent:j,trackOnExit:D,trackActionLog:F,trackApplicationResponseTime:G,trackImpression:L,trackUserInteraction:K,trackResourceTiming:V,trackResourceTimingEntries:W,trackLongTasksEntries:Q,trackTimeToInteractive:Y,trackFirstInputDelay:J,trackAppAbandonment:z,trackAPI:U,trackPageView:N,USER_ACTIONS:b};t.default=ne},function(e,t,n){"use strict";function r(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function o(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function i(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function a(e){return Boolean(e.match(/Chrom(e|ium)/))}n.r(t),n.d(t,"default",function(){return b});var s={chromeMajorVersion:r,iosMajorVersion:o,macosxVersion:i,isChromeMajorVersion:function(e,t){return r(e)===t},isChromiumBased:a,isIosMajorVersion:function(e,t){return o(e)===t},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))},isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var r=i(e),o=r.major,a=r.minor;return n?o===t&&a===n:o===t},isSafariBased:function(e){return!a(e)&&Boolean(e.match(/Version\/.* Safari\//))}},u={};function c(){var e=navigator.userAgent;return!(!s.isIosMajorVersion(e,12)&&!s.isMacosxVersion(e,10,14)||!s.isSafariBased(e)&&!s.isMacEmbeddedBrowser(e))||!!(s.isChromiumBased(e)&&s.chromeMajorVersion(e)<67)}function l(e){window.Rollbar&&"function"==typeof window.Rollbar.warning&&window.Rollbar.warning(e)}function f(e,t,n,r,o){try{var i;if(n){var a=new Date(Date.now());a.setTime(a.getTime()+24*n*60*60*1e3),i=a.toUTCString()}else i="";u.buildCookie(e,t,r||"",i,o)}catch(e){l(e)}}function d(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var o=t.slice(r).join(".");u.buildCookie(e,"",o,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){l(e)}}function p(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){l(e)}return null}u.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",a=n?"; domain="+n:"",s="https:"===location.protocol&&"None"===o?"; Secure":"",u=e+"="+t+i+a+"; path=/";c()?document.cookie=u:document.cookie=u+"; SameSite="+o+s},u.create=f,u.enabled=function(){try{u.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return u.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return l(e),!1}},u.erase=d,u.read=p,u.upsert=function(e,t,n,r,o){try{p(e)&&d(e),f(e,t,n,r,o)}catch(e){l(e)}},u.isSameSiteNoneIncompatible=c;var h=u;var m={getParamValue:function(e){var t=window.location.search.substring(1);if(""===t)return null;t=t.split("&");for(var n=0;n<t.length;n+=1){var r=t[n].split("=");if(r[0]===e){if(void 0===r[1])break;return decodeURIComponent(r[1])}}return null}};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y,v,A,b=function(){var e,t,n;function r(e){if(void 0===e&&(e={}),r.instance)return r.instance;if(window.affirm=window.affirm||{},window.affirm.deviceId=window.affirm.deviceId||{},this.config=e,!this.config.apiUrl)throw new Error("API url is required")}return r.initialize=function(e){return r.instance?r.deviceId:(r.instance=new r(e),r.deviceId.then(function(){}))},r.reset=function(){r.instance=null,window.affirm&&window.affirm.deviceId&&delete window.affirm.deviceId},e=r,n=[{key:"API_URL",get:function(){return"session/touch_track"}},{key:"COOKIE_EXPIRATION",get:function(){return 1825}},{key:"COOKIE_KEY",get:function(){return"tracker_device"}},{key:"SEARCH_PARAM",get:function(){return"device_id"}},{key:"deviceId",get:function(){return new Promise(function(e){var t=r.localDeviceId;return e(t||r.deviceIdFromApi)})},set:function(e){h.upsert(r.COOKIE_KEY,e,r.COOKIE_EXPIRATION),window.affirm&&window.affirm.deviceId&&(window.affirm.deviceId.value=e)}},{key:"deviceIdFromApi",get:function(){if(window.affirm.deviceId.promise)return window.affirm.deviceId.promise;var e=r.instance.config.apiUrl+r.API_URL,t=window.fetch(e,{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){return e.id}).catch(function(){return null}).finally(function(){});return window.affirm.deviceId.promise=t,t}},{key:"deviceIdFromCookies",get:function(){return h.read(r.COOKIE_KEY)}},{key:"deviceIdFromSearchParam",get:function(){return m.getParamValue(r.SEARCH_PARAM)}},{key:"localDeviceId",get:function(){return window.affirm.deviceId.value||r.deviceIdFromSearchParam||r.deviceIdFromCookies}}],(t=null)&&g(e.prototype,t),n&&g(e,n),r}();A=null,(v="instance")in(y=b)?Object.defineProperty(y,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[v]=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(103)),o=n(13),i=s(n(6)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u,c,l=i.default.getPublicApiKey();u=r.default.tracking_blacklist,c=l,(0,o.indexOf)(u,c)>-1||(a.default.init("affirm-js-v2","10.74.0",r.default.api_url,r.default.tracking_endpoint,{},!1,0,[r.default.api_url,r.default.base_cdn_url,r.default.frontend_url,r.default.minified_url],!1,!1,.01,!1,1),l||a.default.trackEvent("Merchant API Key Not Set",{},.01));var f=r.default;t.default=f},function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o=60103,i={use_static:!1};function(){}function(){}function(){}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var c="__immutable_invariants_hold";function l(e){return"object"!=typeof e||null===e||Boolean(Object.getOwnPropertyDescriptor(e,c))}function f(e,t){return e===t||e!=e&&t!=t}function(){}var p=["setPrototypeOf"],h=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),g=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function(){}function(){}function(){}function(){}y.prototype=new Error,y.prototype.constructor=Error;var _=G([]);function(){}function(){}function k(){return new Date(this.getTime())}function(){}function(){}function(){}function(){}function(){}function(){}function C(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),i=t&&t.deep,s=t&&t.mode||"merge",u=t&&t.merger;function(){}if(o)for(var l=0,p=e.length;l<p;l++){var h=e[l];for(r in h)h.hasOwnProperty(r)&&c(void 0!==n?n:this,h,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&c(this,e,r);"replace"===s&&function(){}(this,e)}return void 0===n?this:V(n)}function(){}var x,j,D,N=G({});function(){}function(){}function(){}function(){}function(){}function(){}function(){}function Q(){return{}}function(){}function G(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(e.$$typeof===o||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(){}(e))return e.then(G);if(Array.isArray(e))return E(e.slice());if(e instanceof Date)return a=new Date(e.getTime()),i.use_static||s(a,"asMutable",k),v(a,g);var a,u=t&&t.prototype,c=(u&&u!==Object.prototype?function(){return Object.create(u)}:Q)();if(null==n&&(n=64),n<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var f in n-=1,e)Object.getOwnPropertyDescriptor(e,f)&&(c[f]=G(e[f],void 0,n));return V(c)}function(){}function(){}return G.from=G,G.isImmutable=l,G.ImmutableError=y,G.merge=K(C),G.replace=K(R),G.without=K(S),G.asMutable=(x=W,j=P,D=k,function(){}),G.set=J(F,b),G.setIn=J(L,w),G.update=K(U),G.updateIn=K(H),G.getIn=K(q),G.flatMap=K(O),G.asObject=K(I),i.use_static||(G.static=e({use_static:!0})),Object.freeze(G),G}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){var r=n(80),o={},i=!1;function(){}function(){}function u(e){return a(e,"function")}function(){}function l(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function(){}var d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function(){}function(){}var m=["log","network","dom","navigation","error","manual"],g=["critical","error","warning","info","debug"];function(){}function(){}e.exports={addParamsAndAccessTokenToPath:function(){},createItem:function(){},addErrorContext:function(){},createTelemetryEvent:function(){},filterIp:function(){},formatArgsAsString:function(){},formatUrl:function(){},get:function(){},handleOptions:function(e,t,n){var o=r(e,t,n);return!t||t.overwriteScrubFields?o:(t.scrubFields&&(o.scrubFields=(e.scrubFields||[]).concat(t.scrubFields)),o)},isError:function(){},isFunction:u,isIterable:function(){},isNativeFunction:c,isType:a,isObject:l,isString:function(e){return"string"==typeof e||e instanceof String},jsonParse:function(){},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(){},merge:r,now:v,redact:function(){return"********"},sanitizeUrl:function(){},set:function(){},setupJSON:function(e){i||(i=!0,a(JSON,"undefined")||(c(JSON.stringify)&&(o.stringify=JSON.stringify),c(JSON.parse)&&(o.parse=JSON.parse)),u(o.stringify)&&u(o.parse)||e(o))},stringify:p,maxByteSize:function(){},typeName:s,uuid4:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(10)),o=s(n(12)),i=s(n(107)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=["YOUR_PUBLIC_KEY","XXXXXXXXXXXXXXX"],h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this)).publicApiKey=null,e.getPublicApiKey()&&e.setPublicApiKey(e.getPublicApiKey()),e}return t=u,(n=[{key:"checkPublicApiKey",value:function(){return!!this.getPublicApiKey()}},{key:"getPublicApiKey",value:function(){var e=this.publicApiKey||i.default.queryObj().public_api_key||window._affirm_config&&(window._affirm_config.public_api_key||window._affirm_config.publicApiKey);return-1===p.indexOf(e)?e:null}},{key:"setPublicApiKey",value:function(e){var t=this;this.publicApiKey=e,a.default.tag({public_api_key:e}),i.default.delay(function(){t.trigger("public_api_key_set")})}}])&&c(t.prototype,n),o&&c(t,o),u}()),m=(0,o.default)(h,["checkPublicApiKey","getPublicApiKey","off","on","setPublicApiKey","trigger"]);t.default=m},function(e,t,n){"use strict";function r(e,t){for(var n,r=t,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if("string"==typeof t&&(r=e,i.push(t)),!i.length)throw new Error("bindAll requires at least one method name to bind");i.forEach(function(t){if("function"!=typeof(n=e[t]))throw new Error(t+" is not a method on object");e[t]=n.bind(r)})}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";n.r(t),t.default={bind:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbind:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(10)),o=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default,s=(0,o.default)(a,["off","on","trigger"]);t.default=s},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.on=this.on.bind(this),this.off=this.off.bind(this),this.trigger=this.trigger.bind(this),this.logError=this.logError.bind(this),this.name=t||"AFFIRM_ELEMENT_".concat(Math.round(10*Math.random())),this.uuid="".concat(10*Math.random()).replace(/\./,"-"),this.on("error",this.logError)}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){n.events[e]||(n.events[e]=[]),n.events[e].push(t)}),this}},{key:"off",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){return window.setTimeout(function(){if(n.events[e]){var r=-1;if(Object.keys(n.events[e]).forEach(function(){}),r>=0)return n.events[e].splice(r,1)}})})}},{key:"trigger",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e;"string"==typeof o&&(o=[o]),this.events||(this.events={});var i=[];return o.forEach(function(e){n.events[e]&&n.events[e].forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)}),r&&n.events.all&&n.events.all.forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)})}),i}},{key:"logError",value:function(e,t){var n=t,o=e;"object"===r(e)&&e.data&&(n=e.data.data||{},o=e.data.error_name);var i="Affirm Error (".concat(this.name,"):");try{return console.log(i,o,n)}catch(e){return}}}])&&o(t.prototype,n),i&&o(t,i),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(45)),o=l(n(118)),i=l(n(0)),a=l(n(44)),s=l(n(7)),u=l(n(120)),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.default);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u={width:o.default.DEFAULT_OPTIONS.popupWidth};if(!(e=t.call(this,i.default.extend({popupCss:u},a))).constructor.isValidMode(r.mode))throw new Error(e.constructor.INVALID_MODE_ERROR);return e.config=i.default.extend({},r),(0,s.default)(y(e),"configureMessaging","startConfiguringMessaging"),e}return h(n,[{key:"configPayload",get:function(){return{id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID}}},{key:"targetWindow",get:function(){return this.config.mode===n.MODE_MODAL?this.$iframe.contentWindow:this.config.mode===n.MODE_POPUP?this.popup&&this.popup.popupWindow:null}}],[{key:"determineMode",value:function(e){return n.isModalSupported().then(function(e){return e}).catch(function(){return!1}).then(function(t){var r=e||n.MODE_UNSUPPORTED;return r!==n.MODE_MODAL||t||(r=n.MODE_POPUP),r!==n.MODE_POPUP||n.isPopupSupported()||(r=t?n.MODE_MODAL:n.MODE_UNSUPPORTED),r})}},{key:"isModalSupported",value:function(){var e;return e=i.default.sniffer.promises&&i.default.sniffer.promises.thirdPartyCookies?i.default.sniffer.promises.thirdPartyCookies:a.default.thirdPartyCookies(),(0,u.default)(e,500).catch(function(){return!1})}},{key:"isPopupSupported",value:function(){}},{key:"isValidMode",value:function(){}},{key:"APP_NAME",get:function(){return"modal-popup-widget"}},{key:"INVALID_MODE_ERROR",get:function(){return"Widget mode must either be 'modal' or 'popup'"}},{key:"MAX_CONFIG_ATTEMPTS",get:function(){return 50}},{key:"MODE_MODAL",get:function(){return"modal"}},{key:"MODE_POPUP",get:function(){return"popup"}},{key:"MODE_UNSUPPORTED",get:function(){return"unsupported"}},{key:"POPUP_TIMEOUT",get:function(){return 0}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_MESSAGES"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Please click continue if you don't see the Affirm pop-up window. You may need to turn off your pop-up blocker."}}]),h(n,[{key:"clearTimers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config.mode===n.MODE_POPUP&&this.popup&&this.popup.clearTimer(),clearInterval(this.payloadMessageTimer),delete this.payloadMessageTimer,e&&"Affirm Checkout"===this.constructor.APP_NAME&&c.default.trackActionLog("AFJS_post_message_config_succeeded",{elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri})}},{key:"close",value:function(e){this.clearTimers(),this.config.mode===n.MODE_MODAL?d(v(n.prototype),"close",this).call(this,e):this.config.mode===n.MODE_POPUP?(this.trigger("hiding"),this.popup&&this.popup.close(e)):"function"==typeof e&&e()}},{key:"configureMessaging",value:function(e){var t="function"==typeof window.postMessage;this.payloadMessageCounter<this.constructor.MAX_CONFIG_ATTEMPTS?(this.postMessage(e||this.configPayload),this.payloadMessageCounter+=1):(this.clearTimers(),c.default.trackActionLog("AFJS_post_message_config_failed",{checkoutAri:this.config.checkoutAri,elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,isPostMessageSupported:t,widgetMode:this.config.mode,widgetType:this.constructor.APP_NAME}))}},{key:"open",value:function(e){this.widgetOpenTime=Date.now(),"Affirm Checkout"===this.constructor.APP_NAME&&c.default.trackActionLog("AFJS_open_checkout_modal_popup_widget",{widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri}),this.config.mode===n.MODE_MODAL?(d(v(n.prototype),"open",this).call(this,e),this.startConfiguringMessaging()):this.config.mode===n.MODE_POPUP?(this.popup||(this.popup=new o.default({popupName:this.constructor.APP_NAME,popupOverlayMessage:this.constructor.POPUP_OVERLAY_MESSAGE,popupTimeout:this.constructor.POPUP_TIMEOUT,popupWidth:this.options.popupCss.width,src:this.options.src})),this.popup.open(this.onPopupOpen.bind(this,e))):"function"==typeof e&&e()}},{key:"onPopupOpen",value:function(e){this.options.src&&setTimeout(this.startConfiguringMessaging,500),"function"==typeof e&&e()}},{key:"postMessage",value:function(e){if(this.config.mode===n.MODE_MODAL)d(v(n.prototype),"postMessage",this).call(this,e);else if(this.config.mode===n.MODE_POPUP&&this.options.src){var t=i.default.extend({id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID},e);this.targetWindow&&this.targetWindow.postMessage(JSON.stringify(t),i.default.getDomain(this.options.src))}}},{key:"startConfiguringMessaging",value:function(e){var t=this;this.payloadMessageTimer||(this.payloadMessageCounter=0,this.payloadMessageTimer=setInterval(function(){return t.configureMessaging(e)},500))}},{key:"updatePopupSource",value:function(e,t){this.options.src=e,this.popup.updateSource(e),setTimeout(this.startConfiguringMessaging,500),"function"==typeof t&&t()}}]),n}();t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={instance:e};return t.forEach(function(t){n[t]=e[t].bind(e)}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=t.get=t.isValidItems=t.validateCheckoutAri=t.applyLigatures=t.addInsertListener=t.childWindowParams=t.setLocalStorage=t.moneyWithCents=t.indexOf=void 0;t.indexOf=function(e,t){for(var n=0;void 0!==e[n];){if(e[n]===t)return n;n+=1}return-1};t.moneyWithCents=function(e){return(parseInt(e,10)/100).toFixed(2)};t.setLocalStorage=function(e,t){return localStorage.setItem(e,JSON.stringify(t))};t.childWindowParams=function(e){var t=void 0!==window.screenX?window.screenX:window.screenLeft,n=void 0!==window.screenY?window.screenY:window.screenTop,r=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,o=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,i=Math.max(t,0),a=.8*o,s=parseInt(e,10),u=parseInt(i+(r-s)/2,10),c=parseInt(n+(o-a)/2.5,10);return"width=".concat(s,", height=").concat(a,", left=").concat(u,", top=").concat(c,", toolbar=0, scrollbars=1")};t.addInsertListener=function(e,t){var n=function(){};document.addEventListener&&(document.addEventListener("animationstart",n,!1),document.addEventListener("MSAnimationStart",n,!1),document.addEventListener("webkitAnimationStart",n,!1))};t.applyLigatures=function(e,t){if(e){var n=e.innerText,r=e.innerHTML,o=t[n||r];o&&e.classList.add("__ligature__".concat(o,"__")),e.classList.add("__processed")}};t.validateCheckoutAri=function(e){return!(!e||16!==e.length||null!==e.match(/[\Wa-z]{1,}/))};t.isValidItems=function(e){return!(!Array.isArray(e)||!e.length)&&e.every(function(){})};t.get=function e(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t&&t[n]&&(o.length?e.apply(void 0,[t[n]].concat(o)):t[n])};t.findIndex=function(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n))return n;return-1}},function(e,t){function n(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function r(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function o(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function(){}e.exports={iosMajorVersion:n,isIosMajorVersion:function(e,t){return n(e)===t},macosxVersion:r,isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var o=r(e),i=o.major,a=o.minor;return n?i===t&&a===n:i===t},chromeMajorVersion:o,isChromeMajorVersion:function(e,t){return o(e)===t},isChromiumBased:i,isSafariBased:function(e){return!i(e)&&Boolean(e.match(/Version\/.* Safari\//))},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(3)),o=c(n(10)),i=c(n(0)),a=c(n(1)),s=c(n(7)),u=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,o.default);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,r.name)).options=r,e.generateFrame(),(0,s.default)(g(e),"handlePostMessage","handleResizeEvent"),e.on("resize",e.handleResizeEvent),u.default.bind(window,"message",e.handlePostMessage),window["_affirm_post_message_".concat(e.name)]=function(){},e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm"}},{key:"IFRAME_CLASSNAME",get:function(){return"affirm-sandbox-iframe"}},{key:"RESIZE_INTERVAL",get:function(){return 500}},{key:"SANDBOX_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-container"}},{key:"SANDBOX_PERMISSIONS",get:function(){return{"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-same-origin":!0,"allow-scripts":!0}}}]),p(n,[{key:"generateFrame",value:function(){var e=this;this.cssOptions=i.default.extend({overflow:"hidden",width:"100%",height:"100%"},this.options.css||{});var t=document.createElement("div");t.className=n.SANDBOX_CONTAINER_CLASSNAME,this.options.iframe_container_css&&i.default.setElementStyle(t,this.options.iframe_container_css);var r=document.createElement("iframe");return r.className=n.IFRAME_CLASSNAME,i.default.setElementAttrs(r,{id:this.name,width:this.cssOptions.width,height:this.cssOptions.height,frameborder:0,allowScroll:"no",allowTransparency:!0,sandbox:Object.keys(this.constructor.SANDBOX_PERMISSIONS||{}).join(" "),title:this.constructor.APP_NAME}),i.default.isObject(this.cssOptions)&&Object.keys(this.cssOptions).forEach(function(t){r.style[t]=e.cssOptions[t]}),this.defaultContainerDisplayStyle=(null!=this.options.iframe_container_css?this.options.iframe_container_css.display:void 0)||"block",t.style.display="none",this.$iframe=r,this.$iframe_container=t,this.orientation=window.orientation,this.bind("ready",function(){return e.trigger("ready")}),this.$iframe_container}},{key:"handlePostMessage",value:function(e){var t,n=e||{data:""};try{t=JSON.parse(n.data)}catch(e){t={}}var r=new RegExp("".concat(this.name,"_"));if(t&&t.name&&t.name.match(r)){var o=t.name.replace(r,"").toLowerCase(),i=t.data||{};this.trigger(o,i)}}},{key:"regenerateIfAlreadyAppended",value:function(){if(!this.isOrphan()&&this.$iframe_container.parentNode){var e=this.$iframe_container.style.display;this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.generateFrame(),this.$iframe_container.style.display=e}}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.$iframe_container.appendChild(this.$iframe),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"content",value:function(e){if(this.isOrphan())return this.logError("Tried to set content on orphaned iframe",{content:e}),this;var t=this.$iframe.contentWindow.document;return this.write(e),this.write(this.insertPostMessageSender()),this.write(this.insertPostMessageReceiver()),this.write(n.insertResizeListener()),t.close(),this}},{key:"write",value:function(e){try{this.$iframe.contentWindow.document.write(e)}catch(e){}}},{key:"insertPostMessageSender",value:function(){return["<scr","ipt"," defer='defer'>","window.trigger = function(name,data){","try{","_name = '".concat(this.name,"_' + name;"),"_d = JSON.stringify({ name: _name, data: data });","window.parent.postMessage( _d, '".concat(document.location.origin,"' );"),"} catch(e) {","window.parent._affirm_post_message_".concat(this.name,"(name, data);"),"}","}","</scr","ipt>"].join("")}},{key:"insertPostMessageReceiver",value:function(){return["<scr","ipt"," defer='defer'>","if(window.addEventListener){","_action = 'addEventListener';","_event  = 'message';","} else {","_action = 'attachEvent';","_event  = 'onmessage';","}","window[_action](_event, function(ev){","var _event = ev || {data:''},","_namespace_regex = new RegExp('".concat(this.name,"_');"),"try{","_data = JSON.parse(_event.data);","} catch (e){","_data = {};","}","if(_data && _data.name && _data.name.match(_namespace_regex)){","var _n = _data.name.replace(_namespace_regex, '').toLowerCase();","var _d = _data.data || {};","try{","if (window.affirm_events && window.affirm_events[_n]) {","window.affirm_events[_n].call(window,_d);","}","}catch(e){}","}","});","</scr","ipt>"].join("")}},{key:"handleResizeEvent",value:function(e,t){var n=this,r=t||e||{},o=this.orientation;if(this.orientation=window.orientation,window.orientation!==o&&(i.default.swapStyle(this.$iframe_container,"top","bottom"),i.default.swapStyle(this.$iframe_container,"left","right"),this.$iframe_container.style.width)){var a=this.$iframe_container.style.width;this.$iframe_container.style.width="",window.requestAnimationFrame(function(){n.$iframe_container.style.width=a})}r.height&&this.$iframe.scrollHeight<r.height&&(this.$iframe.style.height=r.height+100)}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.data||t;f(y(n.prototype),"trigger",this).call(this,e,o);var s={name:"".concat(this.name,"_").concat(e),data:o};try{s=JSON.stringify(s)}catch(e){s=""}var u=i.default.getDomain(this.src())!==i.default.getDomain(window.location.href);if(r&&(u||!this.isOrphan())){var c=this.getTargetWindow();c?c.postMessage(s,this.origin()):a.default.trackActionLog("Post message error: target window not found on event trigger")}}},{key:"origin",value:function(){return(this.src()||document.location.href).split("/").slice(0,3).join("/")}},{key:"isOrphan",value:function(){try{return!(this.$iframe&&this.$iframe.contentWindow&&this.$iframe.contentWindow.document)}catch(e){return!this.$iframe.parentNode}}},{key:"bind",value:function(){}},{key:"unbind",value:function(e,t){u.default.unbind(this.$iframe(e,t))}},{key:"src",value:function(e){if(!e)try{return this.$iframe.getAttribute("src")}catch(e){return this.$iframe.src}return i.default.setElementAttrs(this.$iframe,{src:e}),this}},{key:"hide",value:function(){return this.trigger("hiding",{},!1),this.$iframe_container.style.display="none",this}},{key:"show",value:function(){return this.activeElementBeforeShown=document.activeElement,this.trigger("showing",{},!1),this.$iframe_container.style.display=this.defaultContainerDisplayStyle,this}},{key:"remove",value:function(){return u.default.unbind(window,"message",this.handlePostMessage),this.$iframe_container.parentNode&&this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.trigger("remove",{},!1),this}},{key:"getTargetWindow",value:function(){return this.$iframe.contentWindow}}],[{key:"insertResizeListener",value:function(){return["<scr","ipt"," defer='defer'>","(function(){","function getHeight(){","var body = document.body, html = document.documentElement,","max_height = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );","return body.scrollHeight;","}","var _current_height = 0;","setInterval(function(){","if(_current_height != getHeight()){","trigger('resize', {height: getHeight()});","_current_height = getHeight();","}","}, ".concat(n.RESIZE_INTERVAL,");"),"}());","</scr","ipt>"].join("")}},{key:"postMessageHasValidOrigin",value:function(e){return e.origin===r.default.frontend_url.replace(/\/$/,"")}},{key:"parsePostMessageData",value:function(e){var t=null;if(n.postMessageHasValidOrigin(e)&&"string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}return t}}]),n}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(10)),o=s(n(12)),i=s(n(0)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function(){}return t=u,(n=[{key:"get",value:function(){return this.data}},{key:"resetPrequal",value:function(){}},{key:"set",value:function(e){i.default.throwErrIfNotObject(e),this.data=e,a.default.trackActionLog("Prequal Config Set",{keys:Object.keys(this.data).join(",")}),this.trigger("set",this.data)}},{key:"updatePrequal",value:function(e){i.default.throwErrIfNotObject(e),this.data=Object.assign(this.data,e),this.trigger("update",this.data)}}])&&c(t.prototype,n),o&&c(t,o),u}()),h=(0,o.default)(p,["get","resetPrequal","set","updatePrequal"]);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=y(n(2)),o=n(22),i=y(n(30)),a=y(n(6)),s=y(n(3)),u=y(n(9)),c=n(19),l=y(n(11)),f=y(n(15)),d=y(n(0)),p=y(n(1)),h=y(n(7)),m=y(n(32)),g=y(n(8));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;return k(e)}(this,n)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=d.default.getFrontendUrl(s.default.resource_urls.prequal_backend_route),I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,l.default);var t=E(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=Object.assign({mode:r.mode||l.default.MODE_MODAL},r);return(e=t.call(this,i,Object.assign({name:"prequal-application",popupCss:{width:"500px"},src:n.constructURL(r.urlParams)},o))).isPrequalComplete=!1,(0,h.default)(k(e),"postMessageListener"),e.on("prequalFinished",function(){}),e}return _(n,[{key:"configPayload",get:function(){var e=this.config,t=e.merchant||{};return t.name=e.merchant_name,t.public_api_key=a.default.getPublicApiKey(),Object.assign({id:this.currentPostMessageId||n.POST_MESSAGE_ID,merchant:t,meta:{__affirm_tracking_uuid:r.default.localDeviceId,user_timezone:d.default.getUserTimeZone()},referring_url:window.location.href},this.config)}},{key:"defaultOptions",get:function(){var e=O(S(n.prototype),"defaultOptions",this);return e.resizeHeight=!0,e}}],[{key:"generatePromoPrequalConfig",value:function(e,t,n,o){return A({},e,{urlParams:{device_id:r.default.localDeviceId,merchant_name:e.merchant_name,promo_external_id:t.promoId,referring_url:encodeURIComponent(o),unit_price:t.amount,webhook_session_id:e.webhook_session_id||d.default.getWebhookSessionId(),use_promo:e.use_promo||"",page_type:t.page_type,cohort_id:t.cohort_id},mode:n,page_type:"home"})}},{key:"constructURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=A({public_api_key:a.default.getPublicApiKey()},e);return"".concat(P,"?").concat(n.urlParamsToQueryString(t))}},{key:"urlParamsToQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.default)(e,function(e){return null!==e&&void 0!==e});return e&&Object.keys(t).length?"".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}},{key:"APP_NAME",get:function(){return"Affirm Prequal"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Select continue, or turn off your pop-up blocker."}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_PREQUAL_MESSAGES"}}]),_(n,[{key:"close",value:function(e){var t=this;g.default.unbind(window,"message",this.postMessageListener),O(S(n.prototype),"close",this).call(this,function(){t.isPrequalComplete||t.unload(),u.default.trigger("prequal:close"),"function"==typeof e&&e()})}},{key:"open",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.default.bind(window,"message",this.postMessageListener),l.default.determineMode(r.mode||this.config.mode||l.default.MODE_MODAL).then(function(o){if(o===l.default.MODE_UNSUPPORTED)return(0,c.showError)({body:"Affirm Prequal requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),void("function"==typeof e&&e());t.config=Object.assign(t.config,r,{mode:o}),o===l.default.MODE_MODAL?p.default.trackImpression("Prequal Modal Page"):o===n.MODE_POPUP&&p.default.trackImpression("Prequal Popup Page"),O(S(n.prototype),"open",t).call(t,e)})}},{key:"postMessageListener",value:function(e){var t=f.default.parsePostMessageData(e);if(t&&t.id===n.POST_MESSAGE_ID)switch(t.name){case"AFFIRM_PREQUAL_FINISHED":p.default.trackActionLog("Prequal Finished"),this.isPrequalComplete=!0,u.default.trigger("prequal:complete",t.data),this.trigger("prequalFinished",t.data);break;case"AFFIRM_PREQUAL_SIGNED_OUT":this.trigger("prequalSignedOut");break;case"AFFIRM_PREQUAL_CLOSE":this.close(),i.default.open(o.Apps.toast,{forceShow:!0,onSuccess:!0});break;case"AFFIRM_PREQUAL_INIT":this.clearTimers(!0)}}},{key:"unload",value:function(){O(S(n.prototype),"unload",this).call(this),g.default.unbind(window,"message",this.postMessageListener)}}]),n}();t.default=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n(6)),o=v(n(50)),i=v(n(33)),a=v(n(3)),s=v(n(16)),u=v(n(20)),c=v(n(9)),l=n(59),f=v(n(11)),d=v(n(31)),p=v(n(17)),h=v(n(60)),m=n(13),g=v(n(0)),y=v(n(1));function v(e){return e&&e.__esModule?e:{default:e}}function A(e){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O="Subject to credit check and approval. Down payment may be required. For purchases under $100, limited payment options are available. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",S="Make easy monthly payments over 3, 6, or 12 months",P="Make easy monthly payments for your purchase",I="Rates from 10&ndash;30% APR.",T="Rates from 0&ndash;30% APR.",M="${payment}/mo based on a purchase price of ${amount} at 0% APR for {term_length} months. Rates from 0&ndash;30% APR.",C="${payment}/mo based on a purchase price of ${amount} at 10% APR for {term_length} months. Rates from 10&ndash;30% APR.",R="XXXXXXXXXXXXXXX",x={quick_and_easy:{icon:"quick",header:"Quick and easy",body:"Enter a few pieces of information for a real-time decision. Checking your eligibility won't affect your credit score."},no_hidden_fees:{icon:"transparent",header:"No hidden fees",body:"Know up front exactly what you'll owe, with no hidden costs and no surprises."},select_affirm_at_checkout:{icon:"bag",header:"Just select Affirm at checkout",body:"Just a few pieces of information is all it takes to get a real-time decision."},make_interest_free_payments:{icon:"loan",header:"Pay monthly without interest",body:"Your purchase is split up into three payments. There’s no interest—and never any hidden fees!"}},j="Multicolor Affirm Logo cta",D="Multicolor Affirm Logo cta - just select Affirm at checkout",N="Product Page Promo Modal",L="Site Wide Promo Modal",F={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",apr:.1,termLength:12,footer:O,styles:{}},U={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",footer:O,styles:{}},B=window.devicePixelRatio>1,H={},q={};function W(e,t,n){var r="";return e||(r+="affirm-no-hero-image "),t||(r+="affirm-merchant-no-logo "),"fast"===n&&(r+="affirm_fast "),r}function Q(e,t){var n=r.default.getPublicApiKey();if(!t)return"product_page_modal"===e?i.default.getPromoConfig(n,e,t,F):i.default.getPromoConfig(n,e,t,U);if(h.default.isPromoSet(t))return"product_page_modal"===e?h.default.getConfig(t,"productPageModal"):h.default.getConfig(t,"siteWideModal");var o="affirm-modal:".concat(n,":").concat(e,":").concat(t);if(!H[o]){var s="".concat(a.default.promos_url_prefix).concat(e,"/").concat(n,"/").concat(t,".json");H[o]=fetch(s).then(function(n){return n.json().then(function(e){return(0,m.setLocalStorage)(o,e),e}).catch(function(){return console.error("Error while retrieving the modal config ".concat(e," ").concat(t,". Returning Default")),Q(e)})})}return H[o]}function V(e,t){var a=n(35),u=t.modalId,c=t.promoId,l=t.type,d=t.amount&&parseFloat(t.amount);"product_page_modal"===l?y.default.trackUserInteraction(N,y.default.USER_ACTIONS.CLICK):y.default.trackUserInteraction(L,y.default.USER_ACTIONS.CLICK);var m=null;(m=c||u)===R&&(m=void 0);var v=r.default.getPublicApiKey();return i.default.useV2Api(v,m)?i.default.getPromoResponse(v,{amount:d,pageType:t.pageType,promoId:m},i.default.TEMPLATE_FIELD.modal).then(function(n){y.default.trackEvent("LearnMoreWidget: openModal",{promoResponse:n});return-1!==["J5E24QQQJ9ZL9LMD","8F5E01N5KIO60DJ6","ZPQY8VGE0U8Y6WP2","5X8V8MQUX8VFYCME","D3ACIW1WYYJXNX1M"].indexOf(v)?new G({DOMNode:e,renderedPromo:n.promo}):o.default.getFinancingExperimentCohortId(v).then(function(e){var n="".concat(l,"/").concat(m,"/").concat(d,"/").concat(t.pageType);q[n]||(q[n]=new p.default(p.default.generatePromoPrequalConfig(Object.assign(s.default.get(),{use_promo:!0}),{amount:d,cohort_id:e,page_type:t.pageType,promoId:m},f.default.MODE_MODAL,window.location.href))),q[n].open()})}):Q(l,m).then(function(e){var t=Object.assign({},e);if(t.promoId=m,d){var n,r,o;if(t.amount=d,t.termLengthIntervals&&(r=h.default.getTermLengthIntervalForAmount(t.termLengthIntervals,d)),r)n=r.apr,o=r.termLength;else n=t.apr,o=t.termLength;return a.getEstimate({apr:n,amount:d,months:o}).then(function(e){var r={};return g.default.extend(r,t),r.amount=d,r.apr=n,r.months=o,r.payment=e.payment,r.termLength=e.months||o,r})}return t}).catch(function(){return Q(l).then(function(e){if(d){var t=e.apr,n=e.termLength;return a.getEstimate({apr:t,amount:d,months:n}).then(function(r){var o={};return g.default.extend(o,e),o.payment=r.payment,o.amount=d,o.months=n,o.termLength=r.months||n,o.apr=t,o})}return e})}).then(function(n){var r,o=Object.assign({},n);if(o.promo_prequal_enabled){var i="".concat(l,"/").concat(o.promoId,"/").concat(d,"/").concat(t.pageType);q[i]||(h.default.isPromoSet(o.promoId)||(o.promoId=null),r=new p.default(p.default.generatePromoPrequalConfig(Object.assign(s.default.get(),{use_promo:!0}),o,f.default.MODE_MODAL,window.location.href)),q[i]=r),q[i].open()}else r=new G({amount:o.amount,apr:o.apr,config:o,DOMNode:e,months:o.months,payment:o.payment,termLength:o.termLength});return r})}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,d.default);var t,n,r,o=w(i);function i(){var e,t,n,r,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var f=s.DOMNode;delete s.DOMNode;var d=B?"2x":"",p="";if(s.renderedPromo){(n=s.renderedPromo.config.images["hero".concat(d)])&&(n="background-image: url('".concat(n,"')")),r=s.renderedPromo.config.images["logo".concat(d)],t="";var h=s.renderedPromo.config.promo_style;"fast"!==h&&(y.default.trackImpression(j),t=s.renderedPromo.button.replace(/affirm/gi,'<span class="__affirm-logo __affirm-logo-blue __ligature__affirm_full_logo__ __processed">Affirm</span>')),e=o.call(this,g.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:s.renderedPromo.config.styles.color||"auto",copy:{tagline:s.renderedPromo.headline,promo:s.renderedPromo.tagline,cta:t,section_1:i.getSection(s.renderedPromo.content_space_1),section_2:i.getSection(s.renderedPromo.content_space_2)},fontFamily:s.renderedPromo.config.styles.fontFamily||"inherit",footer:s.renderedPromo.footer,hero_image:n,logo_image:r,modal_class:W(n,r,h)}},s))}else{var v,A,b,_=!!s.amount;v=_?F:U,a={},g.default.extend(a,v),g.default.extend(a,s.config),g.default.isMobile()&&s.source&&("function"==typeof s.source.trigger&&s.source.trigger("loading"),null!=s.source.product_key&&u.default.setProduct(s.source.product_key)),n=a["heroImage".concat(d)],r=a["logo".concat(d)];var w=null!=s.apr&&0===parseFloat(s.apr);if(_){t="",b=a.pricingTemplate;var k=a&&0===a.apr&&3===a.termLength&&a.termLengthIntervals&&1===a.termLengthIntervals.length;k?p+="affirm_fast ":(y.default.trackImpression(D),t='Just select <span class="__affirm-logo __affirm-logo-blue __ligature__affirm_full_logo__ __processed">Affirm</span> at checkout.'),b||k||(b=w?M:C),b=(b=(b=(b=b.replace(/{payment}/gi,"$".concat((0,m.moneyWithCents)(s.payment)))).replace(/{amount}/gi,"$".concat((0,m.moneyWithCents)(s.amount)))).replace(/{apr}/gi,parseInt(100*s.apr,10))).replace(/{term_length}/gi,s.termLength),A=a.headlineTemplate}else{(b=a.pricing)||(b=w?T:I),A=a.headline}if(!A)A=!s.termLength||[3,6,12].indexOf(s.termLength)>-1?S:P;n&&(n="background-image: url('".concat(n,"')")),p+=W(n,r),e=o.call(this,g.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:a.styles.color||"auto",copy:{tagline:A,promo:b,cta:t,section_1:i.getSection(a.contentSpace1),section_2:i.getSection(a.contentSpace2)},fontFamily:a.styles.fontFamily||"inherit",footer:a.footer,hero_image:n,logo_image:r,modal_class:p}},s))}e.on("continue",function(){return e.trigger("close")});var O=!1;return a=(0,l.findAffirmConfig)(f),e.on("close",function(){O||((a=(0,l.findAffirmConfig)(f))&&"function"==typeof a.onCloseModal&&a.onCloseModal(),O=!0,c.default.trigger("learnMore:close"))}),e.open(a?a.onOpenModal:void 0),s.DOMNode=f,E(e)}return t=i,r=[{key:"getSection",value:function(e){return x[e]}},{key:"openModal",value:function(e,t){return V(e,t)}},{key:"setupSiteElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-modal-id"),a=t.getAttribute("data-page-type")||"product",s=t.getAttribute("data-promo-id");t.getAttribute("data-amount")&&console&&console.error("Affirm: data-amount not valid in site modals. Element",t),t.style.cursor||(t.style.cursor="pointer");var u={modalId:i,pageType:a,promoId:s,type:"site_wide_modal"};(0,l.setAffirmConfig)(t,u);var c=s||i;c?y.default.trackImpression("Custom ".concat(L)):y.default.trackImpression("Default ".concat(L)),h.default.isPromoSet(c)&&y.default.trackImpression("Promo Set Promo Modal");var f=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(f," (opens in modal)")),t.onclick=function(e,t){return function(){return V(e,t)}}(t,u),n.trackPromos&&y.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"site"})}}},{key:"setupProductElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-amount"),a=t.getAttribute("data-modal-id"),s=t.getAttribute("data-page-type"),u=t.getAttribute("data-promo-id");console&&(i||console.error("Affirm: data-amount attribute is required in product modals",t),i<5e3&&console.error("Affirm: data-amount is lower than the minimum ($50)."),i>175e4&&console.error("Affirm: data-amount is higher than the maximum ($17500).")),t.style.cursor||(t.style.cursor="pointer");var c={amount:i,modalId:a,pageType:s,promoId:u,type:"product_page_modal"};(0,l.setAffirmConfig)(t,c);var f=u||a;f?y.default.trackImpression("Custom ".concat(N)):y.default.trackImpression("Default ".concat(N)),h.default.isPromoSet(f)&&y.default.trackImpression("Promo Set Promo Modal");var d=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(d," (opens in modal)")),t.onclick=function(){}(t,c),n.trackPromos&&y.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"product"})}}},{key:"APP_NAME",get:function(){return"Learn More About Affirm"}}],(n=null)&&b(t.prototype,n),r&&b(t,r),i}();t.default=G},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showError=v,t.ErrorModalWidget=void 0;var r=c(n(3)),o=c(n(10)),i=c(n(45)),a=c(n(0)),s=c(n(7)),u=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(!a.default.sniffer.cors||!a.default.sniffer.JSON){var t=a.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",title:"We encountered a problem with your checkout."},e);return alert("".concat(t.title,"\n\n").concat(t.body)),v.trigger("close")}var n=new A(e);return n.open(),n}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,i.default);var t=m(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=a.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",merchantName:r.default&&r.default.merchant||"the Merchant",title:"We encountered a problem with your checkout."},o),c={name:"affirm-error-modal",src:"".concat(r.default.assets_root.replace("affirmjs","afjs_error_modal"),"index.html?").concat(a.default.param(i,!1))};return o.container&&o.iframe_container_css&&(c.container=o.container,c.iframe_container_css=o.iframe_container_css),(e=t.call(this,c)).on("all",function(e,t){return v.trigger(t,e,!1)}),(0,s.default)(g(e),"postMessageListener"),u.default.bind(window,"message",e.postMessageListener),e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm Error"}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_ERROR_MESSAGES"}}]),p(n,[{key:"hide",value:function(){var e=this;f(y(n.prototype),"hide",this).call(this),this.trigger("close"),a.default.delay(function(){return e.remove()},300)}},{key:"postMessageListener",value:function(e){var t;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}t&&t.id===n.POST_MESSAGE_ID&&"close"===t.name&&this.hide()}}]),n}();t.ErrorModalWidget=A,["on","off","trigger"].forEach(function(e){v[e]=o.default.prototype[e]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(n(2)),o=h(n(6)),i=h(n(3)),a=h(n(10)),s=h(n(28)),u=h(n(112)),c=h(n(29)),l=h(n(116)),f=h(n(11)),d=h(n(0)),p=h(n(1));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){"@babel/helpers - typeof";return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v.set(e)}["on","off","trigger"].forEach(function(){}),d.default.extend(v,{add:function(){var e=this;this.data.items||(this.data.items={});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){[].concat(t).forEach(function(t){var n=t;["sku","unit_price"].forEach(function(e){if(null==n[e])throw"No ".concat(e," given for item")}),n.qty||(n.qty=1),["qty","unit_price"].forEach(function(e){if(n[e]=parseInt(n[e],10),"NaN"===n[e].toString())throw"item ".concat(e," must be an integer")}),e.data.items[n.sku]&&e.data.items[n.sku].sku===n.sku?e.data.items[n.sku].qty+=parseInt(n.qty,10):e.data.items[n.sku]=n})}),this},attr:function(e,t){if("items"===e)return t&&this.items()?(this.empty(),this.add(t)):this.items();if(["productKey","financial_product_key"].indexOf(e)>-1)return null!=t?this.setProduct(t):this.getProduct();if(["publicApiKey","public_api_key"].indexOf(e)>-1)return null!=t?o.default.setPublicApiKey(t):o.default.getPublicApiKey();var n,r;n=e.match(/^[^.]+(\.[^.]+)+$/)?e.split("."):e.match(/^[^[\]]+(\[[^[\]]+])+$/)?e.replace("][","]").replace(/]$/,"").split(/]|\[/):[e];for(var i=this.data;r=n.shift();){if(null!=t&&0===n.length)return i[r]=t,this;if(null==i[r]){if(null==t)return null;i[r]={}}i=i[r]}return null!=t?this:i},checkCaasParams:function(e){if("string"!=typeof e.merchant.caas)throw new Error("Caas parameter must be string.");if(!this.isModal(e))throw new Error("Credit as a Service is only compatible with mode modal.")},checkData:function(e,t){var n=this;if(Array.isArray(t)){var r=[];return t.forEach(function(){}),r}if(d.default.isObject(t)){var o={};return Object.keys(t).forEach(function(){}),o}return"name"===e&&"string"==typeof t?{full:t}:void 0===t?null:t},cleanData:function(){return this.checkData(null,d.default.extend({},this.data))},currentProduct:null,empty:function(){},get:function(e){return this.attr(e)},getProduct:function(){return this.currentProduct},init:function(){var e,t=this;this.data={items:{}},this._data=this.data,e=window.affirm.checkout&&window.affirm.checkout._?window.affirm.checkout._:[],d.default.delay(function(){e.forEach(function(e){t[e[0]].apply(t,g(e[1]))}),t.ready()})},isModal:function(e){return e&&e.metadata&&e.metadata.mode===f.default.MODE_MODAL},isReady:!1,items:function(){var e=this;this.data.items||(this.data.items={});var t=[];return d.default.isObject(this.data.items)&&Object.keys(this.data.items).forEach(function(n){t.push(e.data.items[n])}),t},open:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=t.checkout_data&&this.set(t.checkout_data),!(0,u.default)())return!1;var n=this.get("metadata")||{};t.merchant&&t.merchant.use_vcn||p.default.trackEvent("Checkout initiated",{widgetMode:n.mode});var r=d.default.extend({checkoutPayload:Object.assign({},this.payload()),mode:n.mode||"redirect"},this.cleanData());return t.onFail&&(r.onFail=t.onFail),t.onSuccess&&(r.onSuccess=t.onSuccess),this.checkoutWidget||(t.modalContainerId?(r.checkoutPayload.metadata=Object.assign({external_modal:!0},r.checkoutPayload.metadata),this.checkoutWidget=new l.default(r,{container:document.getElementById(t.modalContainerId),iframe_container_css:{position:"relative",height:"100%"}})):this.checkoutWidget=new l.default(r),this.checkoutWidget.on("unload",function(){}),this.checkoutWidget.open()),this},openVcn:function(e){var t=d.default.extend(e,{checkout_data:{merchant:{use_vcn:!0}}}),n=t.checkout_data.metadata||{};if(p.default.trackEvent("VCN Checkout initiated",{widgetMode:n.mode}),n.mode=n.mode||l.default.MODE_POPUP,t.checkout_data.metadata=n,!t.success||!t.error)throw"success and error callbacks must be specified";t.onFail=t.error,t.onSuccess=t.success,delete t.error,delete t.success,this.open(t)},payload:function(){var e=o.default.getPublicApiKey();return d.default.extend({api_version:"v2",bluecore_distinct_id:c.default.getDistinctID(e),bluecore_token:c.default.getToken(e),config:{financial_product_key:v.getProduct()},merchant:{public_api_key:e},meta:{__affirm_tracking_uuid:r.default.localDeviceId,release:null!=(null!=i.default?i.default.version:void 0),user_timezone:d.default.getUserTimeZone()}},this.cleanData())},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.open(d.default.extend(e,{redirect:!0}))},ready:function(e){e?this.isReady?"function"==typeof e&&e():this.on("ready",e):(this.trigger("ready"),this.isReady=!0)},reset:function(){return this.data={items:{}},this._data=this.data,this},set:function(e,t){var n=this;if(!t&&"object"===m(e)){var r=d.default.extend({},e);return["financial_product_key","items","productKey","public_api_key","publicApiKey"].forEach(function(e){r[e]&&(n.attr(e,r[e]),delete r[e])}),this.data=d.default.extend(this.data||{},r),this._data=this.data,l.default.isCaas(this.data)&&this.checkCaasParams(this.data),this.data.config&&this.data.config.public_api_key&&o.default.setPublicApiKey(this.data.config.public_api_key),this}return this.attr(e,t)},setProduct:function(e){var t=this;e!==this.currentProduct&&(this.currentProduct=e,this.trigger("product_changed",this.getProduct()),d.default.delay(function(){return s.default.get(t.currentProduct)})),p.default.tag({productKey:e})}}),v.open_vcn=v.openVcn,v.init();var A=v;t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(3)),o=s(n(0)),i=s(n(113)),a=s(n(23));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={},f={get:function(e,t){l[e]?o.default.delay(function(){return t.call(window,l[e])}):i.default.get(e).then(function(e,n){return t(n)})},put:function(e,t){l[e]=t},render:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t;o.ASSETS_ROOT||(o.ASSETS_ROOT=r.default.assets_root);var i=(0,a.default)(o),s=function(e){return i[e]||""},c=n.match(/{{! *([a-zA-Z0-9$_.]+) *}}/g);c&&c.forEach(function(t){var r=n.indexOf(t),o=u(t.match(/{{! *([a-zA-Z0-9$_.]+) *}}/),2);e=o[1];var i="{{/ *".concat(e," *}}"),a=n.match(i),c=a.index,l=s(e);n=l?(n=n.replace(t,"")).replace(a[0],""):n.substr(0,r)+n.substr(c+a[0].length)});var l=n.match(/{{ *([a-zA-Z0-9$_.]+) *}}/g);return l?(l.forEach(function(e){var t=u(e.match(/{{ *([a-zA-Z0-9$_.]+) *}}/),2)[1],r=s(t);n=n.replace(new RegExp(e),r)}),n):n}};t.default=f},function(e,t,n){"use strict";var r,o,i,a;n.r(t),n.d(t,"Selectors",function(){return r}),n.d(t,"Sources",function(){return o}),n.d(t,"Events",function(){return i}),n.d(t,"Apps",function(){return a}),function(e){e.wrapper="wrapper"}(r||(r={})),function(e){e.merchantConfig="merchantConfig",e.breakpoints="breakpoints"}(o||(o={})),function(e){e.style="style",e.dataRequest="dataRequest",e.dataResponse="dataResponse",e.open="open",e.close="close"}(i||(i={})),function(e){e.prequal="prequal",e.toast="toast"}(a||(a={}))},function(e,t){var n;n=function(e){var t;return null==e&&(e={}),t={},Object.keys(e).forEach(function(r){var o;if(e.hasOwnProperty(r))return Array.isArray(e[r])?t[r+"_json"]=JSON.stringify(e[r]):"object"==typeof e[r]&&null!==e[r]?(o=n(e[r]),Object.keys(o).forEach(function(e){return t[r+"."+e]=o[e]})):t[r]=e[r]}),t},e.exports=n},function(e,t,n){"use strict";function r(e){var t=e&&e.message&&"function"==typeof e.message.toLowerCase&&e.message.toLowerCase()||"";return t.indexOf("failed to fetch")>-1||t.indexOf("network request failed")>-1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return u});var r=n(14),o={};function(){}function a(){var e=navigator.userAgent;return!(!Object(r.isIosMajorVersion)(e,12)&&!Object(r.isMacosxVersion)(e,10,14)||!Object(r.isSafariBased)(e)&&!Object(r.isMacEmbeddedBrowser)(e))||!!(Object(r.isChromiumBased)(e)&&Object(r.chromeMajorVersion)(e)<67)}function s(e,t,n,r,a){try{var s;if(n){var u=new Date(Date.now());u.setTime(u.getTime()+24*n*60*60*1e3),s=u.toUTCString()}else s="";o.buildCookie(e,t,r||"",s,a)}catch(e){i(e)}}function u(){try{o.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return o.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return i(e),!1}}function c(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var i=t.slice(r).join(".");o.buildCookie(e,"",i,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){i(e)}}function l(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){i(e)}return null}o.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",s=n?"; domain="+n:"",u="https:"===location.protocol&&"None"===o?"; Secure":"",c=e+"="+t+i+s+"; path=/";a()?document.cookie=c:document.cookie=c+"; SameSite="+o+u},o.create=s,o.enabled=u,o.erase=c,o.read=l,o.upsert=function(e,t,n,r,o){try{l(e)&&c(e),s(e,t,n,r,o)}catch(e){i(e)}},o.isSameSiteNoneIncompatible=a,t.a=o},function(){},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(0,((r=n(102))&&r.__esModule?r:{default:r}).default)();var o=function(e,t){var n=e.split(".");return function e(t,n,r){var o=n.shift();if(0===n.length){var i;if(o in t)for(i in t[o])t[o].hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=t[o][i]);t[o]=r}else o in t||(t[o]={}),e(t[o],n,r);return t}(window.affirm,n,t)};t.default=o},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(6)),i=c(n(3)),a=(c(n(27)),c(n(0))),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(111));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}var l={};function f(e,t){var n=a.default.getDomain(i.default.assets_root),r="".concat(n,"0/merchant/").concat(o.default.getPublicApiKey(),"/product/").concat(e,"/config.json"),u="_".concat(Math.round(1e14*Math.random()));l.callbacks[u]=function(n){l.products[e]=n;try{t(n)}catch(e){}try{i.default.merchant=n.merchant_name}catch(e){}},l.__callbacks=l.callbacks,s.loadjs("".concat(r,"?callback=affirm.product.__callbacks.").concat(u))}Object.assign(l,{callbacks:[],clearCache:function(){},get:function(e,t){var n=this;if(this.products[e]&&"function"==typeof t)return a.default.delay(function(){return t(n.products[e])});o.default.getPublicApiKey()&&f(e,t),o.default.on("public_api_key_set",function n(){f(e,t),o.default.off("public_api_key_set",n)})},products:{}});var d=l;t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["PreSeededApiKeyDirect","27GDB3KH87ZPDICH","JWT2LAPPJQTDK2SW","ZY2590ABAF62S9KM"],o=function(e){return-1!==r.indexOf(e)},i={getDistinctID:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.cookie&&window.triggermail.lytics.cookie.props&&window.triggermail.lytics.cookie.props.distinct_id},getToken:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.config&&window.triggermail.lytics.config.token}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppRegistry=t.App=void 0;var r=g(n(2)),o=g(n(6)),i=g(n(3)),a=g(n(145)),s=g(n(9)),u=g(n(1)),c=g(n(16)),l=g(n(17)),f=n(22),d=g(n(12)),p=g(n(11)),h=g(n(0)),m=n(13);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T={},M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,a.default);var t=S(n);function n(e){var r;_(this,n);var o=h.default.getFrontendUrl("apps/".concat(e,"/"));return(r=t.call(this,o)).appName=e,r.configKeys=[],r.breakpointIndex=null,r.setupListeners(),r.processBreakpoints(),r.wrapper.setAttribute("data-test-id","".concat(e,"-wrapper")),r.frame.setAttribute("data-test-id","".concat(e,"-frame")),r.frame.setAttribute("title","Affirm ".concat(e)),r}return E(n,[{key:"open",value:function(e){this.send(f.Events.open,I({merchantPublicApiKey:o.default.getPublicApiKey()},e))}},{key:"close",value:function(){k(P(n.prototype),"close",this).call(this),window.removeEventListener("orientationchange",this.processBreakpoints),window.removeEventListener("resize",this.processBreakpoints)}},{key:"setupListeners",value:function(){var e=this;this.on(f.Events.style,this.applyStyles),this.on(f.Events.dataRequest,function(){}),this.on(f.Events.open,function(e){var t=e.app,n=e.data;t===f.Apps.prequal?function(e){if(!T[e]){var t=c.default.get();T[e]=new l.default(I({},t,{urlParams:{unit_price:e,device_id:r.default.localDeviceId,merchant_name:t.merchant_name,referring_url:encodeURIComponent(window.location.href),webhook_session_id:t.webhook_session_id||h.default.getWebhookSessionId()}}))}T[e].open(),T[e]}(n.amount):R.open(t,n)}),s.default.on("config",function(t){e.sendMerchantConfig(t)}),this.on(f.Events.close,function(){return e.close()}),window.addEventListener("orientationchange",function(){return e.processBreakpoints()}),window.addEventListener("resize",function(){return e.processBreakpoints()})}},{key:"handleDataRequest",value:function(e){var t,n=e.source,r=e.query,o=(b(t={},f.Sources.merchantConfig,this.handleMerchantConfigRequest),b(t,f.Sources.breakpoints,this.handleBreakpointRequest),t)[n];o&&o.call(this,r)}},{key:"handleBreakpointRequest",value:function(){}},{key:"getBreakpointIndex",value:function(e){var t=(0,m.findIndex)(this.breakpoints,function(t){return e<=t});return t<0?this.breakpoints.length:t}},{key:"processBreakpoints",value:function(){if(this.breakpoints){var e=this.getBreakpointIndex(window.innerWidth);e!==this.breakpointIndex&&(this.breakpointIndex=e,this.send(f.Events.dataResponse,b({},f.Sources.breakpoints,{breakpointIndex:this.breakpointIndex})))}}},{key:"handleMerchantConfigRequest",value:function(e){var t=e.keys;this.configKeys=t,this.sendMerchantConfig(i.default)}},{key:"getMerchantConfig",value:function(e){var t={};return this.configKeys.forEach(function(n){var r=m.get.apply(void 0,[e].concat(v(n.split("."))));void 0!==r&&(t[n]=r)}),t}},{key:"sendMerchantConfig",value:function(e){var t=this.getMerchantConfig(e);Object.keys(t).length&&this.send(f.Events.dataResponse,b({},f.Sources.merchantConfig,t))}},{key:"applyStyles",value:function(e){var t=e.styles,n=b({},f.Selectors.wrapper,this.wrapper);t.forEach(function(e){var t=e.selector,r=e.style;n[t]&&Object.assign(n[t].style,r)})}}]),n}();t.App=M;var C=function(){function e(){_(this,e),this.appRegistry={},this.eligible=p.default.isModalSupported()}return E(e,[{key:"open",value:function(e,t){var n=this;return this.eligible.then(function(r){try{return r&&(n.appRegistry[e]||(n.appRegistry[e]=new M(e)),n.appRegistry[e].open(t)),r}catch(e){return void u.default.trackActionLog("AppService Open Error",{errorMessage:e&&e.message})}})}},{key:"close",value:function(){}},{key:"reset",value:function(){}}]),e}();t.AppRegistry=C;var R=new C,x=(0,d.default)(R,["close","open","reset"]);t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(46)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r.default);var t=u(n);function n(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a={"-webkit-tap-highlight-color":"transparent",display:"flex",justifyContent:"center",overflowY:"auto",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"};o.default.isMobile()&&(a["-webkit-overflow-scrolling"]="touch",a["-webkit-transform"]="translate3d(0, 0, 0)",a.transform="translate3d(0, 0, 0)",a.overflow="scroll",a.background="#fff");var s=o.default.extend({css:{overflowX:"hidden",overflowY:"auto",height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:a,on:{close:function(){return i.close()}}},e);return i=t.call(this,s)}return n}();t.default=l},function(e,t,n){"use strict";function r(e,t){var n,o=null;return Array.isArray(e)?(o=[],e.forEach(function(e){n=r(e,t),t(n)&&o.push(n)})):null!==e&&"object"==typeof e?(o={},Object.keys(e).forEach(function(i){n=r(e[i],t),t(n)&&(o[i]=n)})):t(e)&&(o=e),o}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(34),o=s(n(0)),i=s(n(1)),a=s(n(32));function s(e){return e&&e.__esModule?e:{default:e}}var u=["TEST_BLACKLISTED_MERCHANT"],c="promo_set",l="api/promos/v2",f={all:"all",ala:"ala",modal:"modal"},d={promo:{ala:"Buy in monthly payments with Affirm on orders over $50. Learn more",html_ala:'Buy in monthly payments with Affirm on orders over $50. <a class="affirm-modal-trigger">Learn more</a>',button:"Just select Affirm at checkout.",config:{calculate_ala_option:"longest_loan_term",images:{hero:null,hero2x:null,logo:null,logo2x:null},promo_prequal_enabled:!1,styles:{color:null,fontFamily:null}},content_space_1:"quick_and_easy",content_space_2:"no_hidden_fees",footer:"Subject to credit check and approval. Down payment may be required. Available for purchases over $50. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",headline:"Make easy monthly payments for your purchase",tagline:"Rates from 10-30% APR"},offer:{terms:[],expiry:null}};var p={getPromoConfig:function(e,t,n,r){var a=o.default.getApiUrl("promos/".concat(e,"/").concat(t));return n&&(a+="?promo_external_id=".concat(n)),window.fetch(a).then(function(e){return e.ok?e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t.message),r})})},getPromoResponse:function(e,t,n){var s=f[n]||f.all,u="".concat(l,"/").concat(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.default)(e,function(e){return""!==e&&null!==e&&void 0!==e});return e&&Object.keys(t).length?"?".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}({amount:t.amount,field:s,items:(0,r.getItemsInput)(t.items),logo_color:t.logoColor,logo_type:t.logoType,page_type:t.pageType,promo_external_id:t.promoId,show_cta:t.showCTA})),c=o.default.getFrontendUrl(u);return window.fetch(c,{credentials:"include"}).then(function(e){return e.ok?e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t.message),d})}).catch(function(e){return i.default.trackAPI(c,500,"Promo fetch error message: ".concat(e?e.message:"FALSY ERROR OBJECT")),d})},useV2Api:function(e,t){var n,r=-1!==u.indexOf(e);return t?(n=t)&&n.indexOf&&0===n.indexOf(c)&&!r:!r},DEFAULT_PROMO_RESPONSE:d,TEMPLATE_FIELD:f};t.default=p},function(e,t,n){"use strict";function(){}Object.defineProperty(t,"__esModule",{value:!0}),t.getItemsInput=function(e){if(!e||!e.length)return null;var t=e.map(r);return JSON.stringify(t)},t.getPublicApiKeyByWindowLocation=function(){var e=window.location.hostname;return e.indexOf("americangirl.com")>-1?"J58O9ZQ92CVD2JUI":e.indexOf("shiekh.com")>-1?"Y7YCRFSNMXGWVY2B":e.indexOf("eshakti.com")>-1?"FDZPOIM536QEZPP5":""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(6)),o=u(n(3)),i=u(n(18)),a=u(n(0)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c={};var l={getEstimate:function(e,t){var n,u=e.amount,l=e.apr,f=e.months,d=r.default.getPublicApiKey(),p=new Date,h="".concat(p.getUTCFullYear(),"/").concat(p.getUTCMonth()+1,"/").concat(p.getUTCDate()),m=[u,l,f,h],g=c[m],y="".concat(a.default.getDomain(o.default.payments_url_base),"promos/payment_estimate_path");return g?n=g:(n=window.fetch("".concat(y,"/").concat(d,"/").concat(l,"/").concat(u,"/").concat(f,"?date=").concat(h)).then(function(e){return e.ok?e.json().then(function(t){return{json:t,status:e.status,url:e.url}}):e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t.message),Promise.reject("Could not get an estimate for apr: ".concat(l,", amount: ").concat(u,", months: ").concat(f,". Error: ").concat(t.error))})}).then(function(t){var n=t.json,r=t.status,o=t.url;s.default.trackAPI(o,r,n.disclosure);var a=n;return a.open_modal=function(t){var n,r,o,c;t&&"function"==typeof t.preventDefault&&t.preventDefault(),s.default.trackUserInteraction("Promo Modal",s.default.USER_ACTIONS.CLICK),new i.default({amount:u,apr:l,disclosure:(n=a.payment,r=a.disclosure,o=Math.floor(n/100),c=n%100,c=c<10?"0".concat(c):c,"$".concat(o,".").concat(c,"/mo ").concat(r[0].toLowerCase()).concat(r.slice(1))),DOMNode:e.elem,months:f,payment:a.payment,termLength:a.months})},a}).catch(function(e){return Promise.reject("Could not get an estimate for apr: ".concat(l,", amount: ").concat(u,", months: ").concat(f,". Error: ").concat(e.error))}),c[m]=n),t&&n.then(t),n}};l.get_estimate=l.getEstimate;var f=l;t.default=f},function(e,t){function n(e){return Array.isArray(e)}function r(e){return"object"==typeof e&&!n(e)}e.exports={isArray:n,isObject:r,isPlainObject:function(){}}},function(e,t){var n=["ssn","cvc","dob","name","phone","email","line1","address","zipcode","ssn_last4","card_number","phone_number","account_number"];e.exports=function e(t,r){if(void 0===t||null===t||"boolean"==typeof t)return t;if("string"==typeof t||"number"==typeof t)return r?(""+t).replace(/[0-9a-z]/gi,"*"):t;if(Array.isArray(t))return t.map(function(t){return e(t,r)});if("object"==typeof t){var o={};return Object.keys(t).forEach(function(i){o[i]=e(t[i],function(e){return-1!==n.indexOf(e)}(i)||r)}),o}return null}},function(e,t,n){var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[c]=u,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={parse:function(){}}},function(e,t,n){var r=n(90),o="?",i=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function a(){return null}function(){}function u(e,t){return{stack:function(){}(),message:e.message,name:function(e){var t=e.name&&e.name.length&&e.name,n=e.constructor.name&&e.constructor.name.length&&e.constructor.name;if(!t||!n)return t||n;if("Error"===t)return n;return t}(e),rawStack:e.stack,rawException:e}}e.exports={guessFunctionName:function(){return o},guessErrorClass:function(){},gatherContext:a,parse:function(){},Stack:u,Frame:s}},function(e,t,n){var r=n(5),o=n(43);function(){}e.exports=function(){}},function(e,t,n){var r=n(5);e.exports=function(){}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(24),i=n(25),a={};a.cookies=i.b,a.cors=function(){return!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)},a.json=function(){try{return window.JSON.parse(window.JSON.stringify({affirmsniffer:!0})),!0}catch(e){return!1}},a.localStorage=function(){try{return window.localStorage.setItem("affirmsniffer","affirmsniffer"),window.localStorage.getItem("affirmsniffer"),window.localStorage.removeItem("affirmsniffer"),!0}catch(e){return!1}},a.postMessage=function(){return!!window.postMessage},a.thirdPartyCookies=function(e,t){return void 0===t&&(t=!1),function(e){return window.fetch(e,{credentials:"include",headers:{Accept:"application/json"},method:"GET"})}(e).then(function(e){return e.json()}).then(function(n){return!!n.cookie_sent||!t&&a.thirdPartyCookies(e,!0)}).catch(function(e){if(Object(o.a)(e))r.default.trackEvent("Third party cookie check failed",{},.1);else{var t=window.Rollbar||window.affirm&&window.affirm.Rollbar;t&&t.error("Error conducting third party cookie check",e)}return!1})},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(46)),o=l(n(15)),i=l(n(0)),a=l(n(7)),s=l(n(8)),u=l(n(115)),c=l(n(49));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.default);var t=g(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var s={"-webkit-tap-highlight-color":"transparent",overflow:"hidden",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"},u={height:"100%",width:"100%",margin:"0",border:"0",padding:"0"};i.default.isMobile()&&(u=i.default.extend({position:"fixed","overflow-y":"scroll","-webkit-overflow-scrolling":"touch","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",background:"#fff"},u));var l=i.default.extend({css:{height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:s,modalCss:u},e);return(o=t.call(this,l)).isIFrameReady=!1,o.options=i.default.extend(o.defaultOptions,o.options),o.options.src=e.src,i.default.isMobile()||(o.scrollbarWidth=c.default.getScrollbarWidth()),(0,a.default)(y(o),"alignModalAndPage","handleBackgroundClick","modalMessageListener","resetBodyPosition","resetModalAndPageAlignment","setBodyPosition"),o.registerWidgetListeners(),o}return h(n,[{key:"defaultOptions",get:function(){}},{key:"targetWindow",get:function(){return this.$iframe.contentWindow}}],[{key:"IFRAME_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-iframe-container"}},{key:"MODAL_MARGIN",get:function(){return 40}}]),h(n,[{key:"alignModalAndPage",value:function(){var e={},t=this.exceedsViewportHeight();if(void 0===this.bodyPosition&&void 0===this.bodyMarginRight&&(this.bodyPosition=document.body.style.position,this.bodyMarginRight=document.body.style.marginRight),this.bodyHasVerticalScroll){var n;try{var r=getComputedStyle(document.body);n=parseInt(r["margin-right"],10)}catch(e){n=0}i.default.setElementStyle(document.body,{position:"relative",marginRight:"".concat(this.scrollbarWidth+n,"px")}),t||0===this.scrollbarWidth?e.marginRight="0":e.marginRight="".concat(this.scrollbarWidth,"px")}else t&&0!==this.scrollbarWidth?e.marginRight="-".concat(this.scrollbarWidth,"px"):e.marginRight="0";i.default.setElementStyle(this.modal,e)}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.modal.appendChild(this.$iframe),this.$iframe_container.appendChild(this.modal),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"exceedsViewportHeight",value:function(){return this.modalContainerHeight+this.modalVerticalMargins>window.innerHeight}},{key:"generateFrame",value:function(){d(v(n.prototype),"generateFrame",this).call(this);var e=document.createElement("div");e.className=n.IFRAME_CONTAINER_CLASSNAME,i.default.setElementStyle(e,this.options.modalCss),this.modal=e}},{key:"handleBackgroundClick",value:function(){}},{key:"maxViewableHeight",value:function(){}},{key:"modalMessageListener",value:function(e){var t=o.default.parsePostMessageData(e);if(t&&t.id===u.default.POST_MESSAGE_ID)switch(t.name){case u.default.IFRAME_DIMENSIONS_MESSAGE:this.resizeModal(t);break;case u.default.IFRAME_READY_MESSAGE:this.isIFrameReady=!0;break;case u.default.REQUEST_PARENT_BOUNDS_MESSAGE:this.sendModalBounds()}}},{key:"open",value:function(e){d(v(n.prototype),"open",this).call(this,e),i.default.isMobile()||this.requestModalContentDimensions()}},{key:"optimizeUiCalculations",value:function(e){this.modalContainerHeight=parseInt(e.modalCss.height,10),this.modalVerticalMargins=parseInt(this.modal.style.marginBottom,10)+parseInt(this.modal.style.marginTop,10),this.scrollbarWidth=c.default.getScrollbarWidth()}},{key:"registerWidgetListeners",value:function(){i.default.isMobile()?(this.on("hiding",this.resetBodyPosition),this.on("showing",this.setBodyPosition)):(this.on("hiding",this.resetModalAndPageAlignment),this.on("showing",this.alignModalAndPage),s.default.bind(this.$iframe_container,"click",this.handleBackgroundClick)),s.default.bind(window,"message",this.modalMessageListener)}},{key:"requestModalContentDimensions",value:function(){}},{key:"resetBodyPosition",value:function(){void 0!==this.bodyPosition&&(i.default.setElementStyle(document.body,{position:this.bodyPosition}),delete this.bodyPosition)}},{key:"resetModalAndPageAlignment",value:function(){i.default.setElementStyle(document.body,{position:this.bodyPosition,marginRight:this.bodyMarginRight}),delete this.bodyPosition,delete this.bodyMarginRight}},{key:"resizeModal",value:function(e){if(e&&e.height&&e.width){var t={},n=e.height>this.modalContainerHeight;if(this.options.resizeHeight&&(n||this.exceedsViewportHeight())){var r=Math.max(e.height,this.maxViewableHeight(),this.options.minModalHeight);t.height="".concat(r,"px"),this.modalContainerHeight=r}this.options.resizeWidth&&(t.width="".concat(e.width,"px")),(t.height||t.width)&&(i.default.setElementStyle(this.modal,t),this.alignModalAndPage())}}},{key:"postMessage",value:function(e){var t=this.src();if(t){var n=i.default.extend({id:u.default.POST_MESSAGE_ID},e);this.isIFrameReady&&this.targetWindow.postMessage(JSON.stringify(n),i.default.getDomain(t))}}},{key:"sendModalBounds",value:function(){var e=Math.round(this.$iframe_container.scrollTop);i.default.isMobile()||(e-=n.MODAL_MARGIN),e=Math.max(e,0);var t=this.modalContainerHeight-e,r=Math.min(t,window.innerHeight);this.postMessage({availableHeight:r,modalHeight:this.modalContainerHeight,name:u.default.PARENT_BOUNDS_MESSAGE,scrollTop:e})}},{key:"setBodyPosition",value:function(){void 0===this.bodyPosition&&(this.bodyPosition=document.body.style.position,i.default.setElementStyle(document.body,{position:"fixed"}))}},{key:"unload",value:function(){this.isIFrameReady=!1,d(v(n.prototype),"unload",this).call(this)}}]),n}();t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(47)),o=s(n(48)),i=s(n(7)),a=s(n(49));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return h(e)}(this,n)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default);var t=p(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,e),(0,i.default)(h(r),"disablePageScroll","resetPageScroll","setIFrameFocus"),r.registerEventHandlers(),r}return f(n,null,[{key:"MAX_ZINDEX_VALUE",get:function(){return 2147483647}}]),f(n,[{key:"close",value:function(e){o.default.close(e)}},{key:"disablePageScroll",value:function(){void 0===this.bodyOverflowStyle&&this.disablePageScrollOnShow()&&(this.bodyHasVerticalScroll=a.default.hasVerticalScrollbar(),this.htmlOverflowStyle=document.documentElement.style.overflow,document.documentElement.style.overflow="unset",this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}},{key:"disablePageScrollOnShow",value:function(){return!0}},{key:"hide",value:function(){var e=this;c(m(n.prototype),"hide",this).call(this),setTimeout(function(){e.activeElementBeforeShown&&e.activeElementBeforeShown.focus&&(e.activeElementBeforeShown.focus(),delete e.activeElementBeforeShown)},0)}},{key:"open",value:function(e){var t,n=this;this.isOrphan()?(this.on("ready",t=function(){n.off("ready",t),o.default.open(n,n.setIFrameFocus),"function"==typeof e&&e()}),o.default.load(this)):o.default.open(this,this.setIFrameFocus)}},{key:"preload",value:function(){o.default.load(this)}},{key:"registerEventHandlers",value:function(){this.on("hiding",this.resetPageScroll).on("showing",this.disablePageScroll)}},{key:"resetPageScroll",value:function(){document.documentElement.style.overflow=this.htmlOverflowStyle,delete this.htmlOverflowStyle,document.body.style.overflow=this.bodyOverflowStyle,delete this.bodyOverflowStyle}},{key:"setIFrameFocus",value:function(){this.$iframe&&!this.isOrphan()&&"function"==typeof this.$iframe.focus&&this.$iframe.focus()}},{key:"unload",value:function(){o.default.remove(this)}}]),n}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(15)),o=a(n(21)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=s.call(this,t),i.default.isObject(e.options.on)&&Object.keys(e.options.on).forEach(function(t){e.on(t,e.options.on[t])}),e}return t=f,(n=[{key:"container",value:function(){}},{key:"paint",value:function(){var e=this;if(!this.options.container)return this.logError("Cannot paint widget without container",{options:this.options});if(!this.options.src&&!this.options.content&&!this.options.template)return this.logError("Cannot paint widget without src, content, or template",{options:this.options});if(this.appendTo(this.options.container),this.options.src)this.$iframe.onload=function(){e.trigger("ready")},this.src(this.options.src);else if(this.options.content)this.content(this.options.content),this.trigger("ready");else if(this.options.template){var t=this.options.template_args||{};o.default.get(this.options.template,function(n){e.content(o.default.render(t,n)),e.trigger("ready")})}return this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.default.extend(this.options,e),this.paint()}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.widgets=[],this.hidden=!0,(0,o.default)(this,"close","load","open","remove","transition")}var t,n,i;return t=e,(n=[{key:"close",value:function(e){return this.hidden?("function"==typeof e&&e(),this):(this.widgets.forEach(function(e){e.hide()}),this.hidden=!0,r.default.delay(function(){"function"==typeof e&&e()},250))}},{key:"load",value:function(e){e.options.container||(e.options.container=document.body),e.paint(),this.widgets.push(e)}},{key:"open",value:function(e,t){return this.hidden?(-1===this.widgets.indexOf(e)&&this.load(e),e.show(),this.hidden=!1,r.default.delay(function(){"function"==typeof t&&r.default.delay(t,250)})):this.transition(e,t)}},{key:"remove",value:function(e){this.widgets=this.widgets.filter(function(t){return t!==e}),"function"==typeof e.remove&&e.remove()}},{key:"transition",value:function(e,t){return this.hidden?this.open(e,t):(-1===this.widgets.indexOf(e)&&this.load(e),this.widgets.forEach(function(){}),e.show(),r.default.delay(function(){"function"==typeof t&&t()},250))}}])&&a(t.prototype,n),i&&a(t,i),e}());t.default=s},function(e,t,n){"use strict";n.r(t),t.default={getScrollbarWidth:function(){},hasVerticalScrollbar:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cachePromises=a,t.cacheSinglePromise=function(e){var t,n=!1;return function(){return n?t:(t=e(),n=!0,t)}},t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};var i={};function a(e){var t={};return function(n){if(n in t)return t[n];var r=e(n);return t[n]=r,r}}a(function(e){return Promise.resolve()});var s={getExperimentPageType:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],Promise.resolve(t)},getFinancingExperimentCohortId:function(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Promise.resolve()},getUniqueExperimentIDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t={};return o.default.isObject(e)&&Object.keys(e).forEach(function(){}),Object.keys(t)}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.checkoutData,n=e.checkoutAri,i=e.mode,a=e.userConfirmationUrl,s=e.userConfirmationUrlAction;r.default.trackActionLog("AFJS_default_checkout_on_success",{checkoutAri:n,checkoutToken:t.checkout_token,widgetMode:i});var u={};t.checkout_token?u.checkout_token=t.checkout_token:u.charge_id=t.id,"GET"===s&&(u=Object.assign(o.default.queryObj(a),u)),o.default.postToUrl(a,u,s)};t.default=a},function(e,t,n){"use strict";var r,o=(r=n(1))&&r.__esModule?r:{default:r};var i={};e.exports={onClick:function(e,t){i[e]=t},getClickHandler:function(e){var t=Object.keys(i).filter(function(t){return function(e,t){return(Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector).call(e,t)}(e,t)});return 0===t.length?null:(t.length>1&&o.default.trackEvent("Element matches multiple selectors",t.length),i[t[0]])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(n(6)),o=n(124),i=m(n(3)),a=m(n(9)),s=m(n(51)),u=n(19),c=m(n(11)),l=m(n(17)),f=m(n(15)),d=m(n(0)),p=m(n(8)),h=n(1);function m(e){return e&&e.__esModule?e:{default:e}}function g(e){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;return E(e)}(this,n)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O={prequal:"prequal",orders:"orders",checkout:"checkout"},S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(S,l.default);var t,n,m,g=w(S);function S(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(e=g.call(this,t,Object.assign(n,{popupCss:{width:"960px"},src:null}))).startAtOrders=!!t.startAtOrders,e.currentApp=e.startAtOrders?O.orders:O.prequal,e.onCheckoutSuccess=i.default.merchant.onCheckoutSuccess||e.onCheckoutSuccess,e.onCheckoutSuccess=e.onCheckoutSuccess.bind(E(e)),e.onCheckoutFailure=i.default.merchant.onCheckoutFailure||S.onCheckoutFail,e.onCheckoutFailure=e.onCheckoutFailure.bind(E(e)),e.items=t.items,e.discountCodes=t.discountCodes,e.boundRedirectPostMessageListener=e.redirectPostMessageListener.bind(E(e)),p.default.bind(window,"message",e.boundRedirectPostMessageListener),e.postMessageListenerAttached=!0,e}return t=S,m=[{key:"isValidPostMessageId",value:function(e){var t=this;return-1!==Object.keys(this.appNameToPostMessageId).map(function(e){return t.appNameToPostMessageId[e]}).indexOf(e)}},{key:"onCheckoutFail",value:function(){}},{key:"appNameToPostMessageId",get:function(){var e;return y(e={},O.orders,"AFFIRM_ORDER_MESSAGES"),y(e,O.prequal,"AFFIRM_PREQUAL_MESSAGES"),y(e,O.checkout,"AFFIRM_CHECKOUT_MESSAGES"),e}}],(n=[{key:"makeMerchantRequest",value:function(e){var t=this;return new Promise(function(n){var r={id:S.appNameToPostMessageId[O.orders],name:"AFFIRM_MERCHANT_REQUEST_COMPLETED"};if(!(e&&e.requestData&&e.merchantUrl&&e.submitUrl))return t.postMessage(Object.assign({success:!1},r)),void n();var o=e.requestData,i=e.merchantUrl,a=e.submitUrl;fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:{order:o}})}).then(function(e){e.status>=400?((0,h.trackAPI)(i,e.status,"error"),t.postMessage(Object.assign({success:!1},r)),n()):e.ok&&e.json().then(function(o){(0,h.trackAPI)(i,e.status,o),t.postMessage(Object.assign({success:!0,response:o,submitUrl:a},r)),n()})}).catch(function(){(0,h.trackEvent)("orders/merchantFetchFailure"),t.postMessage(Object.assign({success:!1},r)),n()})})}},{key:"redirectPostMessageListener",value:function(e){var t=f.default.parsePostMessageData(e),n=e.source;if(t&&S.isValidPostMessageId(t.id))switch(t.name){case"AFFIRM_REDIRECT":n.location=t.url;var r=S.appNameToPostMessageId[t.redirectAppName],o=r&&{id:r};this.startConfiguringMessaging(o);break;case"AFFIRM_INIT":t.id===S.appNameToPostMessageId[O.orders]&&a.default.trigger("orders:open"),this.clearTimers(!0);break;case"AFFIRM_CLOSE":this.close();break;case"AFFIRM_CHECKOUT_CLOSE":this.checkoutClose(t);break;case"AFFIRM_CHECKOUT_INIT":this.clearTimers(!0);break;case"AFFIRM_MAKE_MERCHANT_REQUEST":this.makeMerchantRequest(t)}}},{key:"checkoutClose",value:function(e){var t=this;return new Promise(function(n){t.close(function(){if(!e)return t.onCheckoutFailure(),t.unload(),void n();var r=e.success?t.onCheckoutSuccess:t.onCheckoutFailure;i.default.merchant.use_vcn?(0,o.getOrder)(t.flowAri).then(function(t){r(v({order_id:t.data.merchant_internal_order_id},e.data))}).catch(function(){return t.onCheckoutFailure(e.data)}).then(function(){t.unload(),n()}):(r(e.data),t.unload(),n())})})}},{key:"onCheckoutSuccess",value:function(e){return(0,s.default)({checkoutData:e,mode:this.config.mode,userConfirmationUrl:i.default.merchant.user_confirmation_url.url,userConfirmationUrlAction:i.default.merchant.user_confirmation_url.action})}},{key:"onGetOrderData",value:function(e,t){if(e&&e.ari){this.flowAri=e.ari;var n=this.options.src.indexOf("?")>-1?"&":"?";this.options.src="".concat(this.options.src).concat(n,"flow_ari=").concat(e.ari,"&public_api_key=").concat(r.default.getPublicApiKey())}this.config.mode===c.default.MODE_MODAL?b(k(S.prototype),"open",this).call(this,t,this.prequalOrderConfig):this.config.mode===c.default.MODE_POPUP&&this.updatePopupSource(this.options.src,t)}},{key:"loadPrequalOrderSource",value:function(e){var t=this;return this.options.src=this.startAtOrders?d.default.getFrontendUrl(i.default.resource_urls.orders_backend_route):l.default.constructURL(this.config.urlParams),(0,o.createOrder)({items:this.items,discount_codes:this.discountCodes}).then(function(n){return t.onGetOrderData(n,e)}).catch(function(){return t.onGetOrderData(null,e)})}},{key:"onPopupOpen",value:function(e){b(k(S.prototype),"onPopupOpen",this).call(this),this.loadPrequalOrderSource(e)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.postMessageListenerAttached||p.default.bind(window,"message",this.boundRedirectPostMessageListener),this.popup=null,this.options.src=null,this.prequalOrderConfig=n,c.default.determineMode(this.config.mode).then(function(r){var o=r;t.config.mode=o,o===c.default.MODE_MODAL?t.loadPrequalOrderSource(e):o===c.default.MODE_POPUP?b(k(S.prototype),"open",t).call(t,e,n):o===c.default.MODE_UNSUPPORTED&&((0,u.showError)({body:"Affirm requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),"function"==typeof e&&e())})}},{key:"unload",value:function(){b(k(S.prototype),"unload",this).call(this),p.default.unbind(window,"message",this.boundRedirectPostMessageListener),this.postMessageListenerAttached=!1}},{key:"currentPostMessageId",get:function(){}}])&&A(t.prototype,n),m&&A(t,m),S}();t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(55)),o=i(n(12));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default({service:"affirm.ui.ready"});a.runQueuedActions();var s=(0,o.default)(a,["on","off","ready","trigger"]);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(10)),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d="affirm.jsReady",p="affirm.ui.ready",h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this)).isReady=!1,t.service=e.service||"",t}return t=f,(n=[{key:"getActionLog",value:function(){var e;switch(this.service){case d:e=window.affirm&&window.affirm._;break;case p:e=window.affirm&&window.affirm.ui&&window.affirm.ui._;break;default:e=[]}return e||[]}},{key:"ready",value:function(e){if(e)if(this.isReady){if("function"==typeof e)try{e()}catch(e){i.default.trackEvent("".concat(this.service," Callback Error"),e)}}else this.on("ready",e);else this.trigger("ready"),this.isReady=!0;return this.isReady}},{key:"runQueuedActions",value:function(){var e=this,t=this.getActionLog();o.default.delay(function(){t.forEach(function(t){e[t[0]].apply(e,t[1])})})}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(55)).default)({service:"affirm.jsReady"});i.runQueuedActions();var a=(0,r.default)(i,["ready"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(126)).default),a=(0,r.default)(i,["launchPrequalFlow"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=A(n(2)),o=A(n(33)),i=A(n(6)),a=A(n(3)),s=A(n(16)),u=A(n(52)),c=A(n(18)),l=A(n(11)),f=A(n(35)),d=A(n(53)),p=A(n(17)),h=A(n(60)),m=n(13),g=A(n(0)),y=A(n(29));n(61);var v=A(n(1));function A(e){return e&&e.__esModule?e:{default:e}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _={},w={apr:.1,pricingTemplate:"Starting at {payment}/month with {affirm_logo}",termLength:12},E=["text","logo","symbol"],k=["black","blue","white"],O={},S=function(e){if(!e.isDefault){var t=s.default.get(),n=i.default.getPublicApiKey();return b({},t,{urlParams:{device_id:r.default.localDeviceId,merchant_name:t.merchant_name,promo_external_id:e.promoId,referring_url:encodeURIComponent(window.location.href),unit_price:e.amount,webhook_session_id:t.webhook_session_id||g.default.getWebhookSessionId(),page_type:e.pageType,use_promo:!0,bluecore_distinct_id:y.default.getDistinctID(n),bluecore_token:y.default.getToken(n)},mode:l.default.MODE_MODAL,page_type:"home"})}return null},P=function(e){var t=i.default.getPublicApiKey();if(!e)return o.default.getPromoConfig(t,"as_low_as",e,w);var n="affirm-promo:".concat(t,"-").concat(e);if(!O[n]){var r="".concat(a.default.promos_url_prefix,"as_low_as/").concat(t,"/").concat(e,".json");O[n]=window.fetch(r).then(function(e){return e.ok&&v.default.trackAPI(r,e.statusCode,e),e.json()}).catch(function(){return w})}return O[n]},I=function(e,t,n,r){var o=e.replace(/\{lowest_apr\}/gi,(100*n).toString());return o=(o=o.replace(/\{payment\}/gi,'<span class="affirm-ala-price">$'.concat(t,"</span>"))).replace(/\{affirm_logo\}/gi,r)},T=function(e,t,n,r){if(!_.promoPrequalWidgets[t]||e){var o,i=S(n);return i.items=e,o=e?new d.default(i,{}):new p.default(i),_.promoPrequalWidgets[t]=o,o.on(["prequalFinished","prequalSignedOut"],function(){r&&j(r)}),o.open(null,{mode:l.default.MODE_MODAL})}return _.promoPrequalWidgets[t].open(null,{mode:l.default.MODE_MODAL}),Promise.resolve()},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t,o=r.promoId;if(v.default.trackUserInteraction("As Low As",v.default.USER_ACTIONS.CLICK,{isPromoDefault:r.isDefault}),r.isDefault)return c.default.openModal(e,r),Promise.resolve();var i="".concat(o,"-").concat(r.amount,"-").concat(r.pageType),a=u.default.getClickHandler(n);return a?Promise.resolve(a()).then(function(e){var t=e.items;(0,m.isValidItems)(t)?T(t,i,r,n):T({},i,r,n)}):T(null,i,r,n)},C=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Learn more";if(n){""!==e.innerHTML&&(e.innerHTML+=". ");var i=document.createElement("a");i.innerHTML=o,i.setAttribute("aria-label","".concat(o," (opens in modal)")),i.setAttribute("href","javascript:void(0)"),i.onclick=function(n){n.preventDefault(),M(n,t,e)},e.appendChild(i)}else if(r){var a=e.innerText||e.innerHTML;e.setAttribute("aria-label","".concat(a," (opens in modal)")),e.setAttribute("href","javascript:void(0)"),e.onclick=function(n){n.preventDefault(),M(n,t,e)},e.style="cursor: pointer;"}},R=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=i;if(u.isDefault=!o.promo_prequal_enabled,o.termLengthIntervals){if(!(t=h.default.getTermLengthIntervalForAmount(o.termLengthIntervals,u.amount))){if(o.defaultMessage){var c=o.defaultMessage.replace(/\{affirm_logo\}/gi,u.affirmLogo),l=h.default.getMinAPR(o.termLengthIntervals);e.innerHTML=c.replace(/\{lowest_apr\}/gi,(100*l).toString()),_.setSiteWideModalOnElement(e,u)}else e.innerHTML="";return}var d=t;n=d.apr,r=d.termLength}else{if(u.amount<5e3)return void(e.innerHTML="");n=o.apr,r=o.termLength}f.default.getEstimate({amount:u.amount,apr:n,months:r,elem:e}).then(function(t){u.apr=n,u.termLength=r,u.paymentString=t.payment_string,u.pricingTemplate=o.pricingTemplate,_.setPromoOnElement(e,u),_.setProductPageModalOnElement(e,u),s.trackPromos&&v.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-s.promoTimer,version:"v1"}),a&&a()})},x=function(e){return{displayName:"DISPLAYNAME-SKU",qty:1,sku:e.trim(),unitPrice:0}},j=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.getAttribute("data-amount"),s=e.getAttribute("data-affirm-color")||"blue",u=e.getAttribute("data-affirm-type")||"logo",c="false"!==e.getAttribute("data-learnmore-show"),l=e.getAttribute("data-page-type"),f=[],d=e.getAttribute("data-sku");(d=d?d.trim():d)&&(f=d.split(",").map(x));var p="XXXXXXXXXXXXXXX"===e.getAttribute("data-promo-id")?null:e.getAttribute("data-promo-id");if(t=n?"true"===e.getAttribute("data-clickable"):"false"!==e.getAttribute("data-clickable"),!a)throw new Error("Affirm: data-amount is required in as low as promos. Element:",e);if(a>175e4)return e.innerHTML="",Promise.resolve();if(-1===E.indexOf(u))throw new Error('Affirm: Received a wrong data-affirm-type value "'.concat(u,'". Element:'),e);if(-1===k.indexOf(s))throw new Error('Affirm: Received a wrong data-affirm-color value "'.concat(s,'". Element:'),e);var h={amount:a,affirmLogo:function(e,t){var n="symbol"===t?"affirm":"Affirm";return"text"===t?"Affirm":'<span class="__affirm-logo __affirm-logo-'.concat(e,'">').concat(n,"</span>")}(s,u),learnMore:c,clickable:t,promoId:p,pageType:l};r.trackPromos&&v.default.trackEvent("Promo: ALA Pre-fetch",{elapsedTime:Date.now()-r.promoTimer});var m=i.default.getPublicApiKey();if(o.default.useV2Api(m,p)){var g={promoId:h.promoId,amount:h.amount,pageType:h.pageType,logoType:u,showCTA:c?"true":"false",logoColor:s};f.length>0&&(g.items=f);var y=o.default.TEMPLATE_FIELD.ala;return o.default.getPromoResponse(m,g,y).then(function(n){var o=n?n.promo:null;if(o&&o.config){var i={amount:h.amount,pageType:h.pageType,promoId:p,type:"product_page_modal"};e.innerHTML=o.html_ala,r.trackPromos&&v.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-r.promoTimer,version:"v2"}),t&&function(e,t){var n=e.getElementsByClassName("affirm-modal-trigger");if(0!==n.length){n.length>1&&v.default.trackEvent("too many affirm-modal-trigger elements found",b({numElements:n.length},t));var r=n[0],o=r.innerText||r.innerHTML;r.setAttribute("aria-label","".concat(o," (opens in modal)")),r.setAttribute("href","javascript:void(0)"),r.onclick=function(){}}else v.default.trackEvent("no affirm-modal-trigger found",b({},t))}(e,i)}})}return _.getConfig(p).then(function(){})},D=function(e,t){return-1!==e.parentElement.className.indexOf(t)};_.defaultConfig=w,_.generatePromoPrequalConfig=S,_.getConfig=function(e){return h.default.isPromoSet(e)?h.default.getConfig(e,"asLowAs").catch(function(){return P(e)}):P(e)},_.getDisplayText=I,_.getPromoConfig=P,_.openModalAssociatedWithPromoId=M,_.processConfigAndSetElement=R,_.promoPrequalWidgets={},_.promos=O,_.setProductPageModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,amount:t.amount,promoId:n,apr:t.apr,termLength:t.termLength,type:"product_page_modal"};C(e,o,t.learnMore,t.clickable)},_.setPromoOnElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.innerHTML=I(t.pricingTemplate,t.paymentString,t.apr,t.affirmLogo)},_.setSiteWideModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,promoId:n,type:"site_wide_modal"};C(e,o,t.learnMore,t.clickable)},_.setupElement=j,_.setupElements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;n<e.length;n+=1){var r=e[n];try{var o=D(r,"affirm-product-modal")||D(r,"affirm-site-modal");j(r,o,t)}catch(e){console.error(e)}}};var N=_;t.default=N},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function(){}Object.defineProperty(t,"__esModule",{value:!0}),t.findAffirmConfig=o,t.setAffirmConfig=function(e,t){var n=o(e)||{};return e.affirmConfig=r({},n,t),e.affirmConfig}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),o=a(n(6)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u={},c=["asLowAs","productPageModal","siteWideModal"],l=function(e){return e&&e.indexOf&&0===e.indexOf("promo_set")||!1},f={getConfig:function(e,t){if(!l(e))return Promise.reject("The provided promoSetId ".concat(e," is not a valid promoset."));if(-1===c.indexOf(t))return Promise.reject("The provided key ".concat(t," must be one of: ").concat(c.join(", "),"."));var n=o.default.getPublicApiKey(),a="affirm-promoset:".concat(n,"-").concat(e);if(!u[a]){var f="".concat(r.default.promos_url_prefix,"promo_set/").concat(n,"/").concat(e,".json");u[a]=window.fetch(f).then(function(e){return e.ok?(i.default.trackAPI(f,e.statusCode,e),e.json()):Promise.reject("Invalid promoset")})}return u[a].then(function(){})},getMinAPR:function(e){for(var t=1,n=0;n<e.length;n+=1)e[n].apr<=t&&(t=e[n].apr);return t},getTermLengthIntervalForAmount:function(e,t){var n,r;for(r=0;r<e.length;r+=1)e[r].minimumLoanAmount<=t&&(n=e[r]);return n},isPromoSet:l};t.default=f},function(e,t,n){var r=n(127);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(132)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(r.default.checkPublicApiKey()){var t=e||{},n=t.amount||null,i={pageType:t.pageType||null,promoId:t.id||t.promoId||null,isSdk:"true"===t.isSdk};n&&n>=a&&n<=s?(i.type="product_page_modal",i.amount=n):i.type="site_wide_modal";var u=document.createElement("p");return o.default.openModal(u,i),u}return console.warn("Missing API Key"),null};var r=i(n(6)),o=i(n(18));function i(e){return e&&e.__esModule?e:{default:e}}var a=5e3,s=175e4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.default.checkPublicApiKey()){var t=Date.now(),n=e.trackPromos,c=document.getElementsByClassName("affirm-as-low-as");o.default.setupElements(c,{promoTimer:t,trackPromos:n});var l=document.getElementsByClassName("affirm-site-modal");a.default.setupSiteElements(l,{promoTimer:t,trackPromos:n});var f=document.getElementsByClassName("affirm-product-modal");a.default.setupProductElements(f,{promoTimer:t,trackPromos:n});var d=document.getElementsByClassName("affirm-prequal-text");i.default.setupElements(d);var p=u.default.queryObj();"t"===p.aff_fm&&"true"!==sessionStorage.getItem("AffirmLearnMore")&&function(e,t,n){var r,o={};r=t.length>0?t:e.length>0?e:n;if(r.length>0){var i=r[0].getAttribute("data-promo-id"),a=r[0].getAttribute("data-modal-id"),u=r[0].getAttribute("data-page-type");o.id=i||a,o.pageType=u;var c=r[0].getAttribute("data-amount");c&&(o.amount=c)}(0,s.default)(o),sessionStorage.setItem("AffirmLearnMore","true")}(c,f,l)}else console.warn("Missing API Key")};var r=c(n(6)),o=c(n(58)),i=c(n(134)),a=c(n(18)),s=c(n(62)),u=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t){var n=function(){n={};var e=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;if(e){Object.keys(Object.getPrototypeOf(e.timing)).forEach(function(t){"function"!=typeof e.timing[t]&&(n[t]=e.timing[t])});var t=n.fetchStart;Object.keys(n).forEach(function(e){0!==n[e]&&(n[e]=n[e]-t)}),Object.assign(n,{TTFB:n.responseStart,contentDownloadTime:n.responseEnd-n.responseStart,domContentLoaded:n.domContentLoadedEventStart-n.domLoading,domProcessing:n.domComplete-n.domLoading,pageLoadTime:n.loadEventEnd})}return n};e.exports=n},function(e,t){var n=["Android","BlackBerry","iPad","iPhone","iPod","webOS","Windows Phone"],r=["Linux","Macintosh","Windows"];function o(e){for(var t=0;t<n.length;t+=1){var o=n[t];if(-1!==e.indexOf(o))return o}for(var i=0;i<r.length;i+=1){var a=r[i];if(-1!==e.indexOf(a))return a}return"Other"}e.exports={parseUserAgentIntoDeviceType:o,isMobile:function(){var e=o(navigator.userAgent);return-1!==n.indexOf(e)}}},function(e,t){e.exports=function(e){return-1!==e.indexOf("Opera")||-1!==e.indexOf("OPR")?"Opera":-1!==e.indexOf("Edge")?"Edge":-1!==e.indexOf("Chrome")?"Chrome":-1!==e.indexOf("Safari")?"Safari":-1!==e.indexOf("Firefox")?"Firefox":-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident")?"IE":"Other"}},function(e,t){e.exports={loadEventListener:function(e){"complete"===document.readyState?e():window.addEventListener&&window.addEventListener("load",e,!1)}}},function(e,t,n){(function(n){var r;!function(){var o="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function(){}var s=0;function(){}function(){}function(){}function(){}function(){}var p=0;var h="img script iframe link audio video source".split(" ");function(){}function(){}function(){}function(){}function(){}y.prototype.getFirstConsistentlyInteractive=function(){},y.prototype.m=function(){},y.prototype.l=function(e){this.f.delete(e)},y.prototype.B=function(){},o.Object.defineProperties(y.prototype,{g:{configurable:!0,enumerable:!0,get:function(){}}});var b={getFirstConsistentlyInteractive:function(){}};e.exports?e.exports=b:void 0===(r=function(){return b}.apply(t,[]))||(e.exports=r)}()}).call(this,n(39))},function(e,t,n){"use strict";n(70).polyfill(),n(71).polyfill(),n(73),n(74),n(76),(0,n(27).default)("config",n(3).default),(0,n(109).default)();try{n(135),n(140).default()}catch(e){Math.random()<.01&&window.affirm&&window.affirm.Rollbar&&window.affirm.Rollbar.error(e)}},function(){},function(e,t,n){(function(){}).call(this,n(72),n(39))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(){},function(e,t,n){},,function(e,t,n){"use strict";var r=c(n(77)),o=c(n(97)),i=c(n(42)),a=c(n(99)),s=c(n(100)),u=c(n(101));function c(e){return e&&e.__esModule?e:{default:e}}r.default.setComponents({telemeter:a.default,instrumenter:o.default,polyfillJSON:u.default,scrub:i.default,truncation:s.default}),(window.affirm||{}).Rollbar=new r.default({accessToken:"a118d4416b08480984711912aca9ac51",autoInstrument:!1,captureUncaught:!0,hostWhiteList:["affirm.js"],scrubTelemetryInputs:!0,payload:{client:{javascript:{code_version:"".concat("affirm-js",":").concat("10.74.0"),guess_uncaught_frames:!0,source_map_enabled:!0}},environment:"".concat("affirm-js","-").concat("live")}})},function(e,t,n){var r=n(78),o=n(5),i=n(83),a=n(26),s=n(87),u=n(88),c=n(40),l=n(89),f=n(92),d=n(93),p=n(94),h=n(41);function(){}var g=null;function(){}function(){}function(){}m.init=function(){},m.prototype.components={},m.setComponents=function(e){m.prototype.components=e},m.prototype.global=function(e){return this.client.global(e),this},m.global=function(){},m.prototype.configure=function(){},m.configure=function(e,t){if(g)return g.configure(e,t);y()},m.prototype.lastError=function(){return this.client.lastError},m.lastError=function(){},m.prototype.log=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.log(e),{uuid:t}},m.log=function(){if(g)return g.log.apply(g,arguments);y(v(arguments))},m.prototype.debug=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.debug(e),{uuid:t}},m.debug=function(){if(g)return g.debug.apply(g,arguments);y(v(arguments))},m.prototype.info=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.info(e),{uuid:t}},m.info=function(){if(g)return g.info.apply(g,arguments);y(v(arguments))},m.prototype.warn=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warn(e),{uuid:t}},m.warn=function(){if(g)return g.warn.apply(g,arguments);y(v(arguments))},m.prototype.warning=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warning(e),{uuid:t}},m.warning=function(){if(g)return g.warning.apply(g,arguments);y(v(arguments))},m.prototype.error=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.error(e),{uuid:t}},m.error=function(){if(g)return g.error.apply(g,arguments);y(v(arguments))},m.prototype.critical=function(){},m.critical=function(){},m.prototype.buildJsonPayload=function(e){return this.client.buildJsonPayload(e)},m.buildJsonPayload=function(){if(g)return g.buildJsonPayload.apply(g,arguments);y()},m.prototype.sendJsonPayload=function(e){return this.client.sendJsonPayload(e)},m.sendJsonPayload=function(){if(g)return g.sendJsonPayload.apply(g,arguments);y()},m.prototype.setupUnhandledCapture=function(){},m.prototype.handleUncaughtException=function(){},m.prototype.handleAnonymousErrors=function(){},m.prototype.handleUnhandledRejection=function(){},m.prototype.wrap=function(){},m.wrap=function(){},m.prototype.captureEvent=function(){},m.captureEvent=function(){},m.prototype.captureDomContentLoaded=function(e,t){return t||(t=new Date),this.client.captureDomContentLoaded(t)},m.prototype.captureLoad=function(){},m.prototype.loadFull=function(){a.info("Unexpected Rollbar.loadFull() called on a Notifier instance. This can happen when Rollbar is loaded multiple times.")},m.prototype._createItem=function(e){return o.createItem(e,a,this)};var b=n(95),_=n(96),w={version:b.version,scrubFields:_.scrubFields,logLevel:b.logLevel,reportLevel:b.reportLevel,uncaughtErrorLevel:b.uncaughtErrorLevel,endpoint:b.endpoint,verbose:!1,enabled:!0,transmit:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0,inspectAnonymousErrors:!0,ignoreDuplicateErrors:!0,wrapGlobalEventHandlers:!1};e.exports=m},function(e,t,n){var r=n(79),o=n(81),i=n(82),a=n(5);function(){}function(){}function(){}s.rateLimiter=new r({maxItems:0,itemsPerMinute:60}),s.prototype.global=function(){},s.prototype.configure=function(){},s.prototype.log=function(){},s.prototype.debug=function(e){this._log("debug",e)},s.prototype.info=function(e){this._log("info",e)},s.prototype.warn=function(e){this._log("warning",e)},s.prototype.warning=function(e){this._log("warning",e)},s.prototype.error=function(e){this._log("error",e)},s.prototype.critical=function(e){this._log("critical",e)},s.prototype.wait=function(e){this.queue.wait(e)},s.prototype.captureEvent=function(){},s.prototype.captureDomContentLoaded=function(){},s.prototype.captureLoad=function(e){return this.telemeter&&this.telemeter.captureLoad(e)},s.prototype.buildJsonPayload=function(e){return this.api.buildJsonPayload(e)},s.prototype.sendJsonPayload=function(e){this.api.postJsonPayload(e)},s.prototype._log=function(){},s.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},s.prototype._sameAsLastError=function(){},s.prototype._addTracingInfo=function(e){if(this.tracer){var t=this.tracer.scope().active();if(function(){}(t)){t.setTag("rollbar.error_uuid",e.uuid),t.setTag("rollbar.has_error",!0);var n=t.context().toSpanId(),r=t.context().toTraceId();e.custom?(e.custom.opentracing_span_id=n,e.custom.opentracing_trace_id=r):e.custom={opentracing_span_id:n,opentracing_trace_id:r}}}},e.exports=s},function(e,t,n){var r=n(5);function(){}function(){}function(){}o.globalSettings={startTime:r.now(),maxItems:void 0,itemsPerMinute:void 0},o.prototype.configureGlobal=function(){},o.prototype.shouldSend=function(){},o.prototype.setPlatformOptions=function(e,t){this.platform=e,this.platformOptions=t},e.exports=o},function(){},function(e,t,n){var r=n(5);function(){}o.prototype.configure=function(e){this.api&&this.api.configure(e);var t=this.options;return this.options=r.merge(t,e),this},o.prototype.addPredicate=function(e){return r.isFunction(e)&&this.predicates.push(e),this},o.prototype.addPendingItem=function(e){this.pendingItems.push(e)},o.prototype.removePendingItem=function(e){var t=this.pendingItems.indexOf(e);-1!==t&&this.pendingItems.splice(t,1)},o.prototype.addItem=function(){},o.prototype.wait=function(){},o.prototype._applyPredicates=function(){},o.prototype._makeApiRequest=function(){};var i=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];o.prototype._maybeRetry=function(){},o.prototype._retryApiRequest=function(){},o.prototype._dequeuePendingRequest=function(){},o.prototype._maybeLog=function(){},o.prototype._maybeCallWait=function(){},e.exports=o},function(e,t,n){var r=n(5);function(){}o.prototype.configure=function(){},o.prototype.addTransform=function(){},o.prototype.log=function(){},o.prototype._applyTransforms=function(){},e.exports=o},function(e,t,n){var r=n(5),o=n(84),i={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function(){}function(){}a.prototype.postItem=function(){},a.prototype.buildJsonPayload=function(){},a.prototype.postJsonPayload=function(){},a.prototype.configure=function(){},e.exports=a},function(e,t,n){var r=n(5);e.exports={buildPayload:function(){},getTransportFromOptions:function(){},transportOptions:function(){},appendPathToPath:function(){}}},function(){},function(e,t){var n={ieVersion:function(){}};e.exports=n},function(e,t){e.exports={captureUncaughtExceptions:function(){},captureUnhandledRejections:function(){}}},function(e,t,n){var r=n(5),o=n(26);function i(e){this.truncation=e}function(){}function(){}function(){}i.prototype.get=function(e,t,n,o,i){o&&r.isFunction(o)||(o=function(){}),r.addParamsAndAccessTokenToPath(e,t,n);a(e,r.formatUrl(t),"GET",null,o,i)},i.prototype.post=function(){},i.prototype.postJsonPayload=function(e,t,n,o,i){o&&r.isFunction(o)||(o=function(){});a(e,r.formatUrl(t),"POST",n,o,i)},e.exports=i},function(e,t,n){var r=n(5),o=n(41),i=n(26);function(){}function(){}function(){}function(){}e.exports={handleDomException:function(){},handleItemWithError:function(){},ensureItemHasSomethingToSay:function(){},addBaseInfo:function(){},addRequestInfo:function(){},addClientInfo:function(){},addPluginInfo:function(){},addBody:function(){},addScrubber:function(){}}},function(){},function(){},function(e,t,n){var r=n(5);function(){}e.exports={itemToPayload:function(){},addTelemetryData:function(){},addMessageWithError:function(){},userTransform:function(){},addConfigToPayload:function(){},addConfiguredOptions:function(){},addDiagnosticKeys:function(){}}},function(){},function(e,t,n){var r=n(5);function(){}function(){}e.exports={checkLevel:function(){},userCheckIgnore:function(){},urlIsNotBlacklisted:function(){},urlIsWhitelisted:function(){},messageIsIgnored:function(){}}},function(){},function(e,t){e.exports={scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","X-Rollbar-Access-Token","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","ccname","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp","ccmonth","ccyear"]}},function(e,t,n){var r=n(5),o=n(42),i=n(40),a=n(98),s={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestHeaders:!1,networkRequestBody:!1,networkErrorOnHttp5xx:!1,networkErrorOnHttp4xx:!1,networkErrorOnHttp0:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};function(){}function(){}function(){}l.prototype.configure=function(){},l.prototype.instrument=function(){},l.prototype.deinstrumentNetwork=function(){c(this.replacements,"network")},l.prototype.instrumentNetwork=function(){},l.prototype.captureNetwork=function(){},l.prototype.isJsonContentType=function(){},l.prototype.scrubJson=function(){},l.prototype.fetchHeaders=function(){},l.prototype.trackHttpErrors=function(){},l.prototype.errorOnHttpStatus=function(){},l.prototype.deinstrumentConsole=function(){},l.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log){var e=this,t=this._window.console,n=["debug","info","warn","error","log"];try{for(var o=0,i=n.length;o<i;o++)a(n[o])}catch(e){this.diagnostic.instrumentConsole={error:e.message}}}function a(n){"use strict";var o=t[n],i=t,a="warn"===n?"warning":n;t[n]=function(){},e.replacements.log.push([n,o])}},l.prototype.deinstrumentDom=function(){},l.prototype.instrumentDom=function(){},l.prototype.handleClick=function(){},l.prototype.handleBlur=function(){},l.prototype.handleSelectInputChanged=function(){},l.prototype.captureDomEvent=function(){},l.prototype.deinstrumentNavigation=function(){},l.prototype.instrumentNavigation=function(){},l.prototype.handleUrlChange=function(){},l.prototype.deinstrumentConnectivity=function(){},l.prototype.instrumentConnectivity=function(){},l.prototype.addListener=function(){},l.prototype.removeListeners=function(){},e.exports=l},function(e,t){function(){}function(){}function(){}e.exports={describeElement:o,descriptionToString:r,elementArrayToString:function(){},treeToArray:function(){},getElementFromEvent:function(){},isDescribedElement:function(){},getElementType:n}},function(e,t,n){var r=n(5),o=100;function(){}i.prototype.configure=function(){},i.prototype.copyEvents=function(){},i.prototype.capture=function(){},i.prototype.captureEvent=function(e,t,n,r){return this.capture(e,t,n,r)},i.prototype.captureError=function(){},i.prototype.captureLog=function(){},i.prototype.captureNetwork=function(){},i.prototype.levelFromStatus=function(){},i.prototype.captureDom=function(){},i.prototype.captureNavigation=function(){},i.prototype.captureDomContentLoaded=function(){},i.prototype.captureLoad=function(e){return this.capture("navigation",{subtype:"load"},"info",void 0,e&&e.getTime())},i.prototype.captureConnectivityChange=function(){},i.prototype._captureRollbarItem=function(){},i.prototype.push=function(){},e.exports=i},function(e,t,n){var r=n(5),o=n(43);function(){}function(){}function(){}function(){}function(){}function(){}function(){}function(){}e.exports={truncate:function(){},raw:i,truncateFrames:s,truncateStrings:c,maybeTruncateValue:u}},function(e,t){e.exports=function(e){var t,n,r,o,i=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function a(e){return e<10?"0"+e:e}function s(){return this.valueOf()}function u(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=s,Number.prototype.toJSON=s,String.prototype.toJSON=s),"function"!=typeof e.stringify&&(r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=function(){}),"function"!=typeof e.parse&&(e.parse=(h={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},m={go:function(){c="ok"},firstokey:function(){},okey:function(){d=p,c="colon"},ovalue:function(){c="ocomma"},firstavalue:function(){c="acomma"},avalue:function(){c="acomma"}},g={go:function(){c="ok"},ovalue:function(){c="ocomma"},firstavalue:function(){c="acomma"},avalue:function(){c="acomma"}},y={"{":{go:function(){},ovalue:function(){},firstavalue:function(){l.push({container:f,state:"acomma"}),f={},c="firstokey"},avalue:function(){}},"}":{firstokey:function(){},ocomma:function(){}},"[":{go:function(){},ovalue:function(){},firstavalue:function(){l.push({container:f,state:"acomma"}),f=[],c="firstavalue"},avalue:function(){}},"]":{firstavalue:function(){var e=l.pop();p=f,f=e.container,d=e.key,c=e.state},acomma:function(){}},":":{colon:function(){}},",":{ocomma:function(){},acomma:function(){f.push(p),c="avalue"}},true:{go:function(){p=!0,c="ok"},ovalue:function(){p=!0,c="ocomma"},firstavalue:function(){p=!0,c="acomma"},avalue:function(){p=!0,c="acomma"}},false:{go:function(){p=!1,c="ok"},ovalue:function(){p=!1,c="ocomma"},firstavalue:function(){p=!1,c="acomma"},avalue:function(){}},null:{go:function(){p=null,c="ok"},ovalue:function(){p=null,c="ocomma"},firstavalue:function(){p=null,c="acomma"},avalue:function(){p=null,c="acomma"}}},function(){}));var c,l,f,d,p,h,m,g,y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.affirm=window.affirm||{},window.affirm.lib={},window.affirm.VERSION="@VERSION",window.affirm.VERSION_DATE="@DATE"}},function(){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(105));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api_url="https://api-cf.affirm.com/api/v2/",this.assets_root="https://cdn1.affirm.com/products/affirmjs/master/dist/",this.base_cdn_url="https://promos.affirm.com/static",this.cart={},this.country_code="US",this.frontend_url="https://www.affirm.com",this.minified_url="https://cdn1.affirm.com/js/v2/affirm.js",this.pageType="",this.payments_url_base="https://calculator.affirm.com",this.promos_url_prefix="https://cdn1.affirm.com/platform/public/promos/",this.resource_urls={checkout_button_route:"apps/checkout-button/",new_order:"checkout/",new_future_checkout:"checkout/?as_future=1",orders_backend_route:"apps/orders/",prequal_backend_route:"apps/prequal/",prequal_frontend_learn_more_route:"#/prequalifications/learn-more",send_future_checkout:"send_future_checkout",third_party_cookie_check:"cookie_sent",toast_backend_route:"apps/toast"},this.tracking_blacklist=Object({0:"E0QK6BONBI305A0Y"}),this.toast={onCartPage:!1,onPrequalSuccess:!1},this.tracking_endpoint="tracker.affirm.com",this.extend=this.extend.bind(this)}var t,n,i;return t=e,i=[{key:"scrubConfig",value:function(e){var t=(0,o.default)({},e);return delete t.scrubConfig,delete t.extend,delete t.learn_more,t}}],(n=[{key:"extend",value:function(t){var n=e.scrubConfig(t);(0,o.default)(this,n),r.default.trigger("config",n)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=s},function(e,t,n){e.exports=n(106).default},function(e,t,n){"use strict";n.r(t),n.d(t,"extend",function(){return i});var r=n(36),o=n.n(r);function i(e,t){return Object.keys(t).forEach(function(n){var r=t[n];null!=r&&Object.prototype.hasOwnProperty.call(t,n)&&(o.a.isPlainObject(r)?o.a.isPlainObject(e[n])?e[n]=i(e[n],i({},r)):e[n]=i({},r):e[n]=r)}),e}i.default=i,t.default=i},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t={};return(e?function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""}(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=r(e.split("="),2),o=n[0],i=n[1];t[o]=i||""}}),t}function a(e,t){setTimeout(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.queryObj=i,t.delay=a,t.default=void 0;var s={queryObj:i,delay:a};t.default=s},function(){},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("config",a.default),(0,s.default)("promo",l.default),(0,s.default)("util",h.default),(0,s.default)("jsReady",p.default.ready),(0,s.default)("checkout",i.default),(0,s.default)("events",m.default),(0,s.default)("product",c.default),(0,s.default)("ui",d.default),(0,s.default)("ui.components",f.default),(0,s.default)("findAffirmConfig",v.findAffirmConfig),(0,s.default)("setAffirmConfig",v.setAffirmConfig),(0,s.default)("ui.error",A.showError),(0,s.default)("widgets.learn_more",b.default),(0,s.default)("widgets.as_low_as",y.default),(0,s.default)("analytics",o),(0,s.default)("ui.modal",S.default),(0,s.default)("ui.modal_access",w.default),(0,s.default)("ui.payments",E.default),(0,s.default)("ui.template",O.default),(0,s.default)("ui.refresh",k.default),(0,s.default)("ui.openModal",_.default),(0,s.default)("ui.prequal",g.default),(0,s.default)("prequal",u.default)};var o=function(){}(n(110)),i=P(n(20)),a=P(n(3)),s=P(n(27)),u=P(n(16)),c=P(n(28)),l=P(n(52)),f=P(n(121)),d=P(n(54)),p=P(n(56)),h=P(n(0)),m=P(n(9)),g=P(n(57)),y=P(n(58)),v=n(59),A=n(19),b=P(n(18)),_=P(n(62)),w=P(n(31)),E=P(n(35)),k=P(n(63)),O=P(n(21)),S=P(n(48));function P(e){return e&&e.__esModule?e:{default:e}}function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOrderUpdated=t.trackOrderRefunded=t.trackOrderCancelled=t.trackOrderConfirmed=t.trackCheckoutPaymentEntered=t.trackCheckoutStepCompleted=t.trackCheckoutStepViewed=t.trackCheckoutStarted=t.trackCartViewed=t.trackProductRemoved=t.trackProductAdded=t.trackProductViewed=t.trackProductClicked=t.trackPromotionClicked=t.trackPromotionViewed=t.trackProductListViewed=t.trackProductsSearched=t.schematizePromotion=t.schematizeProduct=t.schematizeOrder=t.schematizeListOfProducts=t.schematizeCart=void 0;var r,o=(r=n(1))&&r.__esModule?r:{default:r};var i=function(e){return{ctid:e.cartId,ctnm:e.name}};t.schematizeCart=i;var a=function(e){return{ltid:e.listId,ltc:e.category,ltnm:e.name}};t.schematizeListOfProducts=a;var s=function(){};t.schematizeOrder=s;var u=function(){};t.schematizeProduct=u;var c=function(e){return{pmmc:e.creativeId,pmms:e.message,pmpo:e.position,pmpi:e.promotionId}};t.schematizePromotion=c;t.trackProductsSearched=function(e){var t={query:decodeURIComponent(e)};o.default.trackEvent("trackProductsSearched",t,1,!1)};t.trackProductListViewed=function(e,t){var n={list:a(e),products:t.map(function(e){return u(e)})};o.default.trackEvent("trackProductListViewed",n,1,!1)};t.trackPromotionViewed=function(e){var t={promotion:c(e)};o.default.trackEvent("trackPromotionViewed",t,1,!1)};t.trackPromotionClicked=function(e){var t={promotion:c(e)};o.default.trackEvent("trackPromotionClicked",t,1,!1)};t.trackProductClicked=function(e){var t={product:u(e)};o.default.trackEvent("trackProductClicked",t,1,!1)};t.trackProductViewed=function(e){var t={product:u(e)};o.default.trackEvent("trackProductViewed",t,1,!1)};t.trackProductAdded=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:i(t),product:u(e)};o.default.trackEvent("trackProductAdded",n,1,!1)};t.trackProductRemoved=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:i(t),product:u(e)};o.default.trackEvent("trackProductRemoved",n,1,!1)};t.trackCartViewed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:i(t),products:e.map(function(e){return u(e)})};o.default.trackEvent("trackCartViewed",n,1,!1)};t.trackCheckoutStarted=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],n={order:s(e),products:t.map(function(e){return u(e)})};o.default.trackEvent("trackCheckoutStarted",n,1,!1)};t.trackCheckoutStepViewed=function(e,t){var n={order:s(t),step:e};o.default.trackEvent("trackCheckoutStepViewed",n,1,!1)};t.trackCheckoutStepCompleted=function(e,t){var n={order:s(t),step:e};o.default.trackEvent("trackCheckoutStepCompleted",n,1,!1)};t.trackCheckoutPaymentEntered=function(e,t){var n={order:s(t),step:e};o.default.trackEvent("trackCheckoutPaymentEntered",n,1,!1)};t.trackOrderConfirmed=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],n={order:s(e),products:t.map(function(e){return u(e)})};o.default.trackEvent("trackOrderConfirmed",n,1,!1)};t.trackOrderCancelled=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],n={order:s(e),products:t.map(function(e){return u(e)})};o.default.trackEvent("trackOrderCancelled",n,1,!1)};t.trackOrderRefunded=function(e,t,n){var r={amount:e,currency:t,orderId:n,products:((arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])||[]).map(function(e){return u(e)})};o.default.trackEvent("trackOrderRefunded",r,1,!1)};t.trackOrderUpdated=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],n={order:s(e),products:t.map(function(e){return u(e)})};o.default.trackEvent("trackOrderUpdated",n,1,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadjs=void 0;var r,o,i=(r=document.getElementsByTagName("script")[0],o=r.parentNode,function(e,t){var n=document.createElement("script");n.src=e,n.type="text/javascript","function"==typeof n.addEventListener?n.addEventListener("load",t,!1):n.onreadystatechange=function(){},o.insertBefore(n,r)});t.loadjs=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!o.default.sniffer.cors)return(0,r.showError)({body:u,title:s}),i.default.trackEvent(c),!1;return!0};var r=n(19),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s="Your browser is out of date",u="Your browser is missing important features that allow Affirm checkout to work properly. Please upgrade your browser at http://browsehappy.com before continuing.",c="CORS not available"},function(e,t,n){"use strict";(function(e){!function(e){function t(){this._callbacks=[]}function n(e,n,r,i){var a,s,u=new t;r=r||{},i=i||{};try{a=function(){var e;if(window.XMLHttpRequest)(e=new XMLHttpRequest).withCredentials=!0;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}()}catch(e){return u.done(o.ENOXHR,""),u}for(var c in s=function(e){var t="";if("string"==typeof e)t=e;else{var n=encodeURIComponent;for(var r in e)e.hasOwnProperty(r)&&(t+="&"+n(r)+"="+n(e[r]))}return t}(r),"GET"===e&&s&&(n+="?"+s,s=null),a.open(e,n),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i)i.hasOwnProperty(c)&&a.setRequestHeader(c,i[c]);var l=o.ajaxTimeout;if(l)var f=setTimeout(function(){},l);return a.onreadystatechange=function(){if(l&&clearTimeout(f),4===a.readyState){var e=!a.status||(a.status<200||a.status>=300)&&304!==a.status;u.done(e,a.responseText,a)}},a.send(s),u}function(){}t.prototype.then=function(){},t.prototype.done=function(){};var o={Promise:t,join:function(e){var n=new t,r=[];if(!e||!e.length)return n.done(r),n;var o=0,i=e.length;function(){}for(var s=0;s<i;s++)e[s].then(a(s));return n},chain:function e(n,r){var o=new t;return 0===n.length?o.done.apply(o,r):n[0].apply(null,r).then(function(){}),o},ajax:n,get:r("GET"),post:r("POST"),put:r("PUT"),del:r("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};e.exports=o}(e)}).call(this,n(114)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);var r=n(8),o="iframe-dimensions",i="iframe-ready",a="AFFIRM_FRAME_MESSAGES",s="request-parent-bounds",u="request-iframe-dimensions";function(){}function l(e){var t;if("string"==typeof e.data)try{(t=JSON.parse(e.data)).id!==a&&(t=null)}catch(e){t=null}return t}function f(){var e=document.body.style.height,t=document.body.style.minHeight;document.body.style.height="auto",document.body.style.minHeight=0;var n={height:document.body.offsetHeight,id:a,name:o,width:document.body.offsetWidth};document.body.style.height=e,document.body.style.minHeight=t,window.parent.postMessage(JSON.stringify(n),"*")}t.default={IFRAME_DIMENSIONS_MESSAGE:o,IFRAME_READY_MESSAGE:i,initMessageListener:function(){r.default.bind(window,"message",c),window.parent.postMessage(JSON.stringify({id:a,name:i}),"*"),f()},isInIFrame:function(){return window.self!==window.top&&window.parent},requestParentBounds:function(){window.parent.postMessage(JSON.stringify({id:a,name:s}),"*")},parsePostMessageData:l,sendBodyDimensions:f,PARENT_BOUNDS_MESSAGE:"parent-bounds",POST_MESSAGE_ID:a,REQUEST_PARENT_BOUNDS_MESSAGE:s,REQUEST_IFRAME_DIMENSIONS_MESSAGE:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(117)),o=_(n(2)),i=n(22),a=_(n(30)),s=_(n(50)),u=_(n(6)),c=_(n(3)),l=_(n(9)),f=_(n(51)),d=n(19),p=_(n(11)),h=_(n(15)),m=n(13),g=_(n(0)),y=_(n(1)),v=_(n(7)),A=_(n(32)),b=_(n(8));function _(e){return e&&e.__esModule?e:{default:e}}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e){"@babel/helpers - typeof";return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function(){}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(n,p.default);var t=T(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!r.checkoutPayload&&!r.src)throw new Error(n.MISSING_SOURCE_ERROR);var i=Object.assign({mode:r.mode||n.MODE_REDIRECT},r),a={name:"checkout-application",popupCss:{width:"640px"}};return r.src&&(a.src=n.decorateUrlWithDeviceId(r.src)),(e=t.call(this,i,Object.assign(a,o))).config=Object.assign(e.config,e.defaultConfig,i),(0,v.default)(M(e),"onGetCheckoutDataError","onPopupClose","postMessageListener"),(0,v.default)(e.config,M(e),"onFail","onSuccess"),b.default.bind(window,"message",e.postMessageListener),e}return P(n,[{key:"defaultConfig",get:function(){return{mode:n.MODE_REDIRECT,onFail:this.onCheckoutFail,onSuccess:this.onCheckoutSuccess}}},{key:"defaultOptions",get:function(){var e=C(R(n.prototype),"defaultOptions",this);return e.resizeHeight=!0,e}}],[{key:"addCohortIdToPayload",value:function(e){return s.default.getFinancingExperimentCohortId(u.default.getPublicApiKey()).then(function(t){if(!t)return e;var n=Object.assign({},e);return n.meta=n.meta||{},n.meta.cohort_id=t,n})}},{key:"decorateUrlWithDeviceId",value:function(e){var t=o.default.localDeviceId;return t?g.default.formattedUrl(e,{device_id:t}):e}},{key:"createCheckout",value:function(e){return n.addCohortIdToPayload(e).then(function(e){return fetch(n.CREATE_CHECKOUT_URL,{body:g.default.param(e),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"cors"})})}},{key:"createCheckoutUrl",value:function(e,t){var r=n.CHECKOUT_FRONTEND_URL;return{checkoutUrl:"".concat(r).concat(t.merchant.public_api_key,"/new/").concat(e,"/"),checkoutAri:e}}},{key:"getErrorDialogConfig",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.ERROR_MAPPING,i=t.field&&t.field.match(/^(shipping|billing|total)/i);if(["financial-product-state-exclusion","inactive-merchant"].indexOf(t.code)>-1)e={body:t.message};else if("invalid_field"===t.code&&i)if(t.ui&&t.ui.main&&t.ui.sub){var a=t.ui.sub_extra,s="";a&&a.length&&(s="<br /><p>".concat(a.map(r.default).join("</p><p>"),"</p>")),e={body:(0,r.default)(t.ui.sub),body_extra:s,title:(0,r.default)(t.ui.main)}}else if(o[t.field]&&"state"===t.message)e={title:"Your address is outside the United States.",body:"We're sorry, Affirm currently only provides financing in the United States. Please return to the merchant to choose another payment method."};else if(o[t.field]){var u=o[t.field];e={body:"Please return to the merchant to correct your ".concat(u,"."),title:"You provided an invalid ".concat(u,".")}}else e=t.message?{body:t.message}:{body:"We're sorry, there was an issue with the ".concat(i[0]," information provided, please update your information and try again.")};else"checkout-amount-over-limit"===t.code?e={body:"Your purchase amount is over Affirm's limit. Please choose another payment method or modify your purchase total.",title:"Please choose another payment method"}:"service_unavailable"===t.code&&(e={body:"We're working hard to make Affirm even better. Please try again later.",icon_class:"affirm-alert-icon-large",title:"Affirm is temporarily unavailable due to regular maintenance"});return e}},{key:"handleCheckoutWithIdResponse",value:function(e){var t=e.checkoutUrl,r=e.checkoutAri;return(0,m.validateCheckoutAri)(r)?{token:r,url:t}:Promise.reject({error:n.INVALID_CHECKOUT_ARI})}},{key:"handleCheckoutResponse",value:function(e){var t=e.checkoutData,r=e.response;if(y.default.trackAPI(n.CREATE_CHECKOUT_URL,r.status,t),200===r.status){var o=t.redirect_url;if(o){var i=t.id;if(!i)i=k(o.match(/\/new\/(\w*)/)||[],2)[1];var a={token:i,url:o};return t.js_callback_id&&(a.js_callback_id=t.js_callback_id),a}var s={error:n.UNKNOWN_ERROR};return Promise.reject(s)}var u=t||n.UNKNOWN_ERROR;return 503===r.status&&(u={code:"service_unavailable"}),Promise.reject(u)}},{key:"isValidMode",value:function(e){return p.default.isValidMode(e)||e===n.MODE_REDIRECT}},{key:"isCaas",value:function(){}},{key:"parseCheckoutResponse",value:function(e){return e.json().then(function(t){return{checkoutData:t,response:e}}).catch(function(){return e.text().then(function(t){return{checkoutData:t,response:e}}).catch(function(){})})}},{key:"payloadFilter",value:function(e){return void 0!==e&&null!==e&&(!!Array.isArray(e)||("object"!==E(e)||Object.keys(e).length>0))}},{key:"showGetCheckoutDataError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.isCaas?(0,d.showError)(w({},n.getErrorDialogConfig(e),{container:t.externalContainer,iframe_container_css:{position:"relative",height:"100%"},fullscreen:1})):(0,d.showError)(n.getErrorDialogConfig(e))}},{key:"windowReload",value:function(e){window.location=e}},{key:"APP_NAME",get:function(){return"Affirm Checkout"}},{key:"CREATE_CHECKOUT_URL",get:function(){return encodeURI(g.default.getApiUrl(c.default.resource_urls.new_order))}},{key:"CHECKOUT_FRONTEND_URL",get:function(){return encodeURI(g.default.getFrontendUrl(c.default.resource_urls.new_order))}},{key:"ERROR_MAPPING",get:function(){return{"billing.address":"billing address","billing.phone_number.phone_number":"billing phone number","billing.phone_number":"billing phone number","billing.name.first":"billing first name","billing.name.last":"billing last name","billing.email.email":"billing email","billing.name":"billing name","billing.email":"billing email","shipping.address":"shipping address","shipping.phone_number.phone_number":"shipping phone number","shipping.phone_number":"shipping phone number","shipping.name":"shipping name","shipping.name.first":"shipping first name","shipping.name.last":"shipping last name","shipping.email.email":"shipping email","shipping.email":"shipping email",total:"total"}}},{key:"INVALID_CHECKOUT_ARI",get:function(){return"Checkout ARI must be non-empty and may only contain characters [A-Z] and [0-9]"}},{key:"INVALID_MODE_ERROR",get:function(){return"Widget mode must either be 'modal', 'popup', or 'redirect'"}},{key:"MISSING_SOURCE_ERROR",get:function(){return"Widget config must either include a checkoutPayload or a src"}},{key:"MODE_REDIRECT",get:function(){return"redirect"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Please click continue if you don't see the Affirm Checkout window. You may need to turn off your pop-up blocker."}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_CHECKOUT_MESSAGES"}},{key:"REQUEST_CHECKOUT_CLOSE_MESSAGE",get:function(){return"REQUEST_CHECKOUT_CLOSE"}},{key:"UNKNOWN_ERROR",get:function(){return{code:"unknown_error",message:"An unknown error has occurred",type:"unknown_error"}}}]),P(n,[{key:"close",value:function(e,t){var r=this;this.isInvalidCheckoutSuccessData(t)?y.default.trackActionLog("AFJS Checkout invalid success data",{checkoutAri:this.config.checkoutAri,checkoutToken:t.data.checkout_token}):t?C(R(n.prototype),"close",this).call(this,function(){t.success?(r.isValidVcnCheckoutSuccessData(t.data)||y.default.trackActionLog("AFJS Checkout invalid vcn success data",{checkoutAri:r.config.checkoutAri,checkoutToken:t.data&&t.data.checkout_token,checkoutSuccessData:Object.keys(t.data)}),y.default.trackActionLog("AFJS_checkout_succeeded",{checkoutAri:r.config.checkoutAri,checkoutToken:t.data&&t.data.checkout_token,elapsedTime:Date.now()-r.widgetOpenTime,isIFrameReady:r.isIFrameReady,widgetMode:r.config.mode}),r.config.onSuccess(t.data)):(y.default.trackActionLog("AFJS_checkout_failed",{checkoutAri:r.config.checkoutAri,elapsedTime:Date.now()-r.widgetOpenTime,isIFrameReady:r.isIFrameReady,widgetMode:r.config.mode}),r.config.onFail(t.data)),r.unload(),"function"==typeof e&&(y.default.trackActionLog("AFJS_checkout_close_callback",{checkoutAri:r.config.checkoutAri,widgetMode:r.config.mode}),e())}):(y.default.trackActionLog("AFJS_user_closed_modal",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode}),this.postMessage({id:n.POST_MESSAGE_ID,name:n.REQUEST_CHECKOUT_CLOSE_MESSAGE}))}},{key:"enableHeaderAuth",value:function(e){if(!g.default.sniffer.cookies||!g.default.sniffer.localstorage)return y.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"cookies",widgetMode:e}),Promise.resolve(!0);if(n.isCaas(this.config.checkoutPayload)){var t=e===p.default.MODE_POPUP||e===p.default.MODE_UNSUPPORTED;return t&&y.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"caas",widgetMode:e}),Promise.resolve(t)}return e===p.default.MODE_POPUP&&g.default.isIosWebView()&&!g.default.isAffirmWebView()?(y.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"ios in-app",widgetMode:e}),Promise.resolve(!0)):Promise.resolve(!1)}},{key:"getCheckoutData",value:function(){var e=(0,A.default)(this.config.checkoutPayload,n.payloadFilter),t=this.config.checkoutAri;return t?Promise.resolve(n.createCheckoutUrl(t,e)).then(n.handleCheckoutWithIdResponse):n.createCheckout(e).then(n.parseCheckoutResponse).then(n.handleCheckoutResponse)}},{key:"isInvalidCheckoutSuccessData",value:function(e){return e&&e.success&&e.data&&e.data.checkout_token&&0!==e.data.checkout_token.indexOf("LS-")&&e.data.checkout_token!==this.config.checkoutAri}},{key:"isValidVcnCheckoutSuccessData",value:function(e){var t=this.config&&this.config.merchant&&this.config.merchant.use_vcn,n=e&&e.billing_address&&e.cardholder_name&&e.checkout_token&&e.created&&e.cvv&&e.expiration&&e.id&&e.number,r=e&&e.is_pay_now&&e.cardholder_name&&e.cvv&&e.expiration;return r&&delete e.is_pay_now,!t||n||r}},{key:"loadCheckoutSource",value:function(e){var t=this;this.getCheckoutData().then(function(n){t.onGetCheckoutDataSuccess(n,e)},this.onGetCheckoutDataError)}},{key:"onCheckoutFail",value:function(e){"declined"===e.reason?n.windowReload(this.config.merchant.user_decline_url):n.windowReload(this.config.merchant.user_cancel_url)}},{key:"onCheckoutSuccess",value:function(e){return(0,f.default)({checkoutData:e,checkoutAri:this.config.checkoutAri,mode:this.config.mode,userConfirmationUrl:this.config.merchant.user_confirmation_url,userConfirmationUrlAction:this.config.merchant.user_confirmation_url_action})}},{key:"onGetCheckoutDataError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(R(n.prototype),"close",this).call(this,function(){e.unload();var r={isCaas:n.isCaas(e.config.checkoutPayload),externalContainer:e.options.container};n.showGetCheckoutDataError(t,r)})}},{key:"onGetCheckoutDataSuccess",value:function(e,t){this.setCheckoutData(e),y.default.trackActionLog("AFJS_open_checkout",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode}),this.config.mode===p.default.MODE_MODAL?C(R(n.prototype),"open",this).call(this,t):this.config.mode===p.default.MODE_POPUP?this.updatePopupSource(this.options.src,t):this.config.mode===n.MODE_REDIRECT&&(g.default.setUrl(this.options.src),"function"==typeof t&&t())}},{key:"onPopupClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.popup.off("close",this.onPopupClose),y.default.trackActionLog("AFJS_popup_closed_by_user",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode,canceled:e}),e&&this.close(null,{data:{reason:"canceled"},success:!1})}},{key:"onPopupOpen",value:function(e){var t=this;this.popup.on("close",this.onPopupClose),C(R(n.prototype),"onPopupOpen",this).call(this,function(){t.options.src?"function"==typeof e&&e():t.loadCheckoutSource(e)})}},{key:"open",value:function(e){var t=this;return p.default.determineMode(this.config.mode).then(function(r){return t.enableHeaderAuth(r).then(function(o){var i=r,a=t.config.checkoutPayload;(o&&((a=a||{}).merchant=a.merchant||{},a.merchant.use_headers=!0,t.config.checkoutPayload=a,i=p.default.MODE_MODAL),a=a||{},t.config.checkoutPayload=a,g.default.isAffirmWebView()&&i!==n.MODE_REDIRECT&&(i=p.default.MODE_MODAL),i===p.default.MODE_UNSUPPORTED)&&(i=a&&a.merchant&&a.merchant.use_vcn?n.MODE_UNSUPPORTED:n.MODE_REDIRECT);t.config.mode=i,i===p.default.MODE_MODAL?(y.default.trackImpression("Checkout Modal Page"),t.options.src?C(R(n.prototype),"open",t).call(t,e):t.loadCheckoutSource(e)):i===p.default.MODE_POPUP?(y.default.trackImpression("Checkout Popup Page"),C(R(n.prototype),"open",t).call(t,e)):i===n.MODE_REDIRECT?(y.default.trackImpression("Checkout Redirect Page"),t.options.src?(y.default.trackActionLog("AFJS_open_checkout_with_src_set",{checkoutAri:t.config.checkoutAri,widgetMode:t.config.mode,src:t.options.src}),g.default.setUrl(t.options.src)):t.loadCheckoutSource(e)):i===p.default.MODE_UNSUPPORTED&&(y.default.trackActionLog("AFJS_open_checkout_mode_unsupported_error",{checkoutAri:t.config.checkoutAri,widgetMode:t.config.mode}),(0,d.showError)({body:"Affirm Checkout requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),"function"==typeof e&&e())})})}},{key:"postMessageListener",value:function(e){var t=h.default.parsePostMessageData(e);if(t&&t.id===n.POST_MESSAGE_ID)switch(t.name){case"AFFIRM_CHECKOUT_CLOSE":y.default.trackActionLog("AFJS_checkout_post_message_received",{checkoutAri:this.config.checkoutAri,isIFrameReady:this.isIFrameReady,messageName:t.name,widgetMode:this.config.mode}),this.close(null,t),a.default.open(i.Apps.toast,{forceShow:!0,onSuccess:!0});break;case"AFFIRM_CHECKOUT_INIT":this.clearTimers(!0);break;case"AFFIRM_CHECKOUT_STEP":l.default.trigger("checkout:step",{step:t.data&&t.data.step})}}},{key:"setCheckoutData",value:function(e){this.config.checkoutAri=e.token,this.options.src=n.decorateUrlWithDeviceId(g.default.formattedUrl(e.url,{fs:1}))}},{key:"unload",value:function(){C(R(n.prototype),"unload",this).call(this),b.default.unbind(window,"message",this.postMessageListener),this.trigger("unload",{},!1)}}]),n}();t.default=x},function(){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(10)),o=u(n(119)),i=u(n(21)),a=n(13),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,"Popup")).options=Object.assign(n.DEFAULT_OPTIONS,r),e}return f(n,null,[{key:"DEFAULT_OPTIONS",get:function(){return{popupName:"Affirm",popupOverlayMessage:"Please click continue if you don't see the Affirm window. You may need to turn off your pop-up blocker.",popupTimeout:2500,popupWidth:400}}}]),f(n,[{key:"clearTimer",value:function(){}},{key:"close",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.clearTimer(),this.popupOverlay&&this.popupOverlay.close(),this.popupWindow&&(this.popupWindow.close(),delete this.popupWindow),this.trigger("close",t),"function"==typeof e&&e(t)}},{key:"getLoadingPage",value:function(){}},{key:"open",value:function(e){return this.popupWindow&&!this.popupWindow.top&&delete this.popupWindow,this.popupWindow?this.popupWindow.focus():(this.popupTimer=setTimeout(this.openPopupOverlay.bind(this,e),this.options.popupTimeout),this.popupWindow=window.open(this.options.src||"",this.options.popupName,(0,a.childWindowParams)(this.options.popupWidth)),this.options.src||this.getLoadingPage()),"function"==typeof e&&e(),this.popupWindow}},{key:"openPopupOverlay",value:function(e){delete this.popupTimer,this.popupOverlay?this.popupOverlay.open():(this.popupOverlay=new o.default({template_args:{title:this.options.popupOverlayMessage}}),this.popupOverlay.on("close",this.close.bind(this,null,!0)).on("continue",this.open.bind(this,e)).on("continue",function(){s.default.trackImpression("Popup Appeared From Continue")}))}},{key:"renderLoadingPage",value:function(e){var t=i.default.render({},e);!this.options.src&&this.popupWindow&&this.popupWindow.document&&(this.popupWindow.document.open(),this.popupWindow.document.write(t),this.popupWindow.document.close())}},{key:"updateSource",value:function(e){this.options.src=e,this.popupWindow&&this.popupWindow.location&&this.popupWindow.location.replace(e)}}]),n}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(31)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,r.default);var t,n,i,a=c(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this,o.default.extend({name:"affirm_overlay",template:"templates/overlay.html",template_args:{title:"Please click continue if you don't see the Affirm window. You may need to turn off your pop-up blocker."}},t))).open(),e}return t=l,i=[{key:"APP_NAME",get:function(){return"Affirm Overlay"}}],(n=null)&&s(t.prototype,n),i&&s(t,i),l}();t.default=f},function(e,t,n){"use strict";n.r(t),n.d(t,"TIMEOUT_ERROR",function(){return r});var r="TIMED_OUT";t.default=function(e,t){var n,o,i,a=new Promise(function(e,a){o=a,i=e,n=setTimeout(function(){a(r)},t)});return Promise.race([e,a]).then(function(){}).catch(function(e){throw clearTimeout(n),o(),e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(122)),o=i(n(125));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={"checkout-button":r.default,promo:o.default},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s[e])throw new Error("".concat(e," is not a valid Affirm component type"));return new s[e](t).getApi()}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(3)),o=u(n(9)),i=u(n(123)),a=u(n(53)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,i.default);var t=g(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=s.default.getFrontendUrl(r.default.resource_urls.checkout_button_route);return(o=t.call(this,{id:"checkout-button",src:i},e)).setupEventListeners(),o}return h(n,null,[{key:"isEqualItems",value:function(e,t){return!(!e||!t)&&(e.length===t.length&&e.every(function(e,n){return e.display_name===t[n].display_name&&e.unit_price===t[n].unit_price&&e.qty===t[n].qty&&e.sku===t[n].sku}))}}]),h(n,[{key:"handlePostMessage",value:function(e){var t=e.name,r=f(e,["name"]);if(d(y(n.prototype),"handlePostMessage",this).call(this,l({name:t},r)),t===n.OPEN_ORDERS){if("click"in this.eventHandlers)return this.handleOnClick();this.setupOrders({})}return null}},{key:"handleOnClick",value:function(){var e=this.eventHandlers.click;return Promise.resolve(e()).then(this.setupOrders.bind(this))}},{key:"setupOrders",value:function(e){var t=e.items,r=e.blockModal,i=e.discount_codes;if(r&&!0===r)o.default.trigger("orders:blocked");else{var s=t||this.options.items;this.prequalOrderWidget&&n.isEqualItems(this.prequalOrderWidget.items,s)||(this.prequalOrderWidget=new a.default({startAtOrders:!0,items:s,discountCodes:i||this.options.discount_codes},{})),this.prequalOrderWidget.open()}}},{key:"setupEventListeners",value:function(){var e=this;o.default.on("orders:open",function(){e.postMessage(n.ORDERS_HAS_OPENED)}),o.default.on("orders:blocked",function(){e.postMessage(n.ORDERS_BLOCKED)})}}]),n}();t.default=A,v(A,"OPEN_ORDERS","AFFIRM_COMPONENT_CHECKOUT_BUTTON_OPEN_ORDERS"),v(A,"ORDERS_HAS_OPENED","AFFIRM_COMPONENT_CHECKOUT_BUTTON_ORDERS_HAS_OPENED"),v(A,"ORDERS_BLOCKED","AFFIRM_COMPONENT_CHECKOUT_BUTTON_ORDERS_BLOCKED")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2)),o=u(n(6)),i=u(n(15)),a=u(n(0)),s=u(n(8));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var f=function(){function e(t,n){var i=t.id,a=t.src;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("An id is required to create a component.");if(!a)throw new Error("A src is required to create a component.");this.options=Object.assign({},n),this.id="".concat(i,"-").concat(parseInt(1e16*Math.random(),10));var s=r.default.localDeviceId,u=a.indexOf("?")>-1?"&":"?";this.src="".concat(a).concat(u,"componentId=").concat(this.id,"&device_id=").concat(s,"&public_api_key=").concat(o.default.getPublicApiKey()),this.setupIFrame(),this.setupPostMessage(),this.eventHandlers={},this.externalApi={render:this.render.bind(this),update:this.update.bind(this),unmount:this.unmount.bind(this),on:this.on.bind(this),off:this.off.bind(this)}}return l(e,null,[{key:"POST_MESSAGES",get:function(){return{iframeReady:"AFFIRM_COMPONENT_IFRAME_READY",style:"AFFIRM_COMPONENT_STYLE",updateOptions:"AFFIRM_COMPONENT_UPDATE_OPTIONS"}}},{key:"DEFAULT_STYLES",get:function(){return{width:"0",height:"0",display:"block"}}},{key:"IFRAME_CLASS",get:function(){return"affirm-component-iframe"}}]),l(e,[{key:"setupIFrame",value:function(){this.isIFrameReady=!1,this.iframe=document.createElement("iframe"),a.default.setElementAttrs(this.iframe,{id:this.id,class:e.IFRAME_CLASS,width:e.DEFAULT_STYLES.width,height:e.DEFAULT_STYLES.height,frameborder:0,allowScroll:"no",allowTransparency:!0,src:this.src}),a.default.setElementStyle(this.iframe,e.DEFAULT_STYLES)}},{key:"setupPostMessage",value:function(){s.default.bind(window,"message",this.postMessageListener.bind(this))}},{key:"render",value:function(e){var t=document.querySelector(e);if(!t)throw new Error("There are no elements matching the selector ".concat(e));if(this.iframe.parentNode===t)return this.getApi();if(this.iframe.parentNode)throw new Error("You must unmount() this element before rendering it to a different container");return t.appendChild(this.iframe),this.getApi()}},{key:"unmount",value:function(){return this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.isIFrameReady=!1),this.getApi()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.options,t),this.postMessage(e.POST_MESSAGES.updateOptions,this.options),this.getApi()}},{key:"on",value:function(){}},{key:"off",value:function(e){return e in this.eventHandlers&&delete this.eventHandlers[e],this.getApi()}},{key:"getApi",value:function(){return this.externalApi}},{key:"postMessage",value:function(e,t){if(!this.isIFrameReady||!this.iframe.contentWindow)return!1;var n=JSON.stringify({id:this.id,name:e,data:t});return this.iframe.contentWindow.postMessage(n,a.default.getDomain(this.src)),!0}},{key:"updateStyles",value:function(e){e.width&&this.iframe.setAttribute("width",e.width),e.height&&this.iframe.setAttribute("height",e.height),a.default.setElementStyle(this.iframe,e)}},{key:"handlePostMessage",value:function(t){switch(t.name){case e.POST_MESSAGES.iframeReady:this.isIFrameReady=!0,this.update();break;case e.POST_MESSAGES.style:this.updateStyles(t.data)}}},{key:"postMessageListener",value:function(e){var t=i.default.parsePostMessageData(e);t&&t.id===this.id&&this.handlePostMessage(t)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrder=t.createOrder=void 0;var r=a(n(6)),o=a(n(3)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=i.default.getFrontendUrl("api/pf/orders/v1/"),u=function(){console.error("Affirm could not create an order because of invalid options. Please check documentation (https://docs.affirm.com/) for valid options.")};t.createOrder=function(e){var t=e.items,n=e.discount_codes,i=void 0===n?[]:n,a=o.default.merchant;if(!a)return u(),Promise.resolve();var c={items:t,merchant:{merchant_apply_discount_endpoint:a.merchant_apply_discount_endpoint,merchant_create_order_endpoint:a.merchant_create_order_endpoint,merchant_update_shipping_option_newsletter_endpoint:a.merchant_update_shipping_option_newsletter_endpoint,name:a.merchant_name,public_api_key:r.default.getPublicApiKey(),user_cancel_url:a.user_cancel_url,user_confirmation_url:a.user_confirmation_url,use_vcn:a.use_vcn,newsletter_config_enabled:a.newsletter_config_enabled,discount_config_enabled:a.discount_config_enabled},discount_codes:i};return o.default.checkout&&o.default.checkout.metadata&&(c.metadata=o.default.checkout.metadata),fetch(s,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).catch(console.error).then(function(e){return e&&e.ari?e:u()})};t.getOrder=function(e){return fetch(function(){}(e),{method:"GET",mode:"cors",credentials:"include"}).then(function(e){return 200!==e.status?Promise.reject("Failed to get order from server"):e.json()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(2)),o=p(n(33)),i=p(n(6)),a=n(34),s=p(n(16)),u=p(n(11)),c=p(n(17)),l=p(n(0)),f=p(n(29)),d=p(n(1));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=["logo","symbol","text"],v=["black","blue","white"],A=3e6,b=.01,_=["qty","unitPrice","displayName","sku"],w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"getFormattedOptions",function(e){return Object.assign({affirmLogoColor:"blue",affirmLogoType:"logo",amount:0,learnMoreShow:!0,items:[]},e)}),g(this,"getPromo",function(){n.promoJson=null;var t=n.options,r=t.amount,i=t.pageType,a=t.affirmLogoType,s=t.affirmLogoColor,u=t.promoId,c=t.learnMoreShow,l=t.items;if(!e.optionsAreValid(n.options))return Promise.resolve(null);if(!i)return console.error("ERROR (Affirm): No pageType provided."),Promise.resolve(null);if(r>A)return console.error("ERROR (Affirm): Amount provided is greater than maximum loan amount."),Promise.resolve(null);if(-1===y.indexOf(a))return console.error('ERROR (Affirm): Received an incorrect affirmLogoType value: "'.concat(a,'".')),Promise.resolve(null);if(-1===v.indexOf(s))return console.error('ERROR (Affirm): Received an incorrect affirmLogoColor value: "'.concat(s,'".')),Promise.resolve(null);var f=[];if(l.forEach(function(e){var t=Object.keys(e);_.forEach(function(e){-1===t.indexOf(e)&&-1===f.indexOf(e)&&f.push(e)})}),f.length>0)return console.error('ERROR (Affirm): "'.concat(f,'" is a required field for each item.')),Promise.resolve(null);var p=Date.now(),h=Object.assign({},n.options),m={promoId:u,amount:r,pageType:i,items:l,logoType:a,logoColor:s,showCTA:c.toString()};return o.default.getPromoResponse(n.apiKey,m,o.default.TEMPLATE_FIELD.ala).then(function(e){return d.default.trackEvent("Promo JS: create ALA",{elapsedTime:Date.now()-p},b),JSON.stringify(n.options)!==JSON.stringify(h)?null:(n.promoJson=e?e.promo:null,e?e.promo:null)})}),g(this,"generatePromoPrequalConfig",function(e){var t=e.promoId,o=e.amount,i=e.pageType,a=e.items,c=s.default.get(),d=n.apiKey;return h({},c,{urlParams:{device_id:r.default.localDeviceId,items:a,merchant_name:c.merchant_name,promo_external_id:t,referring_url:encodeURIComponent(window.location.href),unit_price:o,webhook_session_id:c.webhook_session_id||l.default.getWebhookSessionId(),page_type:i,use_promo:!0,bluecore_distinct_id:f.default.getDistinctID(d),bluecore_token:f.default.getToken(d)},mode:u.default.MODE_MODAL})}),g(this,"openPrequalModal",function(e){if(!n.modalElement){var t=n.generatePromoPrequalConfig(h({},e)),r=new c.default(t);return n.modalElement=r,r.open(null,{mode:u.default.MODE_MODAL})}return n.modalElement.open(null,{mode:u.default.MODE_MODAL})}),g(this,"setupAffirmModalTrigger",function(e,t){var n=e.getElementsByClassName("affirm-modal-trigger");if(0===n.length)return d.default.trackEvent("no affirm-modal-trigger found",h({},t)),null;if(n.length>1)return d.default.trackEvent("too many affirm-modal-trigger elements found",h({numElements:n.length},t)),null;var r=n[0],o=r.innerText||r.innerHTML;return r.setAttribute("aria-label","".concat(o," (opens in modal)")),r.setAttribute("href","javascript:void(0)"),r}),this.apiKey=i.default.getPublicApiKey(),this.options=this.getFormattedOptions(t),this.promo=this.getPromo(),this.promoJson=null,this.modalElement=null,this.externalApi={render:this.render.bind(this),update:this.update.bind(this)}}var t,n,p;return t=e,p=[{key:"optionsAreValid",value:function(e){if(!e)return console.error("ERROR (Affirm): No options were passed."),!1;var t=["affirmLogoColor","affirmLogoType","amount","brand","category","learnMoreShow","pageType","promoId","sku","items"];return!!Object.keys(e).every(function(e){return t.indexOf(e)>=0})||(console.error("ERROR (Affirm): Received invalid options."),!1)}}],(n=[{key:"getApi",value:function(){return this.externalApi}},{key:"attachModalToAla",value:function(e){var t=this;this.hasRendered=!0,this.isRendering=!1,d.default.trackImpression("Promo JS: ALA Rendered");var n={amount:this.options.amount,pageType:this.options.pageType,promoId:this.options.promoId,type:"product_page_modal",items:(0,a.getItemsInput)(this.options.items)},r=this.setupAffirmModalTrigger(e,n);r&&(r.onclick=function(e){e.preventDefault(),d.default.trackUserInteraction("Promo JS: CTA Clicked",d.default.USER_ACTIONS.CLICK),t.openPrequalModal(n)})}},{key:"render",value:function(e){var t=this,n=document.querySelector(e);return n?(this.cssSelectorForPromo=e,this.isRendering=!0,this.promoJson?(n.innerHTML=this.promoJson.html_ala,this.attachModalToAla(n)):this.promo.then(function(){}),this.getApi()):(console.error("ERROR (Affirm): There are no elements matching the selector ".concat(e)),null)}},{key:"update",value:function(t){var n=this;return e.optionsAreValid(t)?(this.modalElement=null,Object.keys(t).forEach(function(e){n.options[e]=t[e]}),this.promo=this.getPromo(),d.default.trackImpression("Promo JS: ALA Updated"),(this.isRendering||this.hasRendered)&&this.render(this.cssSelectorForPromo),this.getApi()):null}}])&&m(t.prototype,n),p&&m(t,p),e}();t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2)),o=u(n(16)),i=u(n(17)),a=u(n(0)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,s.default)(this,"createPrequalWidget","launchPrequalFlow"),o.default.instance.on(["reset","set","update"],this.createPrequalWidget)}var t,n,u;return t=e,(n=[{key:"createPrequalWidget",value:function(){if(!this.prequalWidget){var e=o.default.get();this.prequalWidget=new i.default(c({},e,{urlParams:{device_id:r.default.localDeviceId,merchant_name:e.merchant_name,referring_url:encodeURIComponent(window.location.href),webhook_session_id:e.webhook_session_id||a.default.getWebhookSessionId()}}))}}},{key:"launchPrequalFlow",value:function(){return this.prequalWidget||this.createPrequalWidget(),this.prequalWidget.open(null,o.default.get()),this.prequalWidget.getTargetWindow()}}])&&l(t.prototype,n),u&&l(t,u),e}();t.default=f},function(){},function(){},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t){e.exports="data:font/woff2;base64,d09GMgABAAAAAAlYAA8AAAAAFEgAAAj7AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGjYbIByCNgZgAIMOEQgKl1STPAtOAAE2AiQDgRgEIAWDDweBXRvXEKOikpOP7J8HtjG14VAQdRidULZRWmJz/PX9gfVZGNoYNTYNkUdykoOcYRFOjgiqZevZ3U9BEbJaB5JColAp+KxeCdwXEmXRCBmF/UIh1B3hZs0iKSTgoajWgaqnTVU5QXs1PVd9c+X97+fDncPk9NVmcrp3Maiw/LbS9KefxeqTq7lsVGfuqwEdAAnDKqRcgW30I8LmTrn+tfaqdzIvALg/jD6ejYqM3LvgfjwIIik0IuMz2RSIZR0JV2HT8ZXyK10hK4zqsTbkAKOC1kX1d6+EAHyuRIoB+C1p0XErAoaA9oImbIiSrWLEYGKGWDIbBms5wlJA8CmgT0MHzbwjfcDBAjRhgCgdnTQOo7gxY6eutggEs84OL5CK2RUNFcSyCZxnfxNBI16eCh49plnm3YfnUaseBiftfDKiReKW/gZMGGK4lgabkEQkbohUITFSUkpqLIjADiNG2mdR4OMQYMDo6BBkTmskKWxAXLacGgePgkgEkyqc7ONRzaDtDHTIiEwq4lBVESatQiS5EtUxW5nlRbTGmQjpLT0LYN6cJf4gMbiQphdTYB5CCx7zTrgIednDQABhdxBA1mwQ+jJRIceGpad8iejcehHEIJ9fp1FTF+ErXvi/y5VnKbyCuu3hq3JVm0/D1bAtbA1bwka5Sq4EJiRSSoMdGqINEPnMkQAkhZNAgZPQctN2hwPcPsHjg2DyiPcXoACwCkULqAlrUFVAx/gA5H+L1rquq3h6ILKgbEwIU4VVGEEYG8np/weNVsPj2dmx9mStVCTKNOHqaDdLzjFnarTMTF+28AMKteyMhtjBIIyYYHaOZBiVxam8tlpGXZHZ+TKI9B9M4yhKegE3HC+Pk1KtzLflEpNjEifNF73vN4tbHmmB8Jx3KJmOsvBx3RintyEkYEHWJImEIQQZEWwoEDX6BiinGF9yoNxGhnjV6ja5HafcRSHP3zSx4yFmCyvxmMwlNlx1MpmLYB9B2EUCSTc5CumvjGmYILMR7pBzjV6r4i+SbQaTj1xO4Yrf3sIUsnuQunEyJ4iLYIjPg5G4YLrsvp26w33LSYSU/8f4rpW4QvgwCKU/lMx5ykP2brfvn9YxXrchFGVENHzSNCjkqKQKKlsK0jbZRjdSD9Xh2sIy8JDY7AJxHiOu5FUk9KMh4GOxs4M5TlBKtoC0qH+cuoQ54DNNwsG+o0izAL4L3GXxntYmo7jIjpuAo3VjKbR7AwflxzNCBccU8HLDKoTnANrsrZ5hTagZwm2y2ea5bdwAgORtqK4n7cCBc4WA7I2l3WhbHifFHILrswp+x5kwtstHQDohZmcGGuedshntuXYZDEWKL86YnLN0W8bX5Rsg4uZ2ECB6g6KWdrloRSfG+faQf1WP8zk1S5a1AMxd9GKnUUhzbjK311k9kGQSFH3Esd6jTKhEEs/Lsft+nBJHE0tfJvylk733IR3OdnvQLwgY5og5C0H6h+CI6DNCyjLkil0Tu8exTHDUYldXn++xqMfaSBeLgVk8LU/GCuPwcFlb2dJixIRy9EDGFtYX/LnmL5WhELhKyZiYftsg//9zsN98LVO41tXqqFn2vEn1DzZ/3KRV6iJ1Xq9qiFLVKvX8jSG5NXxoZmOlZMHPW0tFthiT2MA4TdNBlo26sdAsNh+PH+fKL5US57ESf4AaX+j3lYTP7LHsKyZ7p1vElmOWFT0LF/G4l+seB5ten7f1yzdtdcuWoXK7wbbVhPVyPO4zLzz7o/SQRWxuBNfH7z9revYjytUzPDGIYWUwycYzmG8Bzo+XwnuO979zvAe/Djo/T3TKbpDkDdl9Mr6YdCXWcihriWXSiLYsG9XYbqw2VY+NebXG9vbqEaH84jHbq9zLnjSFSt562+M5ubOE2nXS0/72243w9dsKT3DyFFVy8mS75+2vqLUN69aRz5K55r6VOfkshEnWLDZn2GWK5j7L7fnza6x4iVgC+cdBkIhBbIxpOGiLSS4rSyaL4f3r4MkWd4f9S2vVQtpoNVEK4cBQKzEtozi1JDsbAKKL7XmQ2x1R56dosDfJAxIzrSnG4lLyYihx+fqRe8V5Lh0ACBZvArJr/wI+Qgj2NsmLetw/8gYKrRMA8q1RiIHsXwgxu3/98Atpv6mVvqifhl9I/1QrH3L8PBxZVFWUBkUDvM4oRzkpOHQRzDVAuVJDtE97en5NABAcPIRMNV/Gmb23LGgtyBzJPJUxkjGptXh4/TBknJnRGp4cMjRSgQBFahq1r3sWzJ7QdsHGO3PPLDYfgztmHp3Cvc2teQ175+bFSCdLaVHMsbYmD/saW+dEPQFyj0vHSFIkbWTXpNClqUVPOqVJGpKSeDE8PY+efWN7YgAAoO/keUmZorqzLXY0JhQb2rI1VItjo711zNatxKkZjW3rFD2+jPTuk772mrS6lI5ZlzonZfbt23NSZ6esW1+QRrx12+s9Z10MXSqpFn8z++A6bevooFXoJ2/alLp+d2rSkEXeZirETp5sdC9YkFTfP86XFcq6P2H/yuzMDCr123/TEtj23ZqMGVZPNj0+B3r23xnptmaPc2ZBbmtum7ZjUFGZWJxIVVg7G+rRZ/BP7Y3tiTmw3zmcMLwmsBhZoqHf2CvJWcFAJoPJQHv2F6GEt+5J8pyUjUAdzi/frSzrBGHWbxxmwaur/tDc4a7Kd57HAUMFz9Ex9F4hgkOE1L4WsIsb0MMErSjewK88h+wYhSrgrMBvrjXXavnRyt7akgAIqA5rWz5jp0RHwAiGMJIIVppZkEkLQI1fC6GftgGWtvapPDKwQYWLeNnYj0FARpkY4igLoMCPLVIzxQCmj8YlWeNOKBvbaUgvuHt+3+DBAJeCOozq4TUE/uJ3AyA5/8qL3goaMqxTvz4GLvGc4AOB47jinVqqI2k64rR3COrbIqjXiKAA22cqA5pfv8qCVyuLB197mPVWcRnt7/83ORd5nfmZK4gEjGACk0WRYpRStDLlKlSpVqNWnXoNGjVp1sITLMRGGIpAHMRFOCIQD/GRAAmxjp6pA5NcEaN9nU6ns/EoTnc6wQVuSIJkSIFUSIN0yIcCZSEAAA=="},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAABJkAAwAAAAAEhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABHAAAASwAAAEs32rhc09TLzIAAAJIAAAAYAAAAGAPEgcYY21hcAAAAqgAAACEAAAAhOoj63VnYXNwAAADLAAAAAgAAAAIAAAAEGdseWYAAAM0AAAMOAAADDiQsAItaGVhZAAAD2wAAAA2AAAANhi1tNFoaGVhAAAPpAAAACQAAAAkDVAJd2htdHgAAA/IAAAAlAAAAJQ+lAb4bG9jYQAAEFwAAABMAAAATBxmH/xtYXhwAAAQqAAAACAAAAAgACwAqW5hbWUAABDIAAABegAAAXp7w/pPcG9zdAAAEkQAAAAgAAAAIAADAAAAAQAAAAoAHgAsAAFsYXRuAAgABAAAAAAAAAABAAAAAWxpZ2EACAAAAAEAAAABAAQABAAAAAEACgAAAAEAHAALADYASABaAGYAdgCGAJQApADUAN4A6AABAAsABAAFAAYABwALAA4AEwAWABwAHQAhAAEABAAeAAYACQAJAAwAFAAPAAEABAAjAAYACQAJAAwAFAAPAAEABAAfAAMABQAKAAEABAAbAAUADgARABUACAABAAQAGQAFAAUAEgASABgAAQAEACAABAARAAUAEAABAAQAHAAFABcADAAHAA0AAgAGAB4AHQALABQABQAQABUAEgAFABQACAAQABYAGgAIAAsAFwAPAAYAFQAXABIAAQAEACMAAgAcAAEABAAjAAIAHQABAAQAIAACACEAAwTiAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpDAPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAaAAAABYAEAADAAYAAQAgAEEAYwBpAHUAeekC6Qz//f//AAAAAAAgAEEAYQBlAGsAeekA6QT//f//AAH/4//D/6T/o/+i/58XGRcYAAMAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAFAAD/wAQAA8AAGwA4AFQAYABsAAABIgcOAQcGFRQXHgEXFjMyNz4BNzY1NCcuAScmAyInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiMTJgYHDgEjIiYnLgEHDgEXFhceARcWMzI2NzYmJRQGIyImNTQ2MzIWBRQGIyImNTQ2MzIWAgBqXV2LKSgoKYtdXWpqXV2LKSgoKYtdXWpYTk10IiIiInRNTlhYTk10IiIiInRNTljzECIKHGU2OmEcCiIQEAgHExwcRCcmKFCLKQcI/qgmGhslJRsaJgEqJRsaJiYaGyUDwCgpi11dampdXYspKCgpi11dampdXYspKPxVIiJ0TU5YWE5NdCIiIiJ0TU5YWE5NdCIiAVEKCxAwOjowEAgHCSIQJBscJgsKT0cQIuMbJSUbGyUlGxslJRsbJSUAAAADAAD/xAQAA8AAJgArAFcAAAEjNiYnLgErAQ4BFRYGByMOAQcjIgYVERQWOwEeATMhMjY1ETQmIwUzESMRARQGIyEiJicuASsBET4BNz4BNzY3PgE3NiczMhYXHgEHBhYXHgE7ATIWFREDVaYNEyAaSSYrIzIDShcEEyUMhSMyMiO4IE4wAapHZGRH/QBWVgNWMiT+ViQ5FwkZDAkGDQcGDgkqHx4nCQkCJyAjChMHCQQMDQ0gE6YkMgJzeoUjGhEDMiCwSgYHFw0yI/5VIzIUE2VGAV5DY43+VgGq/oUkMg0NBgcBtwMIBgcHAwoZGVM7O0wHChNuXRMhEA0RMiP+qwAAAAEA4gCVAx4C3gAmAAABJiIPAScmIgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3NjQvATc2NCcDHg0iDeLiDSINDQ3i4g0NBxEGBhEH4uIHEQYGEQcNDeLiDQ0C3g0N4uINDQ0iDeLiDSINBgcHBuLiBgcHBg0iDeLiDSINAAADAAD/wANuA8AANABRAGQAAAE3NjQnJiIPAS4BJzUzMjY1NCYrASIGFRQWOwEVBgcOAQcGFRQXHgEXFjMyNz4BNzY1NCYnASInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiMTIzU0JiMiBh0BFBY7ATI2NTQmAw4hDg4PKA4hMHI/MBUcHBXDFBwcFDFSR0hpHh4iI3dQUFtbUFB3IiMzLf6pRz4+XRsaGhtdPj5HRj8+XBsbGxtcPj9GkpIdFBQdHRTDFB0dAokhDigPDg4hJTEHMx0UFB0dFBQdMwkmJXVLS1VbUFB3IyIiI3dQUFtOizn9mRobXT4+R0Y/PlwbGxsbXD4/Rkc+Pl0bGgFVkhQdHRTDFB0dFBQdAAMAAP/AAwADwAAPAB8AWgAAJRE0JiMhIgYVERQWMyEyNichIiY1ETQ2MyEyFhURFAYDIyImNTQ2OwEyNjU0JisBNTQmIyIGHQEiBhUUFjsBMhYVFAYrASIGFRQWOwEVFBYzMjY9ATI2NTQmIwMAMiP9qiMyMiMCViMya/3WCQ0NCQIqCQ0N81YRGRkRqxIZGRJVGRISGTVLSzVWERkZEasSGRkSVRkSEhk1S0s1FQNWIzIyI/yqIzIyIw0JAyoJDQ0J/NYJDQHWGRESGRkSERkrEhkZEitLNTVLGRESGRkSERkrEhkZEitLNTVLAAAAAAYAAP/uCLgCVgAhACsARgBwAKIApgAAEyIGBxc+ATMyFhUUBgcOARUUFjM4ATEyNj8BFTMRNCYjMQMiJjU0NjcUBiMBETM1NDYzOAExMhYXMTcuASMqASMxIgYHNSMlDgEHMS4BIyoBIyIGBxU1IxEzNTQ2MzIWHQEzNTQ2MzIWHQEzETQmIzEFIzU0NjMyFhcnNzAmIyIGHQEjNTQ2MzgBMTIWFzU3LgEjIgYdASMVMxEzETMRMxEzNTsBESPJMmgfJhlKJSIlGBhae0g9KkYVAWtkSSgXF0pGNysEYXRBHg4ZChULGQ0BAQEtOhJsAy8oRBYRQikBAgEnPxFvczAbGSdzLx0XKHNPOPu5aSUUDhsMASQ1MTdnryUUDhsLIw8zIzdnQkJ0rnRoRXNzAZkoGU8WIhcYDxEDDDtFNz4oIQE/AQdSR/6pFRIjHQctQQFL/m3CRTIIB2sEBScoRAwBJiAhJiggAT3+bc84NiMp8c85NSMo8gEWREUMKSgcBwYBURdKYh0pKBwGBwFRCQ5KYh1Z/sUBO/7GATpZ/m0AAwBVABUDqwNrABYAHgBBAAAlAy4BKwE0JiMiBhUjIgYHAwYWMyEyNgEyFhUjNDYzASEiJjUTNDY7ARUUFjMyNj0BMxUUFjMyNj0BMzIWFRMUBiMDq1oGKyBVZUZGZVUdLgZaBjEmArQmMf5PIzKqMiMBPP2ICQxRDAlAGBMTGKoYExMYQAYPUQwJfAIAHSdGZWVGJx3+ACdAPQLDMiMjMv1WEAkB1gYLKxMYGBMrKxMYGBMrCwb+KgkQAAADAAD/wAQAA8AAOgBWAHMAAAEzMjY1NCYrATU0JiMiBh0BIgYVFBY7ATIWFRQGKwEiBhUUFjsBFRQWMzI2PQEyNjU0JisBIiY1NDYzEyIHDgEHBhUUFx4BFxYzMjc+ATc2NTQnLgEnJgMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYjAdWrExgYE1UYExMYNkpKNlYTFxcTqxMYGBNVGBMTGDZKSjZWExcXEytqXV2LKSgoKYtdXWpqXV2LKSgoKYtdXWpYTk10IiIiInRNTlhYTk10IiIiInRNTlgCQBcUExcrExgYEytJNzZKFxMUFxcUExcrExgYEytJNzZKFxMUFwGAKCmLXV1qal1diykoKCmLXV1qal1diyko/FUiInRNTlhYTk10IiIiInRNTlhYTk10IiIAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAX/wAWJA8AAOgAABTY3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFhcjJicuAScmNTQ3PgE3NjMyFx4BFxYVFAcOAQcGByMEnBcSEhkHBiwtmWdndnVnZ5osLAYHGRISF6ISDg4UBQU4N8CBgJKTgIG/ODcFBRMODhKiQCIlJlAqKyx1Z2eaLC0tLJpnZ3UsKypQJiUiJCYmUCkqK5KBgMA4Nzc4wICBkisqKVAmJiQAAAACAY3/xQPCAkoAKAAyAAABIgcOAQcGBxc+ATMyFhUUBgcGBw4BBwYVFBYzMjY3FTMRNCcuAScmIwMiJjU0NjMUBiMCvCYnJ0ohIBc5JnA3NDgmI0Q7O1YZGXBiPGcdoxQURy8wODAnKn1cSj4CSggIGxISEnkjMyMkFxsDBw4OMyUlNFNePTRfAY09LCs4DQ39+iAcOiY9XwAAAAABBC//9QmOA8AALgAAASIHDgEHBgczNjc+ATc2MzIXHgEXFhUcARUUBgc3Mzc+ATU8ATUVNCcuAScmIzEGynRsbLFAQB5xGTQ0klpaY3lubaUxMBEQAW0CDA83N7+BgZUDwCYmhVpbaE5GR2ogIC0spHR0kAIEAjxzNgYDMnE7AgMCAaCHh8M2NwAAAAEAAAABAAAqWeqfXw889QALBAAAAAAA2AQ4KgAAAADYBDgqAAD/wAmOA8AAAAAIAAIAAAAAAAAAAQAAA8D/wAAACZEAAAAACY4AAQAAAAAAAAAAAAAAAAAAACUEAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAADiA4AAAAMAAAAJkQAABAAAVQQAAAAAAAAABY8ABQVjAY0JkQQvAAAAAAAKABQAHgAoADIAPABGAFAAWgBkAG4AeACCAIwAlgCgAKoAtAC+AMgA0gDcAOYA8AGSAhQCUgLgA1gEKASGBSQFLgWIBdYGHAABAAAAJQCnAAYAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABgAAAAEAAAAAAAIABwBXAAEAAAAAAAMABgAzAAEAAAAAAAQABgBsAAEAAAAAAAUACwASAAEAAAAAAAYABgBFAAEAAAAAAAoAGgB+AAMAAQQJAAEADAAGAAMAAQQJAAIADgBeAAMAAQQJAAMADAA5AAMAAQQJAAQADAByAAMAAQQJAAUAFgAdAAMAAQQJAAYADABLAAMAAQQJAAoANACYYWZmaXJtAGEAZgBmAGkAcgBtVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwYWZmaXJtAGEAZgBmAGkAcgBtYWZmaXJtAGEAZgBmAGkAcgBtUmVndWxhcgBSAGUAZwB1AGwAYQByYWZmaXJtAGEAZgBmAGkAcgBtRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(){},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(3)),o=s(n(6)),i=s(n(57)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}n(61);var u={},c=["text","logo","symbol"],l=["black","blue","white"],f=function(e){var t,n=e,r=n.getAttribute("data-promo-id"),o=n.getAttribute("data-affirm-color")||"blue",s=n.getAttribute("data-affirm-type")||"logo",f="true"===n.getAttribute("data-learnmore-show"),d="false"!==n.getAttribute("data-clickable");if(-1===c.indexOf(s))throw new Error('Affirm: Received a wrong data-affirm-type value "'.concat(s,'". Element:'),n);if(-1===l.indexOf(o))throw new Error('Affirm: Received a wrong data-affirm-color value "'.concat(o,'". Element:'),n);return t="text"===s?"Affirm":'<span class="__affirm-logo __affirm-logo-'.concat(o,'">').concat("symbol"===s?"affirm":"Affirm","</span>"),a.default.trackImpression("Inline Prequal Promo"),u.getConfig(r).then(function(e){var r=e.pricingTemplate;if(r=r.replace(/\{affirm_logo\}/gi,t),n.innerHTML=r,f){n.innerHTML="".concat(n.innerHTML,". ");var o=document.createElement("a");o.innerHTML="Learn more",o.setAttribute("aria-label","".concat("Learn more"," (opens in modal)")),o.setAttribute("href","javascript:void(0)"),o.onclick=function(e){a.default.trackUserInteraction("Inline Prequal Promo",a.default.USER_ACTIONS.CLICK),e.preventDefault(),i.default.launchPrequalFlow()},n.appendChild(o)}else d&&(n.setAttribute("aria-label","".concat(r," (opens in modal)")),n.setAttribute("href","#"),n.onclick=function(e){a.default.trackUserInteraction("Inline Prequal Promo",a.default.USER_ACTIONS.CLICK),e.preventDefault(),i.default.launchPrequalFlow()},n.style="cursor: pointer;")})};u.getConfig=function(e){var t="".concat(r.default.promos_url_prefix,"prequal_text/").concat(o.default.getPublicApiKey(),"/").concat(e,".json");return window.fetch(t).then(function(){})},u.setupElement=f,u.setupElements=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];f(n)}};var d=u;t.default=d},function(e,t,n){"use strict";var r,o=(r=n(21))&&r.__esModule?r:{default:r};o.default.put("templates/learn_more_split_pay.html",n(136)),o.default.put("templates/loading.html",n(137)),o.default.put("templates/promo.html",n(138)),o.default.put("templates/overlay.html",n(139))},function(e,t){e.exports='<!DOCTYPE html>\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Learn More About Affirm</title>\n    <meta name="description" content="">\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css">\n</head>\n<body>\n  <div id="modal-wrapper" style="display:none;">\n    <div class="affirm_learn_more_modal-background" onclick="trigger(\'close\');"></div>\n    <div id="affirm_learn_more_modal" class=" {{modal_class}}">\n      <div class="affirm-content-wrapper" style="font-family: {{font}}">\n        <div class="affirm-modal-hero" style="{{ hero_image }}">\n        </div>\n        <div class="affirm-modal-content">\n          <button class="close-modal-button btn" href="javascript:;" onclick="trigger(\'close\');">\n            <span class="close-icon">close</span>\n          </button>\n          <div class="affirm-content-text">\n            <div class="affirm-modal-header">\n              <span class="__affirm-logo __affirm-logo-blue __ligature__affirm_full_logo__ __processed">Affirm</span>\n              <span class="affirm-modal-plus">+</span>\n              <img src="{{logo_image}}" class="affirm-merchant-logo" />\n            </div>\n            <h1 class="affirm-tagline" tabindex="-1">\n              {{copy.tagline}}\n            </h1>\n            <p class="affirm-promo-text" style="font-family: {{fontFamily}};">\n              {{copy.promo}}\n            </p>\n            <div class="affirm-copy-sections">\n              <div class="copy-section">\n                <span class="copy-section-icon" style="color:{{color}};">{{copy.section_1.icon}}</span>\n                <h2 style="font-family: {{fontFamily}};">{{copy.section_1.header}}</h2>\n                <p style="font-family: {{fontFamily}};">{{copy.section_1.body}}</p>\n              </div>\n              <div class="copy-section">\n                <span class="copy-section-icon" style="color:{{color}};">{{copy.section_2.icon}}</span>\n                <h2 style="font-family: {{fontFamily}};">{{copy.section_2.header}}</h2>\n                <p style="font-family: {{fontFamily}};">{{copy.section_2.body}}</p>\n              </div>\n            </div>\n            <div class="affirm-checkout">\n              {{copy.cta}}\n            </div>\n          </div>\n          <div class="affirm-footer">\n            {{footer}}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    window[\'affirm_events\'] = {\n      hiding: function(){\n        document.getElementById("modal-wrapper").className = "";\n      },\n\n      showing: function(){\n        document.getElementById("modal-wrapper").className = "show";\n      }\n    };\n\n    setTimeout(function(){\n      window.affirm_events.showing();\n    },100);\n  <\/script>\n</body>\n</html>\n'},function(e,t){e.exports='<!DOCTYPE html>\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Loading</title>\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css"/>\n  </head>\n  <body>\n    <div class="loading-wrapper">\n      <div class="loader">\n        <div class="dots">\n          <div class="dot dot-a"></div>\n          <div class="dot dot-b"></div>\n          <div class="dot dot-c"></div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>'},function(e,t){e.exports='<!DOCTYPE html>\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Affirm Promo</title>\n    <meta name="description" content="">\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css"/>\n    <style>{{custom_css}}</style>\n  </head>\n  <body class="affirm-promo">\n    <a href="javascript:;" id="affirm_promo_link" onclick="trigger(\'click\');">\n      <img src="{{img_src}}" />\n    </a>\n  </body>\n</html>\n'},function(e,t){e.exports='<!DOCTYPE html>\n<head>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n  <title>Affirm Overlay</title>\n  <meta name="description" content="">\n  <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css">\n</head>\n<body>\n  <div id="modal-wrapper" style="display:none;">\n    <button\n      aria-label="Close Modal"\n      class="close-modal-button btn"\n      onclick="trigger(\'close\');"\n    >&times;</button>\n    <div id="affirm-overlay">\n      <div class="affirm-content-wrapper">\n        <div>\n          <h1 class="affirm-section" tabindex="-1">{{title}}</h1>\n        </div>\n        <button\n          aria-label="Continue"\n          id="affirm-primary-action-button"\n          class="btn"\n          onclick="trigger(\'continue\');"\n        >Continue</button>\n      </div>\n    </div>\n  </div>\n  <script>\n    window[\'affirm_events\'] = {\n      hiding: function() {\n        document.getElementById(\'modal-wrapper\').className = \'\';\n      },\n      showing: function() {\n        document.getElementById(\'modal-wrapper\').className = \'show\';\n      },\n    };\n\n    setTimeout(function() {\n      window.affirm_events.showing();\n    }, 100);\n  <\/script>\n</body>\n</html>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Date.now(),t=Math.random()<m;a.default.ready(),r.default.initialize({apiUrl:l.default.getApiUrl("")}).then(function(){d.default.ready(function(){var n,r;n=l.default.getApiUrl(""),r=l.default.getFrontendUrl(""),l.default.preconnectTo(n),l.default.preconnectTo(n,!0),l.default.preconnectTo(r),l.default.preconnectTo(r,!0),t&&p.default.trackEvent("DOM: Ready",{elapsedTime:Date.now()-e});for(var a={affirm:"affirm_short_logo",Affirm:"affirm_full_logo"},d=document.getElementsByClassName("__affirm-logo"),h=0;h<d.length;h+=1)(0,f.applyLigatures)(d[h],a);(0,f.addInsertListener)("affirm_logo_listener",function(){});var m=Array.prototype.slice.call(document.getElementsByClassName("affirm-promo"));m.forEach(function(e){if(e)try{new u.default({container:e})}catch(e){p.default.trackActionLog("Promo: incorrect merchant PromoWidget config")}}),i.default.open(o.Apps.toast,{initial:!0}),t&&p.default.trackEvent("Promo: Pre-delay",{elapsedTime:Date.now()-e}),l.default.delay(function(){t&&p.default.trackEvent("Promo: Refresh",{elapsedTime:Date.now()-e}),(0,c.default)({trackPromos:t})}),console&&"function"==typeof console.warn&&l.default.sniffer.failed.forEach(function(){}),s.default.ready()})})};var r=h(n(2)),o=n(22);n(141);h(n(20));var i=h(n(30)),a=h(n(56)),s=h(n(54)),u=h(n(142)),c=h(n(63)),l=h(n(0)),f=n(13),d=h(n(143)),p=h(n(1));function h(e){return e&&e.__esModule?e:{default:e}}var m=.1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(144),o=s(n(6)),i=s(n(3)),a=n(34);function s(e){return e&&e.__esModule?e:{default:e}}var u="".concat(i.default.frontend_url.replace(/\/$/,"")),c={merchant_public_key:o.default.getPublicApiKey()||(0,a.getPublicApiKeyByWindowLocation)()},l=r.AxpClient.initialize(u,{appName:"affirm-js",appVersion:"10.74.0"},c);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(3)),o=l(n(28)),i=l(n(20)),a=l(n(18)),s=l(n(47)),u=l(n(0)),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function(){}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function(){}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,s.default);var t=m(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.container;if(!i)throw new Error("missing container");var a=o.size||i.getAttribute("data-promo-size");if(!a)throw new Error("missing size");var s=(a=a.toLowerCase()).split("x"),c=parseInt(s[0],10),l=parseInt(s[1],10),f=o.key||i.getAttribute("data-promo-key"),d=o.content||i.getAttribute("data-promo-content");if(!f&&!d)throw new Error("missing ARI or content");var p=null;p=d||"".concat(r.default.base_cdn_url,"/").concat(f,"_").concat(a);var h=u.default.extend({container:i,css:{height:l,width:c},template_args:{img_src:p,target_href:"".concat(u.default.getDomain(r.default.url),"learn-more/")}},o||{});return(e=t.call(this,u.default.extend(h,{name:"affirm_promo",template:"templates/promo.html"}))).setupWidget(o,i),e.promo_ari=f,e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm Promo"}}]),p(n,[{key:"renderWidget",value:function(){this.paint()&&this.show(),c.default.trackImpression("Promo Widget")}},{key:"setupWidget",value:function(e,t){var n=this,r=e.productKey||t.getAttribute("data-financial-product-key")||t.getAttribute("data-product-key")||i.default.getProduct();this.product_key=r,r?o.default.get(r,function(e){n.details=e,n.renderWidget()}):this.renderWidget(),this.on("click",function(){u.default.isMobile()&&window.scrollTo(0,0),null!=n.learn_more_window?n.learn_more_window.open():n.learn_more_window=new a.default({source:n})})}}]),n}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new function(){var e=!1,t=[];function n(e,t,n){window.addEventListener?t.addEventListener(e,n,!1):document.attachEvent&&t.attachEvent("on".concat(e),n)}function r(){!0!==e&&(t.forEach(function(){}),e=!0)}function o(){if(!0!==e){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(o,1)}r()}}this.ready=function(n){!0!==e||"function"!=typeof n?t.push(n):n()},"complete"!==document.readyState?document.addEventListener?(n("DOMContentLoaded",document,r),n("load",window,r)):document.attachEvent&&(n("load",window,r),n("readystatechange",document,r),document.documentElement.doScroll&&null===window.frameset&&o()):r()};t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"AxpClient",function(){return R}),n.d(t,"axpClientMiddleware",function(){return N}),n.d(t,"buildAxpGetAssignmentsAction",function(){return L}),n.d(t,"buildAxpTrackImpressionAction",function(){return F}),n.d(t,"buildAxpSetCustomAttributeAction",function(){return U}),n.d(t,"buildAxpClearCustomAttributeAction",function(){return B}),n.d(t,"axpAssignmentsReducer",function(){return Q}),n.d(t,"axpAssignmentsReducerWrappedWith",function(){return V}),n.d(t,"assignmentFetchStatus",function(){return v}),n.d(t,"impressionTypes",function(){return i}),n.d(t,"SHOWN_DEFAULT",function(){return G}),n.d(t,"SHOWN_TREATMENT",function(){return K});var r=n(4),o=n.n(r),i=Object.freeze({SHOWN_DEFAULT:"shown_default",SHOWN_TREATMENT:"shown_treatment"}),a=function(e,t,n,r){var i={assignment:e,impressionType:t,impressionAt:n,impressionData:r||{}};return o()(i)},s=n(38),u=n.n(s),c=n(2),l=function(){function e(e,t,n){if(void 0===n&&(n={}),!e||"string"!=typeof e)throw new Error("HeaderConfig: appName must be provided to constructor as string");if(!t||"string"!=typeof t)throw new Error("HeaderConfig: appVersion must be provided to constructor as string");if(n&&"object"!=typeof n)throw new Error("HeaderConfig: appHeaders must be an object");this.universalHeaders={Accept:"text/html, application/json","Affirm-User-Agent":"Affirm-Web","Affirm-Platform":e,"Affirm-App-Version":t},this.appHeaders=n,this.defaultHeaders={"Content-Type":"application/json"}}var t=e.prototype;return t.updateWithResponseHeaders=function(e){void 0===e&&(e=new Map),e.get("Affirm-Authorization")&&(this.universalHeaders["Affirm-Authorization"]=e.get("Affirm-Authorization"))},t.getCombinedHeaders=function(e){return void 0===e&&(e={}),Object.assign({},this.defaultHeaders,e,this.appHeaders,this.universalHeaders)},e}(),f=function(e,t,n,r,o){void 0===t&&(t={}),void 0===n&&(n="GET"),void 0===r&&(r={}),void 0===o&&(o="include");var i={credentials:o,headers:r,method:n},a=r["Content-Type"];return"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(t instanceof FormData?(i.body=t,delete i.headers["Content-Type"]):i.body=JSON.stringify(t)),fetch(e,i).then(function(e){if(e.status>=500||404===e.status)return{responseData:{message:404===e.status?"Not Found":"Unexpected Error"},responseHeaders:e.headers,responseStatus:e.status};switch(a){case"application/json":return e.json().then(function(t){return{responseData:t,responseHeaders:e.headers,responseStatus:e.status}});default:return e.text().then(function(){})}})},d=Object.freeze({APP_NAME:"Affirm-Platform",APP_VERSION:"Affirm-App-Version",APP_USER_AGENT:"Affirm-User-Agent",APP_CAPABILITIES:"Affirm-Client-Capabilities"});function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(e,t,n,r){if(void 0===r&&(r={}),p(this,"urlBase",null),p(this,"headerConfig",null),void 0===e||null===e||!t||!n)throw Error("AXP client: invalid configuration");this.urlBase=e,this.headerConfig=new l(t,n,r)}var t=e.prototype;return t.getHeaders=function(){return this.headerConfig.getCombinedHeaders()},t.getAssignments=function(e,t,n,r,i){var a,s,u=this.getHeaders(),c={experiment_names:e,feature_flag_names:t,custom_attributes:n,related_units:r},l=f(this.urlBase+"/api/axp/v1/assignments/fetch",c,"POST",u);return(a=i,s=l,new Promise(function(){})).then(function(i){if(200!==i.responseStatus)throw new Error(i.responseData.message);var a=i.responseData.assignments||{},s=i.responseData.feature_flag_assignments||{},u=(new Date).toISOString(),c={},l={};return e.forEach(function(e){c[e]=function(e,t,n,r,i){if(void 0===r&&(r={}),void 0===i&&(i={}),t&&t.experiment_name!==e)throw Error("assignment experiment name mismatch");var a={experimentName:e,hasVariant:!!t&&!!Object.keys(t).length,experimentUuid:t&&t.experiment_uuid,assignmentUuid:t&&t.assignment_uuid,unitType:t&&t.unit_type,unitValue:t&&t.unit_value,variantName:t&&t.variant_name,internalReason:t&&t.internal_reason,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,a[e]||void 0,u,n,r)}),t.forEach(function(e){l[e]=function(e,t,n,r,i){void 0===r&&(r={}),void 0===i&&(i={});var a={featureFlagName:e,variantName:t,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,s[e]||void 0,u,n,r)}),o()({experimentAssignments:c,featureFlagAssignments:l})})},t.fireImpressions=function(e){var t=this.getHeaders(),n=[];e.forEach(function(e){if(e.getIn(["assignment","hasVariant"])){var t={assignment:{experiment_name:e.getIn(["assignment","experimentName"]),experiment_uuid:e.getIn(["assignment","experimentUuid"]),assignment_uuid:e.getIn(["assignment","assignmentUuid"]),unit_type:e.getIn(["assignment","unitType"]),unit_value:e.getIn(["assignment","unitValue"]),variant_name:e.getIn(["assignment","variantName"]),internal_reason:e.getIn(["assignment","internalReason"])},impression_type:e.impressionType,impression_at:e.impressionAt,data:Object.assign({},{assignment_data:{assignment_at:e.getIn(["assignment","assignmentAt"]),custom_attributes:e.getIn(["assignment","customAttributesData"]),related_units:e.getIn(["assignment","relatedUnits"])}},e.impressionData)};n.push(t)}});var r,o={impressions:n};return n.length?f((r=this.urlBase,r+"/api/axp/v1/assignments/impressions"),o,"POST",t).then(function(e){if(200!==e.responseStatus)throw new Error(e.responseData.message);return!!e.responseData.results}):Promise.resolve(!1)},e}();var m=Object.freeze({appName:{required:!0,objectType:"String"},appVersion:{required:!0,objectType:"String"},capabilities:{required:!1,objectType:"Array",defaultTo:[]},forceMemoryStorage:{required:!1,objectType:"Boolean",defaultTo:!1},cacheTtlMs:{required:!1,objectType:"Number",defaultTo:3e5},impressionFlushIntervalMs:{required:!1,objectType:"Number",defaultTo:1e3},assignmentFetchTimeoutMs:{required:!1,objectType:"Number",defaultTo:3e3},networkRetryThreshold:{required:!1,objectType:"Number",defaultTo:5}}),g=function(){function e(e){var t,n,r;r=null,(n="config")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r;var i={};if(Object.keys(e).filter(function(){}).length>0)throw Error("Unsupported Axp ClientConfig");Object.keys(m).forEach(function(t){var n=m[t];if(n.required&&!e[t])throw Error("Missing client config");var r=e[t]||n.defaultTo;if(Object.prototype.toString.call(r)!=="[object "+n.objectType+"]")throw Error("Unexpected client config type");i[t]=r}),this.config=o()(i)}return e.prototype.getAdditionalAppHeaders=function(){var e;return this.config.capabilities.length>0?((e={})[d.APP_CAPABILITIES]=this.config.capabilities,e):{}},e}(),y=Object.freeze({CLIENT_PLATFORM:"client_platform",CLIENT_VERSION_STR:"client_version_str",CLIENT_USER_AGENT:"client_user_agent",CLIENT_ALL_CAPABILITIES:"client_all_capabilities"}),v=Object.freeze({PENDING:"pending",SUCCESS:"success",FAILED:"failed"});var A=function(){function e(e){var t,n,r;if(void 0===e&&(e={}),r=null,(n="attributes")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,"object"!=typeof e)throw Error("Invalid custom attributes");this.attributes=o()(e)}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes=this.attributes.set(e,o()(t))},t.getAttributes=function(){return this.attributes},t.getAttributesJS=function(){return this.getAttributes()},t.clearAttribute=function(){},e.constructClientAttributesFromHeaders=function(e){var t,n=((t={})[y.CLIENT_PLATFORM]=e[d.APP_NAME],t[y.CLIENT_VERSION_STR]=e[d.APP_VERSION],t[y.CLIENT_USER_AGENT]=e[d.APP_USER_AGENT],t[y.CLIENT_ALL_CAPABILITIES]=e[d.APP_CAPABILITIES],t);return o()(n)},e}();function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(e){_(this,"storageKey",null),this.storageKey=e}var t=e.prototype;return t.putItem=function(e,t){var n=this.getAllContent().set(e,t);this.write(JSON.stringify(n))},t.getItem=function(e){return this.getAllContent()[e]},t.deleteItem=function(e){var t=o.a.without(this.getAllContent(),e);this.write(JSON.stringify(t))},t.getAllContent=function(){return o()(JSON.parse(this.read())||{})},t.clearStorage=function(){this.clear()},e.featureSupported=function(){var e=new this("affirmsniffer");try{return e.write("{}"),e.read(),e.clear(),!0}catch(e){return!1}},e}(),E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call.apply(e,[this].concat(r))||this),"memory",{}),t}b(t,e);var n=t.prototype;return n.read=function(){},n.write=function(){},n.clear=function(){},t}(w),k=function(e){function t(){return e.apply(this,arguments)||this}b(t,e);var n=t.prototype;return n.read=function(){return localStorage.getItem(this.storageKey)},n.write=function(e){localStorage.setItem(this.storageKey,e)},n.clear=function(){localStorage.removeItem(this.storageKey)},t}(w),O=function(e){var t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t},S=function(e,t){return function(e,t){var n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every(function(n,o){var i=r[o];return n===i&&e[n]===t[i]})}(O(e),O(t))};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I="axp-client-experiments-store",T="axp-client-feature-flags-store",M={experiment:"_axp_mock_exp",featureFlag:"_axp_mock_ff"},C=function(){function e(t,n,r){if(void 0===r&&(r={}),P(this,"urlBase",null),P(this,"apiInstance",null),P(this,"clientConfigInstance",null),P(this,"customAttributesInstance",null),P(this,"experimentsStorageInstance",null),P(this,"featureFlagsStorageInstance",null),P(this,"impressionsQueue",[]),P(this,"impressionsRetryCount",0),P(this,"impressionsFlushTimer",null),null!==e.instance)return e.instance;this.urlBase=t,c.default.initialize({apiUrl:t}),this.clientConfigInstance=new g(n);var o=this.clientConfigInstance.config,i=o.appName,a=o.appVersion;this.apiInstance=new h(this.urlBase,i,a,this.clientConfigInstance.getAdditionalAppHeaders());var s=this.apiInstance.getHeaders(),u=A.constructClientAttributesFromHeaders(s);this.customAttributesInstance=new A(Object.assign({},r,u)),!this.clientConfigInstance.config.forceMemoryStorage&&this.clientConfigInstance.config.cacheTtlMs&&k.featureSupported()?(this.experimentsStorageInstance=new k(I),this.featureFlagsStorageInstance=new k(T)):(this.experimentsStorageInstance=new E(I),this.featureFlagsStorageInstance=new E(T)),e.instance=this,this.flushImpressionsAndSetTimer=this.flushImpressionsAndSetTimer.bind(this),this.flushImpressionsAndSetTimer()}e.initialize=function(t,n,r){if(void 0===r&&(r={}),null!==e.instance)throw Error("Axp Client has already been initialized");return new e(t,n,r)},e.getExperimentVariants=function(e){return this.getAxpVariants({experimentNames:e,featureFlagNames:[]}).then(function(e){return e.experimentVariants})},e.getAxpVariants=function(t){var n=t.experimentNames,r=t.featureFlagNames,o=t.prepopulatedRelatedUnits,i=void 0===o?null:o;if(e.raiseIfNotInstantiated(),!(n&&n.length||r&&r.length))return Promise.resolve({experimentVariants:{},featureFlagVariants:{}});if(e.isMockMode())return Promise.resolve(e.useMockResults({experimentNames:n,featureFlagNames:r}));var a=e.instance.customAttributesInstance.getAttributes();i&&Object.keys(i).forEach(function(t){t in e.constants.relatedUnits||e.warnToRollbar("AXP Client invalid prepopulated related unit",{message:t})});var s=i||{};return c.default.deviceId.then(function(e){!e||"device_id"in s||(s.device_id=e)}).then(function(){var t=e.instance.getAssignmentsFromStore("experiment",n,a,s),o=t.assignmentVariants,i=t.uncached,u=e.instance.getAssignmentsFromStore("featureFlag",r,a,s),c=u.assignmentVariants,l=u.uncached;return i.length||l.length?e.instance.fetchAssignments(i,l,a,s).then(function(t){var n=t.experimentAssignments,r=t.featureFlagAssignments;return i.forEach(function(t){var r=n[t];r&&(o[t]=r.variantName,e.instance.addExperimentAssignmentToStore(t,r))}),l.forEach(function(t){var n=r[t];n&&(c[t]=n.variantName,e.instance.addFeatureFlagAssignmentToStore(t,n))}),{experimentVariants:o,featureFlagVariants:c}}).catch(function(){}):{experimentVariants:o,featureFlagVariants:c}}).catch(function(){})},e.trackImpression=function(t,n,r,o,s){if(void 0===o&&(o={}),void 0===s&&(s=!1),e.raiseIfNotInstantiated(),e.isMockMode())return!0;var u=(new Date).toISOString(),c=e.instance.getExperimentAssignmentFromStore(t);if(-1===Object.keys(i).map(function(e){return i[e]}).indexOf(r))return e.warnToRollbar("AXP Client Invalid Impression Type",new Error("Invalid impressionType "+r+" for "+t+"-"+n)),!1;if(c){if(!c.hasVariant)return!1;if(c.variantName!==n)return e.warnToRollbar("AXP Client Assignment vs. Impression Variant Mismatch",new Error("Mismatched variantName on assignment for "+t+": "+n+" instead of "+c.variantName)),!1;var l=a(c,r,u,o);return e.instance.impressionsQueue.push(l),s&&e.instance.flushImpressionsAndSetTimer(),!0}return e.warnToRollbar("AXP Client No Assignment But Impression Fired",new Error("Assignment missing but impression fired: "+t+"-"+n)),!1},e.setCustomAttribute=function(t,n){e.raiseIfNotInstantiated(),e.instance.customAttributesInstance.setAttribute(t,n)},e.clearCustomAttribute=function(){};var t=e.prototype;return t.getExperimentAssignmentFromStore=function(e){return this.experimentsStorageInstance.getItem(e)},t.getFeatureFlagAssignmentFromStore=function(e){return this.featureFlagsStorageInstance.getItem(e)},t.addExperimentAssignmentToStore=function(e,t){this.experimentsStorageInstance.putItem(e,t)},t.addFeatureFlagAssignmentToStore=function(e,t){this.featureFlagsStorageInstance.putItem(e,t)},t.canUseExistingAssignment=function(e,t,n){void 0===n&&(n={});var r=new Date(Date.now());return r.setMilliseconds(-1*this.clientConfigInstance.config.cacheTtlMs),!(e.assignmentAt<r.toISOString()||!S(e.customAttributesData,t)||!S(e.relatedUnits,n))},t.fetchAssignments=function(t,n,r,i){var a=o()(t),s=o()(n),u=this.clientConfigInstance.config.assignmentFetchTimeoutMs;return this.apiInstance.getAssignments(a,s,r,i,u).catch(function(t){return e.warnToRollbar("AXP Client Fetch Timeout",t),o()({experimentAssignments:{},featureFlagAssignments:{}})})},t.flushImpressionsAndSetTimer=function(){var t=this;clearTimeout(this.impressionsFlushTimer);var n=this.impressionsQueue.slice();return this.apiInstance.fireImpressions(n).then(function(){return!0}).catch(function(){return!1}).then(function(n){return n?(t.impressionsQueue=[],t.impressionsRetryCount=0):t.impressionsRetryCount+=1,t.impressionsRetryCount<=t.clientConfigInstance.config.networkRetryThreshold?t.impressionsFlushTimer=setTimeout(t.flushImpressionsAndSetTimer,t.clientConfigInstance.config.impressionFlushIntervalMs*Math.pow(2,t.impressionsRetryCount)):e.errorToRollbar("AXP Client Impression Fire Retry Limit Exceeded",new Error("Too many errors when trying to fire impressions. Giving up..")),n})},t.getAssignmentsFromStore=function(e,t,n,r){var o=this,i={},a=[];if(!t||!t.length)return{assignmentVariants:i,uncached:a};var s="experiment"===e?this.getExperimentAssignmentFromStore:this.getFeatureFlagAssignmentFromStore;return t.forEach(function(e){var t=s.call(o,e);t&&o.canUseExistingAssignment(t,n,r)?i[e]=t.variantName:a.push(e)}),{assignmentVariants:i,uncached:a}},e.errorToRollbar=function(e,t,n){void 0===n&&(n=!1);var r=t.message,o=window.Rollbar||window.affirm&&window.affirm.Rollbar;o&&(n?o.warn(e,r,{version:"v2"}):o.error(e,r,{version:"v2"}))},e.warnToRollbar=function(){},e.raiseIfNotInstantiated=function(){if(!e.instance)throw Error("Axp Client has not been instantiated")},e.isMockMode=function(){},e.useMockResults=function(t){var n=t.experimentNames,r=t.featureFlagNames;return{experimentVariants:e.fetchFromCookies(n,"experiment"),featureFlagVariants:e.fetchFromCookies(r,"featureFlag")}},e.fetchFromCookies=function(e,t){var n=M[t],r={};return e.forEach(function(e){r[e]=u.a.get(n+"_"+e)}),r},e}();P(C,"instance",null),P(C,"constants",{relatedUnits:{application_ari:"application_ari",charge_ari:"charge_ari",checkout_ari:"checkout_ari",device_id:"device_id",guarantee_ari:"guarantee_ari",merchant_ari:"merchant_ari",merchant_public_key:"merchant_public_key",offer_ari:"offer_ari",prequal_ari:"prequal_ari",root_flow_type:"root_flow_type",root_flow_ari:"root_flow_ari",session_ari:"session_ari",user_ari:"user_ari"}});var R=C,x="axp/GET-ASSIGNMENTS-SENT",j="axp/GET-ASSIGNMENTS-SUCCESS",D="axp/GET-ASSIGNMENTS-FAILED",N=function(e){return function(t){var n=t.dispatch;return function(t){return function(r){if(!e)throw new Error("Axp Client is not initialized");if(function(e){return"object"==typeof e&&"axp/CLEAR_CUSTOM_ATTRIBUTE"===e.type}(r)){var o=r.attributeKey;return R.clearCustomAttribute(o),t(r)}if(function(e){return"object"==typeof e&&"axp/GET_ASSIGNMENTS"===e.type}(r)){var i=r.experimentNames,a=r.featureFlagNames,s=r.pendingActions,u=r.successActions,c=r.failureActions,l=r.sideEffectData;return s&&s.forEach(function(){}),R.getAxpVariants({experimentNames:i,featureFlagNames:a}).then(function(e){var t=e.experimentVariants,r=e.featureFlagVariants;return u.forEach(function(){}),t}).catch(function(e){return c.forEach(function(t){n({type:t,error:e.message,experimentNames:i,featureFlagNames:a,sideEffectData:l})}),!1})}if(function(e){return"object"==typeof e&&"axp/SET_CUSTOM_ATTRIBUTE"===e.type}(r)){var f=r.attributeKey,d=r.attributeValue;return R.setCustomAttribute(f,d),t(r)}if(function(){}(r)){var p=r.experimentName,h=r.variantName,m=r.impressionType,g=r.additionalData,y=r.flushImmediately;return R.trackImpression(p,h,m,g,!!y),t(r)}return t(r)}}}},L=function(e){var t=e.experimentNames,n=e.featureFlagNames,r=e.pendingAction,o=e.successAction,i=e.failureAction,a=e.sideEffectData;return{type:"axp/GET_ASSIGNMENTS",experimentNames:t,featureFlagNames:n,pendingActions:[x,r].filter(function(e){return!!e}),successActions:[j,o].filter(function(e){return!!e}),failureActions:[D,i].filter(function(e){return!!e}),sideEffectData:a}},F=function(e){var t=e.experimentName,n=e.variantName,r=e.impressionType,o=e.impressionData,i=void 0===o?{}:o,a=e.flushImmediately;return{type:"axp/TRACK_IMPRESSION",experimentName:t,variantName:n,impressionType:r,additionalData:i,flushImmediately:void 0!==a&&a}},U=function(){},B=function(){},H=function(e){var t=e.currentAxpAssignments,n=e.experimentVariants,r=e.fetchedExperimentNames,o=e.fetchStatus,i=e.featureFlagVariants,a=e.fetchedFeatureFlagNames,s={},u={},c={},l={};if(t){var f=t.experimentVariants,d=t.experimentVariantsFetchStatus,p=t.featureFlagVariants,h=t.featureFlagVariantsFetchStatus;Object.keys(f).forEach(function(e){s[e]=f[e],u[e]=d[e]}),Object.keys(p).forEach(function(e){c[e]=p[e],l[e]=h[e]})}var m=n||{},g=i||{};return r&&r.forEach(function(e){s[e]=m[e],u[e]=o}),a&&a.forEach(function(){}),{experimentVariants:s,experimentVariantsFetchStatus:u,featureFlagVariants:c,featureFlagVariantsFetchStatus:l}},q=H({currentAxpAssignments:null,experimentVariants:null,fetchedExperimentNames:[],fetchStatus:v.PENDING,featureFlagVariants:null,featureFlagFetchStatus:v.PENDING,fetchedFeatureFlagNames:[]}),W=function(e,t,n,r){var o,i=e||(n?n(q):q);switch(r&&(i=r(i)),t.type){case x:o=H({currentAxpAssignments:i,experimentVariants:null,fetchedExperimentNames:t.experimentNames,fetchStatus:v.PENDING,featureFlagVariants:null,fetchedFeatureFlagNames:t.featureFlagNames});break;case j:o=H({currentAxpAssignments:i,experimentVariants:t.experimentVariants,fetchedExperimentNames:t.experimentNames,fetchStatus:v.SUCCESS,featureFlagVariants:t.featureFlagVariants,fetchedFeatureFlagNames:t.featureFlagNames});break;case D:o=H({currentAxpAssignments:i,experimentVariants:null,fetchedExperimentNames:t.experimentNames,fetchStatus:v.FAILED,featureFlagVariants:null,fetchedFeatureFlagNames:t.featureFlagNames});break;default:o=i}return n?n(o):o},Q=function(e,t){return W(e,t)},V=function(e){var t=e.wrapper,n=e.unWrapper;if(!t||!n)throw Error("Both wrapper and unWrapper functions are required");return function(e,r){return W(e,r,t,n)}},G=i.SHOWN_DEFAULT,K=i.SHOWN_TREATMENT},function(e,t,n){"use strict";n.r(t),n.d(t,"WRAPPER_STYLES",function(){return g}),n.d(t,"FRAME_STYLES",function(){return y});var r,o,i="@affirm/messages/v1";!function(e){e.handshake="handshake",e.event="event",e.reply="reply"}(r||(r={})),function(e){e.success="success",e.error="error"}(o||(o={}));var a,s=(a={},function(e){var t=a[e]||1;return a[e]=t+1,t}),u={trackEvent:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("event",t)},tag:function(){}};try{var c=n(1);u.trackEvent=function(e,t,n){return void 0===n&&(n=1),c.trackEvent("action-log",{action_name:e,action_data:t},n)},u.tag=c.tag}catch(e){}var l=u;function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){var e=this;d(this,"events",void 0),d(this,"transactions",void 0),d(this,"ready",void 0),d(this,"resolve",void 0),d(this,"reject",void 0),d(this,"origin",void 0),d(this,"messageId",void 0),d(this,"listener",void 0),d(this,"target",void 0),this.reject=function(){},this.resolve=function(){},this.target=window.parent,this.origin="",this.messageId=-1,this.events={},this.transactions={},this.ready=new Promise(function(t,n){e.resolve=t,e.reject=n}),l.tag({postMessageVersion:i})}var t=e.prototype;return t.isSafe=function(e){return(!this.origin||e.origin===this.origin)&&e.data&&e.data.version===i&&(this.messageId<0||e.data.id===this.messageId)},t.onReady=function(e){this.ready.then(e)},t.listen=function(){var e=this;return this.listener=function(t){if(e.isSafe(t)){var n=t.data,i=n.type,a=n.events,s=n.transactionId,u=n.response,c=n.index,f=n.replyType;switch(i){case r.event:a.forEach(function(t,n){var r=t.event,i=t.data;e.events[r]?Object.keys(e.events[r]).forEach(function(t){try{Promise.resolve(e.events[r][t].call(e,i)).then(function(){})}catch(i){l.trackEvent("Affirm Messages: Internal Error in Callback",{eventName:r,callbackIndex:t,callbackError:i}),e.reply(s,n,i,o.error)}}):l.trackEvent("Affirm Messsages: Event is not registered",{eventType:r})});break;case r.reply:e.transactions[s][c][f](u);break;default:l.trackEvent("Affirm Messages: Received unsupported message type",{messageType:i})}}},window.addEventListener("message",this.listener,!1),this.resolve(this),this},t.on=function(e,t){var n,r=s("listener");this.events[e]?this.events[e][r]=t:this.events[e]=((n={})[r]=t,n)},t.remove=function(e,t){var n=this;Object.keys(this.events[e]).forEach(function(r){n.events[e][r]===t&&delete n.events[e][r]})},t.reply=function(e,t,n,o){this.sendMessage({type:r.reply,transactionId:e,index:t,response:n,replyType:o})},t.close=function(){void 0!==this.listener&&window.removeEventListener("message",this.listener,!1)},t.sendMessage=function(e){var t=this;void 0!==this.target&&this.ready.then(function(){try{t.target.postMessage(f({version:i,id:t.messageId},e),t.origin)}catch(r){l.trackEvent("Affirm Messages: Failed to send message",{message:e,error:r,origin:t.origin});var n=e.transactionId;n&&t.transactions[n]&&t.transactions[n].forEach(function(e){e[o.error]({error:r})})}})},t.send=function(e,t){return this.sendAll([{event:e,data:t}])[0]},t.sendAll=function(e){var t=[],n=e.map(function(e,n){return new Promise(function(e,r){var i;t[n]=((i={})[o.success]=e,i[o.error]=r,i)})}),i=s("transaction");return this.transactions[i]=t,this.sendMessage({type:r.event,transactionId:i,events:e}),n},e}();function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=Object.freeze({height:"1px",width:"1px",position:"fixed",zIndex:2147483646}),y=Object.freeze({height:"100%",width:"100%",margin:"0",border:"0",padding:"0"}),v=function(e){var t,n;function o(t,n){var r;return void 0===n&&(n=document.body),m(h(r=e.call(this)||this),"url",void 0),m(h(r),"frame",void 0),m(h(r),"container",void 0),m(h(r),"wrapper",void 0),r.url=t,r.container=n,r.messageId=Date.now()+Math.random(),l.tag({postMessageId:r.messageId}),r.wrapper=document.createElement("div"),r.frame=r.generateFrame(r.wrapper),null===r.frame.contentWindow?(r.reject(),h(r)||h(r)):(r.target=r.frame.contentWindow,r.handshake(),h(r)||h(r))}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=o.prototype;return a.generateFrame=function(e){var t=document.createElement("iframe");return Object.assign(e.style,g),Object.assign(t.style,y),e.id=""+this.messageId,e.appendChild(t),this.container.appendChild(e),t},a.close=function(){e.prototype.close.call(this),null!==this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper)},a.handshake=function(){var e,t,n=this;this.origin=(e=this.url,(t=document.createElement("a")).href=e,void 0===t.origin?t.protocol+"//"+(t.host&&t.host.split(":")[0]):t.origin);var o,a=performance.now(),s=!1;window.addEventListener("message",function e(t){if(n.isSafe(t)){if(t.data.type!==r.handshake)return l.trackEvent("Affirm Messages: Received unsupported handshake type",{messageType:t.data.type}),n.reject();clearInterval(o),window.removeEventListener("message",e,!1),n.origin=t.origin,s&&l.trackEvent("Affirm Message: Recovered hanshake connection after failure");var i=performance.now();return l.trackEvent("Affirm Messages: Handshake completed",{totalTime:i-a},.1),n.listen()}return null},!1);var u=function(){try{n.target.postMessage({version:i,type:r.handshake,id:n.messageId},n.origin)}catch(e){l.trackEvent("Affirm Messages: Initial handshake failed",{origin:n.origin,error:e})}};this.frame.addEventListener("load",function(){o=function(e,t,n,r){if(n<1)return-1;var o=1,i=window.setInterval(function(){e(),(o+=1)>=n&&("function"==typeof r&&r(),window.clearInterval(i))},t);return e(),i}(u,500,50,function(){}